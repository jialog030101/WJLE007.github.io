[{"content":"Using gdb å¹³æ—¶æˆ‘ä»¬ç”¨çš„è°ƒè¯•å·¥å…·å…¶å®éƒ½æ˜¯å›¾å½¢åŒ–åçš„gdbï¼Œä½¿ç”¨èµ·æ¥éå¸¸çš„æ–¹ä¾¿ï¼Œä½†æ˜¯ç†Ÿæ‚‰åŸç”Ÿçš„gdbä¼šä½¿æˆ‘ä»¬çš„æ•ˆç‡è¿›ä¸€æ­¥æå‡ã€‚æˆ‘è®¤ä¸ºå­¦ä¹ å¥½ç”¨gdbè°ƒè¯•æ˜¯ä¸€é¡¹éå¸¸é‡è¦çš„æŠ€èƒ½ã€‚\nç¼–è¯‘å¹¶å¯åŠ¨ ==make qemu-gdb==\nä½¿ç”¨ä¸Šè¿°å‘½ä»¤ç¼–è¯‘é¡¹ç›®å¹¶ä¸”ç›´æ¥ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨ã€‚ä½†æ˜¯è¿™ä¸ªé¡¹ç›®å¯åŠ¨çš„å…¶å®æ˜¯åœ¨æœ¬åœ°çš„ä¸€ä¸ªè¿œç¨‹gdbï¼Œé€šè¿‡å¦ä¸€ä¸ªçª—å£è¿›è¡Œè°ƒè¯•ã€‚ ä¸‹é¢æœ‰å‡ ä¸ªå…³äºç³»ç»Ÿè°ƒç”¨çš„å°é—®é¢˜\nLooking at the backtrace output, which function calledÂ syscall?\næ˜¾ç„¶æ˜¯usertrapï¼ˆï¼‰\nWhat is the value ofÂ p-\u0026gt;trapframe-\u0026gt;a7Â and what does that value represent? (Hint: lookÂ user/initcode.S, the first user program xv6 starts.) é€šè¿‡æç¤ºæ‰¾åˆ°trapframeçš„åœ°å€ï¼Œåœ¨kernel/proc.hä¸­æ‰¾åˆ°a7å¯„å­˜å™¨å¯¹åº”çš„åç§»åœ°å€ã€‚ æŠŠ168æ¢ç®—æˆ16è¿›åˆ¶ å°è¯•ç€æ‰“å°0x87f560a8 è¿™ä¸ªå°±æ˜¯å¯„å­˜å™¨a7çš„å€¼ã€‚å…¶ä»£è¡¨çš„å…·ä½“å«ä¹‰é€šè¿‡æ‰€ç»™çš„æç¤ºåˆ°å¯¹åº”æ–‡ä»¶ä¸­æŸ¥æ‰¾ä¹‹åä¹Ÿæ˜¯ååˆ†çš„æ˜äº†ã€‚ åº”è¯¥å°±æ˜¯ç³»ç»Ÿçš„è°ƒç”¨å·ã€‚\nWhat was the previous mode that the CPU was in?\nsppä½è¡¨ç¤ºå…¶åœ¨ä»€ä¹ˆçŠ¶æ€ã€‚ é€šè¿‡å›¾ç¤ºå¾—å‡ºï¼Œsppåœ¨äºŒè¿›åˆ¶çš„ç¬¬8bit. ç”±å›¾å¯çŸ¥8bitæ˜¯0ï¼Œæ‰€ä»¥ä¹‹å‰æ˜¯ç”¨æˆ·çŠ¶æ€ ã€‚ System call tracing Attack xv6 è¿™ä¸ªtaskä¸»è¦æ˜¯åˆ©ç”¨xv6æ•…æ„ç•™ä¸‹çš„bugç„¶åè·å–åˆ°é”€æ¯å†…å­˜ä½†æ˜¯ä¿ç•™äº†è„é¡µçš„æ•°æ®ã€‚ç„¶åé€šè¿‡ä¸€äº›æ¯”è¾ƒhackçš„æ‰‹æ®µæŠŠå­—æ®µç»™æ‰¾å‡ºæ¥ã€‚\npageç»„æˆ ä¸Šå›¾æ˜¯ä¸€ä¸ªç®€åŒ–çš„é€»è¾‘é¡µè¡¨ï¼Œä¸‹ä¸€ä¸ªå®éªŒä¹Ÿä¼šç”¨åˆ°ï¼Œè¿™é‡Œç†é¡ºä¸€ä¸‹é€»è¾‘æœ‰åˆ©äºåˆ†æä»£ç çš„ç»„æˆã€‚ ä¸Šå›¾æ˜¯åœ°å€è½¬åŒ–çš„ç»†èŠ‚ã€‚ é¡µè¡¨é¡¹ï¼ˆPTEï¼‰åŒ…å«æ ‡å¿—ä½ï¼Œå‘Šè¯‰ç¡¬ä»¶åº”è¯¥å¦‚ä½•ä½¿ç”¨è¿™äº›è™šæ‹Ÿåœ°å€ã€‚ è¿™äº›ç›¸å…³ä½çš„å®šä¹‰éƒ½åœ¨(kernel/riscv.h)ä¸­\nä¹¦ä¸­è¿™ä¸€æ®µåŒ…å«çš„æœ€é‡è¦çš„ä¿¡æ¯æ˜¯xv6é‡‡ç”¨äº†sv39çš„riscvæ¶æ„ã€‚ è¿™ä¸ªå¾ˆå¥½çš„è§£é‡Šäº†sv39çš„ç»„æˆã€‚æ˜¾ç„¶sv39æ˜¯ä¸‰çº§é¡µè¡¨çš„æ¶æ„ã€‚\n","permalink":"https://jialog.top/posts/os/lab1-xv6--system-calls/","summary":"\u003ch2 id=\"using-gdb\"\u003eUsing gdb\u003c/h2\u003e\n\u003cp\u003eå¹³æ—¶æˆ‘ä»¬ç”¨çš„è°ƒè¯•å·¥å…·å…¶å®éƒ½æ˜¯å›¾å½¢åŒ–åçš„gdbï¼Œä½¿ç”¨èµ·æ¥éå¸¸çš„æ–¹ä¾¿ï¼Œä½†æ˜¯ç†Ÿæ‚‰åŸç”Ÿçš„gdbä¼šä½¿æˆ‘ä»¬çš„æ•ˆç‡è¿›ä¸€æ­¥æå‡ã€‚æˆ‘è®¤ä¸ºå­¦ä¹ å¥½ç”¨gdbè°ƒè¯•æ˜¯ä¸€é¡¹éå¸¸é‡è¦çš„æŠ€èƒ½ã€‚\u003c/p\u003e\n\u003ch3 id=\"ç¼–è¯‘å¹¶å¯åŠ¨\"\u003eç¼–è¯‘å¹¶å¯åŠ¨\u003c/h3\u003e\n\u003cp\u003e==make qemu-gdb==\u003c/p\u003e\n\u003cp\u003eä½¿ç”¨ä¸Šè¿°å‘½ä»¤\u003cstrong\u003eç¼–è¯‘é¡¹ç›®\u003c/strong\u003eå¹¶ä¸”ç›´æ¥ä»¥\u003cstrong\u003eè°ƒè¯•\u003c/strong\u003eæ¨¡å¼å¯åŠ¨ã€‚ä½†æ˜¯è¿™ä¸ªé¡¹ç›®å¯åŠ¨çš„å…¶å®æ˜¯åœ¨æœ¬åœ°çš„ä¸€ä¸ªè¿œç¨‹gdbï¼Œé€šè¿‡å¦ä¸€ä¸ªçª—å£è¿›è¡Œè°ƒè¯•ã€‚\n\u003cimg alt=\"PixPin_2025-02-25_13-54-10.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_13-54-10.png\"\u003e\u003c/p\u003e\n\u003cp\u003eä¸‹é¢æœ‰å‡ ä¸ªå…³äºç³»ç»Ÿè°ƒç”¨çš„å°é—®é¢˜\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eLooking at the backtrace output, which function calledÂ syscall?\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-02-25_16-13-11.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_16-13-11.png\"\u003e\n\u003cimg alt=\"PixPin_2025-02-25_16-19-46.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_16-19-46.png\"\u003e\næ˜¾ç„¶æ˜¯usertrapï¼ˆï¼‰\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eWhat is the value ofÂ p-\u0026gt;trapframe-\u0026gt;a7Â and what does that value represent? (Hint: lookÂ user/initcode.S, the first user program xv6 starts.)\u003c/strong\u003e\n\u003cimg alt=\"PixPin_2025-02-25_16-26-31.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_16-26-31.png\"\u003e\né€šè¿‡æç¤ºæ‰¾åˆ°trapframeçš„åœ°å€ï¼Œåœ¨kernel/proc.hä¸­æ‰¾åˆ°a7å¯„å­˜å™¨å¯¹åº”çš„åç§»åœ°å€ã€‚\n\u003cimg alt=\"PixPin_2025-02-25_16-28-03.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_16-28-03.png\"\u003e\næŠŠ168æ¢ç®—æˆ16è¿›åˆ¶\n\u003cimg alt=\"PixPin_2025-02-25_16-29-13.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_16-29-13.png\"\u003e\nå°è¯•ç€æ‰“å°\u003cstrong\u003e0x87f560a8\u003c/strong\u003e\n\u003cimg alt=\"PixPin_2025-02-25_16-30-11.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_16-30-11.png\"\u003e\nè¿™ä¸ªå°±æ˜¯å¯„å­˜å™¨a7çš„å€¼ã€‚å…¶ä»£è¡¨çš„å…·ä½“å«ä¹‰é€šè¿‡æ‰€ç»™çš„æç¤ºåˆ°å¯¹åº”æ–‡ä»¶ä¸­æŸ¥æ‰¾ä¹‹åä¹Ÿæ˜¯ååˆ†çš„æ˜äº†ã€‚\n\u003cimg alt=\"PixPin_2025-02-25_16-32-21.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_16-32-21.png\"\u003e\nåº”è¯¥å°±æ˜¯ç³»ç»Ÿçš„è°ƒç”¨å·ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eWhat was the previous mode that the CPU was in?\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-02-25_16-43-14.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_16-43-14.png\"\u003e\nsppä½è¡¨ç¤ºå…¶åœ¨ä»€ä¹ˆçŠ¶æ€ã€‚ é€šè¿‡å›¾ç¤ºå¾—å‡ºï¼Œsppåœ¨äºŒè¿›åˆ¶çš„ç¬¬8bit.\n\u003cimg alt=\"PixPin_2025-02-25_17-10-18.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_17-10-18.png\"\u003e\nç”±å›¾å¯çŸ¥8bitæ˜¯0ï¼Œæ‰€ä»¥ä¹‹å‰æ˜¯ç”¨æˆ·çŠ¶æ€ ã€‚\n\u003cimg alt=\"PixPin_2025-02-25_17-26-23.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_17-26-23.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-02-25_17-26-05.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-25_17-26-05.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"system-call-tracing\"\u003eSystem call tracing\u003c/h2\u003e\n\u003ch2 id=\"attack-xv6\"\u003eAttack xv6\u003c/h2\u003e\n\u003cp\u003eè¿™ä¸ªtaskä¸»è¦æ˜¯åˆ©ç”¨xv6æ•…æ„ç•™ä¸‹çš„bugç„¶åè·å–åˆ°é”€æ¯å†…å­˜ä½†æ˜¯ä¿ç•™äº†è„é¡µçš„æ•°æ®ã€‚ç„¶åé€šè¿‡ä¸€äº›æ¯”è¾ƒhackçš„æ‰‹æ®µæŠŠå­—æ®µç»™æ‰¾å‡ºæ¥ã€‚\u003c/p\u003e\n\u003ch3 id=\"pageç»„æˆ\"\u003epageç»„æˆ\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-02-28_20-58-24.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-28_20-58-24.png\"\u003e\nä¸Šå›¾æ˜¯ä¸€ä¸ªç®€åŒ–çš„é€»è¾‘é¡µè¡¨ï¼Œä¸‹ä¸€ä¸ªå®éªŒä¹Ÿä¼šç”¨åˆ°ï¼Œè¿™é‡Œç†é¡ºä¸€ä¸‹é€»è¾‘æœ‰åˆ©äºåˆ†æä»£ç çš„ç»„æˆã€‚\n\u003cimg alt=\"PixPin_2025-02-28_21-01-20.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-28_21-01-20.png\"\u003e\nä¸Šå›¾æ˜¯åœ°å€è½¬åŒ–çš„ç»†èŠ‚ã€‚\né¡µè¡¨é¡¹ï¼ˆPTEï¼‰åŒ…å«æ ‡å¿—ä½ï¼Œå‘Šè¯‰ç¡¬ä»¶åº”è¯¥å¦‚ä½•ä½¿ç”¨è¿™äº›è™šæ‹Ÿåœ°å€ã€‚\u003cimg alt=\"PixPin_2025-03-02_10-35-10.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-02_10-35-10.png\"\u003e\nè¿™äº›ç›¸å…³ä½çš„å®šä¹‰éƒ½åœ¨(kernel/riscv.h)ä¸­\u003c/p\u003e","title":"Lab1 Xv6 \u0026\u0026 system calls"},{"content":"å˜é‡çš„ç»‘å®šä¸è§£æ„ æ‰‹åŠ¨è®¾ç½®å¯å˜æ€§\nåœ¨rustè¯­è¨€ä¸­å¯ä»¥æ‰‹åŠ¨è®¾ç½®å˜é‡çš„å¯å˜æ€§ã€‚è¿™æ˜¯çµæ´»æ€§å’Œå®‰å…¨æ€§çš„ç»“åˆã€‚ä½†æ˜¯è¿™æ ·è‚¯å®šä¼šåœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­ä»˜å‡ºæ›´å¤šçš„æ€è€ƒï¼Œä½†è¿™ä¹Ÿæ˜¯æƒè¡¡ä¹‹ååšå‡ºçš„é€‰æ‹©ã€‚\nå˜é‡ç»‘å®š\nåœ¨rustè¯­è¨€ä¸­å˜é‡å’Œæ ‡è¯†ç¬¦ä¹‹é—´æ˜¯ä¸€ç§ç»‘å®šå…³ç³»ï¼Œç›´æ¥æ˜¯æ‰€æœ‰æƒçš„æ”¹å˜ã€‚ ç®€å•æ¥è¯´ä»»ä½•ä¸€å—æœ‰æ„ä¹‰çš„å†…å­˜éƒ½æœ‰æ‰€å±ï¼Œè€Œä¸”è¿™ä¸ªå…³ç³»æ˜¯å”¯ä¸€çš„ã€‚ è¿™æ ·å°±ä»¥ä¸ºè¿™å˜é‡å’Œå†…å­˜ä¹‹é—´åªèƒ½çœŸè¯šçš„è¿›è¡Œ1v1äº†ã€‚\nå˜é‡å¯å˜æ€§ rustè¯­è¨€çš„å˜é‡åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¯å˜çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡mutå…³é”®å­—è®©å˜é‡å˜ä¸ºå¯å˜çš„ã€‚ ä¸‹é¢æˆ‘ä»¬è¿›è¡Œç¼–ç è¿›è¡Œå®è·µæ“ä½œ\nfn main() { let x = 5; println!(\u0026#34;The value of x is: {}\u0026#34;, x); x = 6; println!(\u0026#34;The value of x is: {}\u0026#34;, x); } æˆ‘ä»¬å¯ä»¥é¢„æƒ³çš„åˆ°è¿™æ ·çš„ä»£ç ä¼šæŠ¥é”™ ç”±äºæˆ‘ä»¬å¯¹xå‘ç”Ÿäº†ä¸¤æ¬¡èµ‹å€¼ã€‚æˆ‘ä»¬éµå¾ªæŠ¥é”™ç»™å‡ºçš„å»ºè®®ï¼Œä½¿ç”¨mutå¯¹å˜é‡è¿›è¡Œä¿®é¥°ã€‚ è¿™æ ·ç”±äºæ˜¾ç¤ºçš„è§„å®šå˜é‡æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ï¼Œåœ¨å¤šçº¿ç¨‹çš„ç¼–ç¨‹è¿‡ç¨‹ä¸­èƒ½è®©æˆ‘ä»¬å°‘æ­»å¾ˆå¤šè„‘ç»†èƒï¼Œå¯¹ç¨‹åºå‘˜ä¹Ÿæ˜¯ä¸€ç§ä¿æŠ¤ã€‚\nlet mut x=5; println!(\u0026#34;the value of x is:{}\u0026#34;,x); x=6; println!(\u0026#34;the value of x is:{}\u0026#34;,x); è¿™æ¬¡éå¸¸çš„é¡ºåˆ©è¿è¡Œç»“æœæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚\nä½¿ç”¨ä¸‹åˆ’çº¿å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡ åœ¨æ—¥å¸¸ç¼–ç¨‹çš„è¿‡ç¨‹ä¸­ç»å¸¸ä¼šå‘å‡ºâ€œå˜é‡ä»æœªä½¿ç”¨â€çš„è­¦å‘Šï¼Œå¦‚æœæ­¤æ—¶ä½ æ­£åœ¨è®¾è®¡ä¸€ä¸ªé¡¹ç›®ï¼Œä½ å¯èƒ½ä¼šæ‹¥æœ‰å¾ˆå¤šçš„æœªä½¿ç”¨çš„å˜é‡ã€‚æ­¤æ—¶ä½ å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ä½œä¸ºå˜é‡çš„å¼€å¤´ï¼Œå±è”½è­¦å‘Šã€‚\nfn main() { let _x = 5; let y = 10; } è¿™æ ·çš„è¯å°±ä¸ä¼šå¯¹æœªä½¿ç”¨çš„å˜å½¢è¿›è¡Œè­¦å‘Šäº†ã€‚\nå˜é‡ç»“æ„ letÂ è¡¨è¾¾å¼ä¸ä»…ä»…ç”¨äºå˜é‡çš„ç»‘å®šï¼Œè¿˜èƒ½è¿›è¡Œå¤æ‚å˜é‡çš„è§£æ„ï¼šä»ä¸€ä¸ªç›¸å¯¹å¤æ‚çš„å˜é‡ä¸­ï¼ŒåŒ¹é…å‡ºè¯¥å˜é‡çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼š\nfn main() { let (a, mut b): (bool,bool) = (true, false); // a = true,ä¸å¯å˜; b = falseï¼Œå¯å˜ println!(\u0026#34;a = {:?}, b = {:?}\u0026#34;, a, b); b = true; assert_eq!(a, b); } å˜é‡ä¸å¸¸é‡ä¹‹é—´çš„å·®è· é¦–å…ˆæˆ‘ä»¬éœ€è¦æ˜ç¡®çš„è¯´ï¼šå¸¸é‡ä¸ä»…ä»…æ˜¯ä¸å¯æ”¹å˜çš„å˜é‡ã€‚\né¦–å…ˆå¸¸é‡ä¸èƒ½å¤Ÿä½¿ç”¨mutï¼Œè¿™ä¸€å…³é”®å­—å»æ”¹å˜ä»–çš„æ€§è´¨ã€‚å¸¸é‡ä¸ä»…é»˜è®¤ä¸å¯æ”¹å˜ï¼Œè€Œä¸”è‡ªå§‹è‡³ç»ˆéƒ½ä¸å¯æ”¹å˜ã€‚ å¸¸é‡ä½¿ç”¨constè€Œä¸æ˜¯letè¿›è¡Œæ ‡è¯†ã€‚å¹¶ä¸”å€¼çš„ç±»å‹å¿…é¡»è¿›è¡Œæ ‡æ³¨ã€‚ å¸¸é‡å¯ä»¥åœ¨ä»»æ„ä½œç”¨åŸŸå†…å£°æ˜ï¼Œè€Œä¸”ç”Ÿå‘½æœŸè´¯ç©¿æ•´ä¸ªè½¯ä»¶çš„æ‰§è¡ŒæœŸã€‚\nconst MAX_POINTS: u32 = 100_000; å˜é‡é®è”½ æˆ‘ä»¬å¯ä»¥è®¤ä¸ºåœ¨ä½œç”¨åŸŸå†…åŒåçš„å˜é‡åªèƒ½å­˜åœ¨ä¸€ä»½ï¼Œå¦‚æœæœ‰æ–°å£°æ˜çš„é‚£ä¹ˆä¹‹å‰çš„å°±ä¼šè¢«å†²æ‰ï¼Œå°±ä»¥æ–°å£°æ˜çš„ä¸ºå‡†ã€‚ä½†æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‘ç”Ÿèµ‹å€¼ç±»å‹çš„è½¬å˜ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¦ä¿è¯ä¸å‘ç”Ÿå†²çªã€‚\n","permalink":"https://jialog.top/posts/rust/%E5%8F%98%E9%87%8F/","summary":"\u003ch2 id=\"å˜é‡çš„ç»‘å®šä¸è§£æ„\"\u003eå˜é‡çš„ç»‘å®šä¸è§£æ„\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eæ‰‹åŠ¨è®¾ç½®å¯å˜æ€§\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eåœ¨rustè¯­è¨€ä¸­å¯ä»¥æ‰‹åŠ¨è®¾ç½®å˜é‡çš„å¯å˜æ€§ã€‚è¿™æ˜¯çµæ´»æ€§å’Œå®‰å…¨æ€§çš„ç»“åˆã€‚ä½†æ˜¯è¿™æ ·è‚¯å®šä¼šåœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­ä»˜å‡ºæ›´å¤šçš„æ€è€ƒï¼Œä½†è¿™ä¹Ÿæ˜¯\u003cstrong\u003eæƒè¡¡\u003c/strong\u003eä¹‹ååšå‡ºçš„é€‰æ‹©ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eå˜é‡ç»‘å®š\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eåœ¨rustè¯­è¨€ä¸­å˜é‡å’Œæ ‡è¯†ç¬¦ä¹‹é—´æ˜¯ä¸€ç§ç»‘å®šå…³ç³»ï¼Œç›´æ¥æ˜¯\u003cstrong\u003eæ‰€æœ‰æƒ\u003c/strong\u003eçš„æ”¹å˜ã€‚\nç®€å•æ¥è¯´ä»»ä½•ä¸€å—æœ‰æ„ä¹‰çš„å†…å­˜éƒ½æœ‰æ‰€å±ï¼Œè€Œä¸”è¿™ä¸ªå…³ç³»æ˜¯å”¯ä¸€çš„ã€‚\nè¿™æ ·å°±ä»¥ä¸ºè¿™å˜é‡å’Œå†…å­˜ä¹‹é—´åªèƒ½çœŸè¯šçš„è¿›è¡Œ1v1äº†ã€‚\u003c/p\u003e\n\u003ch2 id=\"å˜é‡å¯å˜æ€§\"\u003eå˜é‡å¯å˜æ€§\u003c/h2\u003e\n\u003cp\u003erustè¯­è¨€çš„å˜é‡åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯\u003cstrong\u003eä¸å¯å˜çš„\u003c/strong\u003eï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡\u003ccode\u003emut\u003c/code\u003eå…³é”®å­—è®©å˜é‡å˜ä¸ºå¯å˜çš„ã€‚\nä¸‹é¢æˆ‘ä»¬è¿›è¡Œç¼–ç è¿›è¡Œå®è·µæ“ä½œ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-rust\" data-lang=\"rust\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003efn\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e   \u003c/span\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e   \u003c/span\u003e\u003cspan class=\"fm\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;The value of x is: \u003c/span\u003e\u003cspan class=\"si\"\u003e{}\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e   \u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e   \u003c/span\u003e\u003cspan class=\"fm\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;The value of x is: \u003c/span\u003e\u003cspan class=\"si\"\u003e{}\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæˆ‘ä»¬å¯ä»¥é¢„æƒ³çš„åˆ°è¿™æ ·çš„ä»£ç ä¼šæŠ¥é”™\n\u003cimg alt=\"image.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240106215132.png\"\u003e\nç”±äºæˆ‘ä»¬å¯¹xå‘ç”Ÿäº†ä¸¤æ¬¡èµ‹å€¼ã€‚æˆ‘ä»¬éµå¾ªæŠ¥é”™ç»™å‡ºçš„å»ºè®®ï¼Œä½¿ç”¨\u003ccode\u003emut\u003c/code\u003eå¯¹å˜é‡è¿›è¡Œä¿®é¥°ã€‚\nè¿™æ ·ç”±äºæ˜¾ç¤ºçš„è§„å®šå˜é‡æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ï¼Œåœ¨å¤šçº¿ç¨‹çš„ç¼–ç¨‹è¿‡ç¨‹ä¸­èƒ½è®©æˆ‘ä»¬å°‘æ­»å¾ˆå¤šè„‘ç»†èƒï¼Œå¯¹ç¨‹åºå‘˜ä¹Ÿæ˜¯ä¸€ç§ä¿æŠ¤ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-rust\" data-lang=\"rust\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"k\"\u003emut\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003eÂ   \u003c/span\u003e\u003cspan class=\"fm\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;the value of x is:\u003c/span\u003e\u003cspan class=\"si\"\u003e{}\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003eÂ  Â \u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003eÂ  Â \u003c/span\u003e\u003cspan class=\"fm\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;the value of x is:\u003c/span\u003e\u003cspan class=\"si\"\u003e{}\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿™æ¬¡éå¸¸çš„é¡ºåˆ©è¿è¡Œç»“æœæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240106220106.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"ä½¿ç”¨ä¸‹åˆ’çº¿å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡\"\u003eä½¿ç”¨ä¸‹åˆ’çº¿å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡\u003c/h2\u003e\n\u003cp\u003eåœ¨æ—¥å¸¸ç¼–ç¨‹çš„è¿‡ç¨‹ä¸­ç»å¸¸ä¼šå‘å‡ºâ€œå˜é‡ä»æœªä½¿ç”¨â€çš„è­¦å‘Šï¼Œå¦‚æœæ­¤æ—¶ä½ æ­£åœ¨è®¾è®¡ä¸€ä¸ªé¡¹ç›®ï¼Œä½ å¯èƒ½ä¼šæ‹¥æœ‰å¾ˆå¤šçš„æœªä½¿ç”¨çš„å˜é‡ã€‚æ­¤æ—¶ä½ å¯ä»¥ä½¿ç”¨\u003cstrong\u003eä¸‹åˆ’çº¿ä½œä¸ºå˜é‡çš„å¼€å¤´ï¼Œå±è”½è­¦å‘Šã€‚\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-rust\" data-lang=\"rust\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003efn\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003e_x\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eè¿™æ ·çš„è¯å°±ä¸ä¼šå¯¹æœªä½¿ç”¨çš„å˜å½¢è¿›è¡Œè­¦å‘Šäº†ã€‚\u003c/p\u003e","title":"å˜é‡"},{"content":"æ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹ èƒŒæ™¯å›é¡¾ï¼šæœ‰å…³çŠ¶æ€æœºã€å¹¶å‘å’Œä¸­æ–­çš„è®¨è®ºç»™æˆ‘ä»¬çœŸæ­£ç†è§£æ“ä½œç³»ç»Ÿå¥ å®šäº†åŸºç¡€ï¼Œç°åœ¨æˆ‘ä»¬æ­£å¼è¿›å…¥æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„ â€œè¾¹ç•Œâ€ äº†ã€‚è®©æˆ‘ä»¬æŠŠè§†è§’å›åˆ°å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œå³ â€œæ‰§è¡Œè®¡ç®—æŒ‡ä»¤å’Œç³»ç»Ÿè°ƒç”¨æŒ‡ä»¤çš„çŠ¶æ€æœºâ€ï¼Œå¼€å§‹å¯¹æ“ä½œç³»ç»Ÿå’Œè¿›ç¨‹çš„è®¨è®ºã€‚\næœ¬è®²å†…å®¹ï¼šæ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹\næ“ä½œç³»ç»Ÿä¸Šçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ UNIX/Linux è¿›ç¨‹ç®¡ç† API: fork, execve, exit forkï¼ˆï¼‰ ç†è§£ fork(): fork() ä¼šå®Œæ•´å¤åˆ¶çŠ¶æ€æœºï¼›æ–°åˆ›å»ºçš„çŠ¶æ€æœºè¿”å›å€¼ä¸º 0ï¼Œæ‰§è¡Œ fork() çš„è¿›ç¨‹ä¼šè¿”å›å­è¿›ç¨‹çš„è¿›ç¨‹å·ã€‚åŒæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ã€‚ç¨‹åºçš„ç²¾ç¡®è¡Œä¸ºå¹¶ä¸æ˜¾ç„¶â€”â€”model checker å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£å®ƒã€‚\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¿˜å‘ç°æ‰§è¡ŒÂ ./a.outÂ æ‰“å°çš„è¡Œæ•°å’ŒÂ ./a.out | wc -lÂ å¾—åˆ°çš„è¡Œæ•°ä¸åŒã€‚æ ¹æ® â€œæœºå™¨æ°¸è¿œæ˜¯å¯¹çš„â€ çš„åŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æå‡ºå‡è®¾ (libc ç¼“å†²åŒºå½±å“) æ±‚è¯ã€å¯¹æ¯” strace ç³»ç»Ÿè°ƒç”¨åºåˆ—ç­‰æ–¹å¼ï¼Œæœ€ç»ˆç†è§£èƒŒåçš„åŸå› ã€‚æ ‡å‡†è¾“å…¥è¾“å‡ºçš„ç¼“å†²æ§åˆ¶å¯ä»¥é€šè¿‡ setbuf(3) å’Œ stdbuf(1) å®ç°ã€‚\nexecveï¼ˆï¼‰ exitï¼ˆï¼‰ ","permalink":"https://jialog.top/posts/os/%E8%99%9A%E6%8B%9F%E5%8C%96--%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86apifork-execve-exit/","summary":"\u003ch1 id=\"æ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹\"\u003eæ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eèƒŒæ™¯å›é¡¾\u003c/strong\u003eï¼šæœ‰å…³çŠ¶æ€æœºã€å¹¶å‘å’Œä¸­æ–­çš„è®¨è®ºç»™æˆ‘ä»¬çœŸæ­£ç†è§£æ“ä½œç³»ç»Ÿå¥ å®šäº†åŸºç¡€ï¼Œç°åœ¨æˆ‘ä»¬æ­£å¼è¿›å…¥æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„ â€œè¾¹ç•Œâ€ äº†ã€‚è®©æˆ‘ä»¬æŠŠè§†è§’å›åˆ°å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œå³ â€œæ‰§è¡Œè®¡ç®—æŒ‡ä»¤å’Œç³»ç»Ÿè°ƒç”¨æŒ‡ä»¤çš„çŠ¶æ€æœºâ€ï¼Œå¼€å§‹å¯¹æ“ä½œç³»ç»Ÿå’Œè¿›ç¨‹çš„è®¨è®ºã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eæœ¬è®²å†…å®¹\u003c/strong\u003eï¼šæ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ“ä½œç³»ç»Ÿä¸Šçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹\u003c/li\u003e\n\u003cli\u003eUNIX/Linux è¿›ç¨‹ç®¡ç† API: fork, execve, exit\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"fork\"\u003eforkï¼ˆï¼‰\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-02-03_14-37-19.png600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-03_14-37-19.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-02-03_14-51-04.png600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-03_14-51-04.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eç†è§£ fork()\u003c/strong\u003e: fork() ä¼šå®Œæ•´å¤åˆ¶çŠ¶æ€æœºï¼›æ–°åˆ›å»ºçš„çŠ¶æ€æœºè¿”å›å€¼ä¸º 0ï¼Œæ‰§è¡Œ fork() çš„è¿›ç¨‹ä¼šè¿”å›å­è¿›ç¨‹çš„è¿›ç¨‹å·ã€‚åŒæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ã€‚ç¨‹åºçš„ç²¾ç¡®è¡Œä¸ºå¹¶ä¸æ˜¾ç„¶â€”â€”model checker å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£å®ƒã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¿˜å‘ç°æ‰§è¡ŒÂ \u003ccode\u003e./a.out\u003c/code\u003eÂ æ‰“å°çš„è¡Œæ•°å’ŒÂ \u003ccode\u003e./a.out | wc -l\u003c/code\u003eÂ å¾—åˆ°çš„è¡Œæ•°ä¸åŒã€‚æ ¹æ® â€œæœºå™¨æ°¸è¿œæ˜¯å¯¹çš„â€ çš„åŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æå‡ºå‡è®¾ (libc ç¼“å†²åŒºå½±å“) æ±‚è¯ã€å¯¹æ¯” strace ç³»ç»Ÿè°ƒç”¨åºåˆ—ç­‰æ–¹å¼ï¼Œæœ€ç»ˆç†è§£èƒŒåçš„åŸå› ã€‚æ ‡å‡†è¾“å…¥è¾“å‡ºçš„ç¼“å†²æ§åˆ¶å¯ä»¥é€šè¿‡ setbuf(3) å’Œ stdbuf(1) å®ç°ã€‚\u003c/p\u003e\n\u003ch2 id=\"execve\"\u003eexecveï¼ˆï¼‰\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-02-03_14-54-18.png|525\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-03_14-54-18.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-02-03_14-55-00.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-02-03_14-55-00.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"exit\"\u003eexitï¼ˆï¼‰\u003c/h2\u003e","title":"è™šæ‹ŸåŒ–--è¿›ç¨‹ç®¡ç†APIï¼šfork, execve, exit"},{"content":"xv6 å¯åŠ¨ï¼ ä¸‡äº‹å¼€å¤´éš¾ï¼ è¿™æ˜¯æˆ‘æ‰€ç”¨çš„å¼€å‘ç¯å¢ƒï¼ŒKubuntu+VsCodeï¼Œè¿™æ ·çš„ç¯å¢ƒå¯¹æˆ‘æ¥è¯´æ˜¯æ¯”è¾ƒèˆ’æœçš„ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒå¥½ç”¨çš„åœ¨å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­æˆ‘æ²¡æ„Ÿè§‰ubuntuå’Œkubuntuæœ‰ä»»ä½•çš„åŒºåˆ«ï¼Œåæ­£æˆ‘ä¹Ÿä¸åœ¨ä¹æ¡Œé¢ï¼Œæˆ‘åªåœ¨ç»ˆç«¯é‡Œç”¨ã€‚ ç”¨debianç³»çš„æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯è½¯ä»¶ç”Ÿæ€çœŸçš„å¾ˆä¸é”™ï¼Œå¯åˆ«æ˜¯æœ€æ–°çš„ï¼Œç‰ˆæœ¬ä»€ä¹ˆçš„ç›´æ¥ç”¨aptéƒ½èƒ½ç›´æ¥è·å¾—ï¼Œè™½ç„¶ä¸æƒ³archwikié‚£æ ·å®Œå–„ï¼Œä½†æ˜¯Googleä¸€ä¸‹åŸºæœ¬ä¸Šé—®é¢˜ä¹Ÿéƒ½èƒ½è§£å†³ã€‚\nä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å·¥å…· bear æˆ‘ç›¸ä¿¡æœ‰å¾ˆå¤šåŒå­¦åœ¨ç”¨vscodeçœ‹é¡¹ç›®ä»£ç çš„æ—¶å€™ä¼šå‘ç°ï¼Œå…¨æ˜¯çº¢çº¿ï¼Œé¡¹ç›®å˜å¾—æ ¹æœ¬å°±ä¸å¯è¯»ï¼Œæ— æ³•è·³è½¬ï¼Œæ›´æ— æ³•è·å¾—ä¾èµ–å…³ç³»ï¼Œåªèƒ½æŠŠvscodeå½“ä¸€ä¸ªèƒ½ç”¨é¼ æ ‡çš„é˜‰å‰²ç‰ˆçš„vimç”¨ã€‚æˆ‘ä»¬å¯ä»¥è·å–ç¼–è¯‘çš„å‘½ä»¤è¡Œï¼Œç„¶åè®©vscodeçŸ¥é“ç„¶åæŠŠè¿™äº›æŠ¥é”™ç»™æ¶ˆæ‰ 1.make -nB å½“ç„¶å¯ä»¥æ‰‹åŠ¨è·å–ç¼–è¯‘é€‰é¡¹ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿæ˜¯æ¯”è¾ƒå¤æ‚çš„è€Œä¸”ååˆ†çš„ä½æ•ˆ 2.bear å–„äºä½¿ç”¨å·¥å…·ï¼Œå›å­æ€§éå¼‚ä¹Ÿï¼Œå–„å‡äºç‰©ä¹Ÿã€‚ç”¨bearæŠŠç¼–è¯‘è¿‡ç¨‹åŒ…èµ·æ¥å°±èƒ½è‡ªåŠ¨è·å–ç¼–è¯‘é€‰é¡¹ã€‚\nå¦‚ä½•åœ¨vscodeä¸­debug ==å®˜æ–¹éGUIç•Œé¢==\nmake qemu-gdb ä¹‹åç³»ç»Ÿä¼šåœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªgdbï¼Œå¦èµ·ä¸€ä¸ªç»ˆç«¯ä½¿ç”¨gdbè¿æ¥ã€‚ åˆ°è¿™å°±è¯´æ˜gdbå¯åŠ¨æˆåŠŸäº†ï¼Œä½†æ˜¯åé¢ä¼šæœ‰ä¸€ä¸ªå°å°çš„å‘ã€‚\nType \u0026ldquo;apropos word\u0026rdquo; to search for commands related to \u0026ldquo;word\u0026rdquo;. warning: File \u0026ldquo;/home/learn_code/xv6-labs-2024/.gdbinit\u0026rdquo; auto-loading has been declined by your `auto-load safe-path\u0026rsquo; set to \u0026ldquo;$debugdir:$datadir/auto-load:/home/learn_code/xv6-riscv/.gdbinit\u0026rdquo;. To enable execution of this file add add-auto-load-safe-path /home/learn_code/xv6-labs-2024/.gdbinit line to your configuration file \u0026ldquo;/root/.config/gdb/gdbinit\u0026rdquo;. To completely disable this security protection add set auto-load safe-path / line to your configuration file \u0026ldquo;/root/.config/gdb/gdbinit\u0026rdquo;.\nå½“ä½ å¯åŠ¨gdbçš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°ä»¥ä¸Šé”™è¯¯ è¿™ä¸ªæŒ‰ç…§ä¸Šé¢è¯´æ˜çš„è·¯å¾„æ·»åŠ ä¸€ä¸ªæ–‡ä»¶å³å¯ å¦‚æœä½¿ç”¨gdbä¼šæœ‰å¦‚ä¸ŠæŠ¥é”™ã€‚ å› ä¸ºxv6çš„æ¶æ„æ˜¯risc-vçš„æ‰€ä»¥è¦æ˜¯ç”¨è¿™ä¸ªæ”¯æŒå¤šæ¶æ„çš„gdbæˆåŠŸå¯åŠ¨ã€‚\n==é…ç½®vscodeä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢==\nlanch.json\n{ \u0026#34;version\u0026#34;: \u0026#34;0.2.0\u0026#34;, \u0026#34;configurations\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;xv6debug\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;cppdbg\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;launch\u0026#34;, \u0026#34;program\u0026#34;: \u0026#34;${workspaceFolder}/kernel/kernel\u0026#34;, \u0026#34;stopAtEntry\u0026#34;: true, \u0026#34;cwd\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34;, \u0026#34;miDebuggerServerAddress\u0026#34;: \u0026#34;127.0.0.1:25000\u0026#34;, //è§.gdbinit ä¸­ target remote xxxx:xx ä¸€å®šè¦ä¸€ ä¸€å¯¹åº” \u0026#34;miDebuggerPath\u0026#34;: \u0026#34;/usr/bin/gdb-multiarch\u0026#34;, // which gdb-multiarch \u0026#34;MIMode\u0026#34;: \u0026#34;gdb\u0026#34;, \u0026#34;preLaunchTask\u0026#34;: \u0026#34;xv6build\u0026#34; } ] } task.json\n// xv6-riscv/.vscode/tasks.json { \u0026#34;version\u0026#34;: \u0026#34;2.0.0\u0026#34;, \u0026#34;tasks\u0026#34;: [ { \u0026#34;label\u0026#34;: \u0026#34;xv6build\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;isBackground\u0026#34;: true, \u0026#34;command\u0026#34;: \u0026#34;make qemu-gdb\u0026#34;, \u0026#34;problemMatcher\u0026#34;: [ { \u0026#34;pattern\u0026#34;: [ { \u0026#34;regexp\u0026#34;: \u0026#34;.\u0026#34;, \u0026#34;file\u0026#34;: 1, \u0026#34;location\u0026#34;: 2, \u0026#34;message\u0026#34;: 3 } ], \u0026#34;background\u0026#34;: { \u0026#34;beginsPattern\u0026#34;: \u0026#34;.*Now run \u0026#39;gdb\u0026#39; in another window.\u0026#34;, // è¦å¯¹åº”ç¼–è¯‘æˆåŠŸå,ä¸€å¥echoçš„å†…å®¹. æ­¤å¤„å¯¹åº” Makefile Line:170 \u0026#34;endsPattern\u0026#34;: \u0026#34;.\u0026#34; } } ] } ] } set confirm off set architecture riscv:rv64 @REM target remote 127.0.0.1:25000 symbol-file kernel/kernel set disassemble-next-line auto set riscv use-compressed-breakpoints yes è¦å°†gitinité‡Œé¢çš„ç«¯å£æ³¨é‡Šæ‰ä¸ç„¶ä¼šå‘ç”Ÿå†²çªã€‚ ç„¶åç›´æ¥f5å°±å¯ä»¥è°ƒè¯•äº†ã€‚\n","permalink":"https://jialog.top/posts/os/xv6%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A3%E7%A0%81%E5%AF%BC%E8%AF%BB/","summary":"\u003ch2 id=\"xv6-å¯åŠ¨\"\u003exv6 å¯åŠ¨ï¼\u003c/h2\u003e\n\u003cp\u003eä¸‡äº‹å¼€å¤´éš¾ï¼\n\u003cimg alt=\"PixPin_2024-12-27_21-38-12.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2024-12-27_21-38-12.png\"\u003e\nè¿™æ˜¯æˆ‘æ‰€ç”¨çš„å¼€å‘ç¯å¢ƒï¼ŒKubuntu+VsCodeï¼Œè¿™æ ·çš„ç¯å¢ƒå¯¹æˆ‘æ¥è¯´æ˜¯æ¯”è¾ƒèˆ’æœçš„ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒå¥½ç”¨çš„åœ¨å®é™…ä½¿ç”¨çš„è¿‡ç¨‹ä¸­æˆ‘æ²¡æ„Ÿè§‰ubuntuå’Œkubuntuæœ‰ä»»ä½•çš„åŒºåˆ«ï¼Œåæ­£æˆ‘ä¹Ÿä¸åœ¨ä¹æ¡Œé¢ï¼Œæˆ‘åªåœ¨ç»ˆç«¯é‡Œç”¨ã€‚\nç”¨debianç³»çš„æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯è½¯ä»¶ç”Ÿæ€çœŸçš„å¾ˆä¸é”™ï¼Œå¯åˆ«æ˜¯æœ€æ–°çš„ï¼Œç‰ˆæœ¬ä»€ä¹ˆçš„ç›´æ¥ç”¨aptéƒ½èƒ½ç›´æ¥è·å¾—ï¼Œè™½ç„¶ä¸æƒ³archwikié‚£æ ·å®Œå–„ï¼Œä½†æ˜¯Googleä¸€ä¸‹åŸºæœ¬ä¸Šé—®é¢˜ä¹Ÿéƒ½èƒ½è§£å†³ã€‚\u003c/p\u003e\n\u003ch3 id=\"ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å·¥å…·-bear\"\u003eä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„å·¥å…· bear\u003c/h3\u003e\n\u003cp\u003eæˆ‘ç›¸ä¿¡æœ‰å¾ˆå¤šåŒå­¦åœ¨ç”¨vscodeçœ‹é¡¹ç›®ä»£ç çš„æ—¶å€™ä¼šå‘ç°ï¼Œå…¨æ˜¯çº¢çº¿ï¼Œé¡¹ç›®å˜å¾—æ ¹æœ¬å°±ä¸å¯è¯»ï¼Œæ— æ³•è·³è½¬ï¼Œæ›´æ— æ³•è·å¾—ä¾èµ–å…³ç³»ï¼Œåªèƒ½æŠŠvscodeå½“ä¸€ä¸ªèƒ½ç”¨é¼ æ ‡çš„é˜‰å‰²ç‰ˆçš„vimç”¨ã€‚æˆ‘ä»¬å¯ä»¥è·å–ç¼–è¯‘çš„å‘½ä»¤è¡Œï¼Œç„¶åè®©vscodeçŸ¥é“ç„¶åæŠŠè¿™äº›æŠ¥é”™ç»™æ¶ˆæ‰\n\u003cstrong\u003e1.make -nB\u003c/strong\u003e\nå½“ç„¶å¯ä»¥æ‰‹åŠ¨è·å–ç¼–è¯‘é€‰é¡¹ï¼Œä½†æ˜¯è¿™æ ·ä¹Ÿæ˜¯æ¯”è¾ƒå¤æ‚çš„è€Œä¸”ååˆ†çš„ä½æ•ˆ\n\u003cstrong\u003e2.bear\u003c/strong\u003e\nå–„äºä½¿ç”¨å·¥å…·ï¼Œå›å­æ€§éå¼‚ä¹Ÿï¼Œå–„å‡äºç‰©ä¹Ÿã€‚ç”¨bearæŠŠç¼–è¯‘è¿‡ç¨‹åŒ…èµ·æ¥å°±èƒ½è‡ªåŠ¨è·å–ç¼–è¯‘é€‰é¡¹ã€‚\u003c/p\u003e\n\u003ch3 id=\"å¦‚ä½•åœ¨vscodeä¸­debug\"\u003eå¦‚ä½•åœ¨vscodeä¸­debug\u003c/h3\u003e\n\u003cp\u003e==å®˜æ–¹éGUIç•Œé¢==\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003emake\u003c/span\u003e \u003cspan class=\"n\"\u003eqemu\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003egdb\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¹‹åç³»ç»Ÿä¼šåœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªgdbï¼Œå¦èµ·ä¸€ä¸ªç»ˆç«¯ä½¿ç”¨gdbè¿æ¥ã€‚\n\u003cimg alt=\"PixPin_2025-01-04_16-46-16.png600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-01-04_16-46-16.png\"\u003e\nåˆ°è¿™å°±è¯´æ˜gdbå¯åŠ¨æˆåŠŸäº†ï¼Œä½†æ˜¯åé¢ä¼šæœ‰ä¸€ä¸ªå°å°çš„å‘ã€‚\u003c/p\u003e\n\u003cp\u003eType \u0026ldquo;apropos word\u0026rdquo; to search for commands related to \u0026ldquo;word\u0026rdquo;. warning: File \u0026ldquo;/home/learn_code/xv6-labs-2024/.gdbinit\u0026rdquo; auto-loading has been declined by your `auto-load safe-path\u0026rsquo; set to \u0026ldquo;$debugdir:$datadir/auto-load:/home/learn_code/xv6-riscv/.gdbinit\u0026rdquo;. To enable execution of this file add add-auto-load-safe-path /home/learn_code/xv6-labs-2024/.gdbinit line to your configuration file \u0026ldquo;/root/.config/gdb/gdbinit\u0026rdquo;. To completely disable this security protection add set auto-load safe-path / line to your configuration file \u0026ldquo;/root/.config/gdb/gdbinit\u0026rdquo;.\u003c/p\u003e","title":"xv6-ç¯å¢ƒæ­å»º"},{"content":"å…ˆéšä¾¿å†™å‡ ä¸ªè¦ç‚¹ï¼Œç­‰æ•´ä¸ªç»“æŸäº†å†è¯¦ç»†å†™ã€‚\nåŠ¨æ‰‹ä¹‹å‰å…ˆè®¡åˆ’ï¼Œè¯¦ç»†å‘¨åˆ°è€ƒè™‘ å¤šåŠ¨æ‰‹ï¼Œå¤šè¯•é”™ å¤šè¯»æºä»£ç ï¼Œå¤šç»ƒä¹ debug è‹±è¯­å¥½å¥½å­¦ï¼Œè‹±è¯­å¤ªé‡è¦äº†ã€‚ ","permalink":"https://jialog.top/posts/database/note/cmu15-445%E6%80%BB%E7%BB%93/","summary":"\u003cp\u003eå…ˆéšä¾¿å†™å‡ ä¸ªè¦ç‚¹ï¼Œç­‰æ•´ä¸ªç»“æŸäº†å†è¯¦ç»†å†™ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåŠ¨æ‰‹ä¹‹å‰å…ˆè®¡åˆ’ï¼Œè¯¦ç»†å‘¨åˆ°è€ƒè™‘\u003c/li\u003e\n\u003cli\u003eå¤šåŠ¨æ‰‹ï¼Œå¤šè¯•é”™\u003c/li\u003e\n\u003cli\u003eå¤šè¯»æºä»£ç ï¼Œå¤šç»ƒä¹ debug\u003c/li\u003e\n\u003cli\u003eè‹±è¯­å¥½å¥½å­¦ï¼Œè‹±è¯­å¤ªé‡è¦äº†ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg alt=\"Clip_2024-06-30_15-13-04.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/Clip_2024-06-30_15-13-04.png\"\u003e\u003c/p\u003e","title":"CMU15-445æ€»ç»“"},{"content":"å†™åœ¨å‰é¢ åœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å…ˆæŠ›å¼€SQLåœ¨bustubçš„ä¸­çš„å†ç¨‹ï¼Œç›´æ¥å¿«è¿›åˆ°æœ€åå¼€å§‹æ‰§è¡Œçš„é˜¶æ®µï¼Œè¿™ç¯‡æ–‡ç« åªå…³æ³¨è®¾è®¡ä¸Šçš„ç»†èŠ‚ã€‚\nè‡³äºå¦‚ä½•ç†é¡ºè¿™äº›ç»†èŠ‚åœ¨[[CMU15-445 Project3 - Query Execution]]æ–‡ç« ä¸­ä¼šæœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚ğŸ˜ƒ\næ¶æ„æ€»è§ˆ ä¸Šå›¾ä¸­catalogå…¶å®ä¸æ˜¯ç‰¹åˆ«å‡†ç¡®ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£åº”è¯¥æ˜¯ä¸‹é¢è¿™ç§æƒ…å†µğŸ‘‡ã€‚é€šè¿‡ä¸€ä¸ªtable_idåŒå‘æ˜ å°„è¡¨çš„åå­—å’Œå®ä½“tableã€‚ æ¥ä¸‹æ¥å°±æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡ä»‹ç»å„ä¸ªéƒ¨åˆ†çš„ç»“æ„ã€‚\nCatalog ä¸‹é¢è¿™ä¸ªå›¾æ˜¯æ˜¯æ•´ä¸ªcatalogå…³äºtableçš„ã€‚ğŸ‘‡è¿™é‡Œå¼•å‡ºäº†TableInfo. Catalogä¸­ä¸ä»…ä»…åŒ…å«tableçš„ä¿¡æ¯è¿˜å‚¨å­˜äº†indexçš„ä¿¡æ¯ã€‚è¿™é‡Œå¼•å‡ºäº†IndexInfo,ä½†æ˜¯åè¾¹ç”¨çš„ä¸æ˜¯å¾ˆå¤šã€‚ æ¥ä¸‹æ¥çœ‹TableInfoçš„ç»„æˆã€‚ï¼ˆTableInfoçš„å®šä¹‰å°±åœ¨Catalog.hæ–‡ä»¶ä¸­ï¼‰\nTableInfo name_:å°±æ˜¯è¡¨çš„åå­— table_: æ˜¯ä¸€ä¸ªæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯tablepageçš„åŒå‘é“¾è¡¨ oid_: é¡¾åæ€ä¹‰å°±æ˜¯è¡¨çš„id Schema_ï¼šå…¶å®åˆ°ç°åœ¨æˆ‘éƒ½æ²¡æœ‰å¾ˆå¼„æ‡‚è¿™ä¸ªæ˜¯å¹²ä»€ä¹ˆçš„ä¸œè¥¿ï¼Œä½†æ˜¯chatç»™å‡ºäº†ç­”æ¡ˆã€‚ ä»€ä¹ˆæ˜¯Schema æŒ‰ç…§æˆ‘çš„ç†è§£åº”è¯¥æ˜¯ä¸€ä¸ªç±»ä¼¼äºè¡¨å¤´çš„åŒ…å«å„ç§é…ç½®ä¿¡æ¯çš„ä¸€ä¸ªæŠ½è±¡é›†åˆã€‚ç°åœ¨å°±çœ‹çœ‹æºç ã€‚ğŸ‘‡ åœ¨bustubä¸­schemaçš„ä¿¡æ¯ä¼¼ä¹æ²¡æœ‰åŒ…å«å¾ˆå¤šï¼Œå°±æ˜¯å¯¹æ¯ä¸€ä¸ªåˆ—çš„æ•°æ®ç±»å‹çº¦æŸè¿›è¡Œäº†è®°å½•ã€‚ä»¥åŠå¯¹æ‰€æœ‰çš„åˆ—è¿›è¡Œä¸€ä¸ªæ±‡æ€»ï¼Œæ–¹ä¾¿è·å–åˆ°æ¯ä¸€ä¸ªåˆ—ã€‚ ==Column==\nå®é™…ä¸Šæ¯ä¸ªåˆ—çš„å®ç°å®ä½“æ˜¯Columnï¼Œåœ¨è¿™ä¸ªå®ä½“ä¸­åŒ…å«åˆ—åï¼Œæ•°æ®ç±»å‹ï¼Œé•¿åº¦ç­‰åŸºæœ¬ä¿¡æ¯ã€‚ âš ï¸å€¼å¾—æ³¨æ„çš„æ˜¯columnå¯¹äºvarcharå•ç‹¬åšäº†å¤„ç†ğŸ™‚,å˜é•¿æ•°ç»„ç»ˆç©¶è¿˜æ˜¯ä¸ä¸€æ ·å•Šã€‚ TableHeap å®è´¨ä¸Šå°±æ˜¯é…åˆTablePageé‡Œé¢çš„ä¿¡æ¯æ„æˆçš„åŒå‘é“¾è¡¨ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªè®¾è®¡çœŸçš„éå¸¸çš„å·§å¦™ã€‚åªç”¨äº†åŸºæœ¬çš„pre_page_id å’Œnext_page_idè¿™ä¸¤ä¸ªå˜é‡å°±æŠŠåŒå‘é“¾è¡¨ç»™å»ºç«‹èµ·æ¥è€Œä¸”è€¦åˆåº¦éå¸¸çš„ä½ã€‚\nfirst_page_id_: å°±æ˜¯ç¬¬ä¸€ä¸ªpageid bufferpoolï¼šæ‰€æœ‰çš„pageéƒ½éœ€è¦ä»bufferpoolä¸­å»å–ã€‚ TablePageçš„ç»“æ„ okçœ‹åˆ°è¿™é‡Œæœ‰ç–‘é—®äº†ï¼Ÿ é‚£ä¹ˆå¤šçš„ä¿¡æ¯éƒ½å­˜åœ¨é‚£é‡Œï¼Œ è¿™ç»§æ‰¿çš„åŠ ä¸Šåˆå§‹åŒ–çš„ä¹Ÿä¸å¤Ÿå•Šã€‚ ç­”æ¡ˆåœ¨è¿™é‡ŒğŸ‘‡ é€šè¿‡åç§»é‡ç›´æ¥åœ¨pageçš„å‰©ä½™ç©ºé—´é‡Œå»å®šä¹‰å„ç§å˜é‡ã€‚\n==é€šè¿‡InsertTupleï¼ˆï¼‰å‡½æ•°äº†è§£è¯¦ç»†ç»“æ„==\nç›´æ¥çœ‹æºä»£ç ï¼š\nif (tuple.size_ + 32 \u0026gt; BUSTUB_PAGE_SIZE) { // larger than one page size txn-\u0026gt;SetState(TransactionState::ABORTED); return false; } auto cur_page = static_cast\u0026lt;TablePage *\u0026gt;(buffer_pool_manager_-\u0026gt;FetchPage(first_page_id_)); if (cur_page == nullptr) { txn-\u0026gt;SetState(TransactionState::ABORTED); return false; } è¿™ä¸»è¦æ˜¯åˆ¤æ–­ä¸€äº›å‰ç½®æ¡ä»¶çš„åˆæ³•æ€§ ä¸ºä»€ä¹ˆè¦ç”¨tupleçš„å¤§å°+32è¿›è¡Œæ¯”è¾ƒå‘¢ï¼Ÿ æ–‡æœ«ç»™å‡ºç­”æ¡ˆ\nåœ¨ç¬¬ä¸€é¡µä¸­è¿›è¡Œæ’å…¥ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å°±å¼€ä¸€ä¸ªæ–°é¡µç„¶åæ’è¿›å» âš ï¸éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç¦»å¼€ç¬¬ä¸€é¡µçš„æ—¶å€™ä»ç„¶è¦æŒæœ‰å†™é”ï¼Œå› ä¸ºè¿˜è¦å†™next_page_idå˜é‡. ğŸ’¡è·Ÿéšä»£ç è·³è½¬åˆ°TablePage::InserTuple().\nauto TablePage::InsertTuple(const Tuple \u0026amp;tuple, RID * rid, Transaction * txn, LockManager * lock_manager,LogManager * log_manager) -\u0026gt; bool{} ğŸ‘†æ˜¯å‡½æ•°çš„å®šä¹‰ã€‚\nå¼€å§‹ä¸»è¦è¿˜æ˜¯åˆ¤æ–­ç©ºé—´æ˜¯å¦å¤Ÿï¼Œä¸å¤Ÿçš„è¯ç›´æ¥è¿”å›æ’å…¥å¤±è´¥ã€‚ å‰©ä¸‹çš„æƒ…å†µå°±æ˜¯ç©ºé—´è¶³å¤Ÿå¯ä»¥è¿›è¡Œæ’å…¥æ“ä½œç„¶åè¿”å›æˆåŠŸã€‚ ç„¶åå°±æ˜¯å¯¹å†…éƒ¨çš„ä¸€ä¸ªå˜é‡çš„æ”¹å˜ã€‚ä¸»è¦æ˜¯æ•°é‡çš„æ”¹å˜å’ŒæŒ‡é’ˆæŒ‡å‘çš„æ”¹å˜ æ•°é‡è‡ªç„¶æ˜¯åŠ ä¸€ï¼ŒæŒ‡å‘ç©ºä½ç½®çš„æŒ‡é’ˆä¹Ÿè¦å¾€å›èµ°è¿™ä¸ªtuple.size()çš„å¤§å°ã€‚ ğŸ’¡è¿”å›å¤±è´¥ä¹‹åé‚£è‡ªç„¶å°±è¦æ‰¾ä¸‹ä¸€ä¸ªpageï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸¤ç§æƒ…å†µã€‚\nä¸‹ä¸€ä¸ªæœ‰pageé‚£å°±ç›´æ¥å–ç„¶åæ’å…¥ ä¸‹ä¸€ä¸ªæ²¡pageé‚£å°±newä¸€ä¸ªpageç„¶ååˆå§‹åŒ– çœ‹åˆ°è¿™å…¶å®æ•´ä¸ªbustubçš„æ¶æ„å·²ç»å·®ä¸å¤šæ¸…æ™°äº†\nTuples æ¯ä¸€æ¬¡æ’å…¥çš„æœ€å°å•å…ƒtupleåˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿ\nè¿™ä¸ªå¯ä»¥ç®€å•çš„ç†è§£ä¸ºè¡¨ä¸­çš„ä¸€è¡Œã€‚ ğŸ‘‡æ˜¯tupleåˆå§‹åŒ–çš„è¿‡ç¨‹ï¼Œ ğŸ’¡ ==RID== ç”±ä¸€ä¸ªslot_num_å’Œpage_id_ç»„æˆã€‚ç›¸å½“äºä¸€ä¸ªåæ ‡ï¼Œå¿«é€Ÿå®šä½åœ¨pageä¸­çš„ä½ç½®ã€‚ ç›®å‰å°±è¿™ä¹ˆå¤šï¼Œå‰©ä¸‹çš„ç»†èŠ‚ç­‰å¾…ä»¥åå†è¡¥å……å§ã€‚\nå¤æ‚ç®—å­çš„ç»“æ„ task1ä¸­åŸºæœ¬ä¸Šæ‰€æœ‰çš„ç®—å­å®ç°éƒ½å·²ç»ç»™å‡ºäº†ï¼Œè€Œä¸”æ•´ä½“ç»“æ„ä¹Ÿéƒ½æ¯”è¾ƒç®€å•ç›´ç™½ã€‚ æ¥ä¸‹æ¥ä¸»è¦æ¢³ç†ä¸€ä¸‹task2çš„ç®—å­ç»“æ„ï¼ŒğŸ™ƒã€‚\nä¸è®°å½•ä¸€ä¸‹æ„Ÿè§‰æºç ç›´æ¥ä»å¤§è„‘æºœèµ°äº†ï¼Œä¸€ç‚¹ä¹Ÿè®°ä¸ä½ã€‚\nAggregation \u0026amp; Join Executors Aggregation è¿™ä¸ªç®—å­ç›¸å¯¹æ¥è¯´å°±æ˜¯æ¯”è¾ƒå¤æ‚çš„ä¸€ä¸ªä¸œè¥¿äº†ï¼Œæˆ‘ç°åœ¨å…¶å®è¿˜ä¸æ˜¯å¾ˆæ˜ç™½è¿™åˆ°åº•æ˜¯æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚ è¿™ä¸ªç®—å­çš„ä¸€ä¸ªç‰¹åˆ«ä¹‹å¤„å°±æ˜¯ï¼šAggregation æ˜¯ pipeline breakerã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒAggregation ç®—å­ä¼šæ‰“ç ´ iteration model çš„è§„åˆ™ã€‚åŸå› æ˜¯ï¼Œåœ¨ Aggregation çš„Â Init()Â å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°±è¦å°†æ‰€æœ‰ç»“æœå…¨éƒ¨è®¡ç®—å‡ºæ¥ã€‚åŸå› å¾ˆç®€å•ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ¡ sqlï¼š\nSELECT t.x, max(t.y) FROM t GROUP BY t.x; SimpleAggregationHashTable,åœ¨è¿™ä¸ªhashè¡¨ä¸­ç»´æŠ¤çš„keyå’Œvalueåˆ†åˆ«æ˜¯AggregateKey,AggregaValue. å…¶å®åˆ°è¿™é‡Œå°±å·²ç»èƒ½å¤§è‡´çŒœåˆ°è¿™ä¸¤ä¸ªç±»å‹æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚ä½†æ˜¯ä¸ºäº†ä¸€æ¢ç©¶ç«Ÿæˆ‘ä»¬è¿˜æ˜¯çœ‹åˆ°åº•ã€‚\n==AggregaKey==\nä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸¤ä¸ªä¿¡æ¯ï¼Œ\nç±»å‹æ˜¯std::vector\u0026lt;Value\u0026gt; çœ‹æ³¨é‡Šçš„çš„è¯è¿™ä¸ªå­—æ®µå°±æ˜¯group byçš„å­—æ®µã€‚ ==AggregaValue==\nå¾—åˆ°çš„ä¿¡æ¯å’Œä¸Šé¢çš„ç±»ä¼¼\nç±»å‹æ˜¯std::vector\u0026lt;Value\u0026gt; è¿™ä¸ªå­—æ®µæ˜¯ value åˆ™æ˜¯éœ€è¦ aggregate çš„å­—æ®µçš„æ•°ç»„ã€‚ InsertCombine()\nä¸Šè¾¹çš„CombinAggregateValues()æ˜¯éœ€è¦è‡ªå·±è¿›è¡Œå®ç°çš„ã€‚ä½†æ˜¯æ ¹æ®ç•™å‡ºæ¥çš„ç©ºå¤§è‡´ä¹Ÿèƒ½çŒœå‡ºæ¥æ˜¯æ ¹æ®ä¸åŒçš„èšåˆç±»å‹æŠŠæ–°æ’å…¥çš„æ•°æ®æŒ‰ç…§ç»™å®šçš„è§„åˆ™è¿›è¡Œæ›´æ–°. InsertCombin():å¦‚æœåŸæ¥çš„hashè¡¨ä¸­æ²¡æœ‰ç»™å®šçš„è§„åˆ™ï¼Œé‚£å°±åˆ›å»ºä¸€ä¸ªæ–°çš„è®°å½•ã€‚å¦‚æœæœ‰çš„è¯å°±è°ƒç”¨ä¸Šè¿°çš„å‡½æ•°ï¼Œè®²å“ˆå¸Œè¡¨ä¸­å·²ç»å­˜åœ¨çš„æŒ‰ç…§æ—¢å®šè§„åˆ™å‡ºæ¥çš„å€¼è¿›è¡Œæ›´æ–°ã€‚ ä¸ºä»€ä¹ˆåœ¨æ’å…¥çš„è¿‡ç¨‹ä¸­éœ€è¦æ›´æ–°å‘¢ï¼Ÿ åŸå› ä¹Ÿæ˜¯éå¸¸ç®€å•äº†\u0026mdash;\u0026gt; åŠ å…¥è§„åˆ™æ˜¯æ‰¾ä¸€ä¸ªæœ€å¤§çš„æ•°ï¼Œè¿™ä¸ªæ—¶å€™è¿›æ¥çš„è¿™ä¸ªæ•°æ¯”è¡¨ä¸­åŸæ¥çš„æœ€å¤§çš„æ•°å¤§ï¼Œé‚£è‡ªç„¶å°±éœ€è¦è¿›è¡Œæ”¹å˜ã€‚\næ‰€ä»¥ä¸Šè¿°çš„è¿™ä¸ªå‡½æ•°å®ç°æˆ‘æƒ³å¤§è‡´æ€è·¯å·²ç»å‡ºæ¥äº†ï¼ŒæŠŠæ¯ä¸€ä¸ªæ–°çš„è¿›æ¥çš„æ•°æ®å’ŒåŸæ¥çš„é‡Œé¢å­˜çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼ŒæŒ‰ç…§è§„åˆ™åˆ¤å®šæ˜¯å¦éœ€è¦æ›´æ–°ã€‚\n==ä¸¾ä¸ªä¾‹å­==\nSELECT min(t.z), max(t.z), sum(t.z) , count(t.z) FROM t GROUP BY t.x, t.y; åœ¨è¿™ä¸ªä¸Šè¿°è¿‡ç¨‹ä¸­å‡½æ•°ä¸­æ¯ä¸ªå˜é‡å¯¹åº”çš„æ˜¯ä»€ä¹ˆï¼Ÿ\nAggregateKey ä¸Šæ–‡æåˆ°æ˜¯groupçš„å­—æ®µ åœ¨è¿™ä¸ªsqlä¸­å¯¹åº”çš„è‡ªç„¶å°±æ˜¯ã€Œ t.x ï¼Œt.yã€ AggregateValue å¯¹åº”çš„æ˜¯å››ä¸ªç±»å‹ ã€Œt.z t.z t.z t.z ã€ AggregationType å¯¹åº”çš„è§„åˆ™ä¸º ã€Œmin ï¼Œmax ï¼Œsum ï¼Œcountã€\né€šè¿‡ç›¸å¯¹ä½ç½®æ¥ç¡®å®šå¯¹åº”çš„è§„åˆ™å’Œå€¼ã€‚\nNestedLoopJoin åœ¨chatGPTä¸­å¯¹è¿™ä¸ªå¾ªç¯åµŒå¥—ç»™å‡ºäº†å¦‚ä¸‹çš„è§£é‡Šã€‚ä½†æ˜¯æƒ³å®ç°å¥½ç¡®å¹¶ä¸å®¹æ˜“ã€‚\nAndy åœ¨ Lecture é‡Œä¹Ÿè¯¦ç»†åœ°é‡åŒ–åœ°å¯¹æ¯”äº†å„ç§ Join çš„ costsï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹ã€‚\nrisinglight/src/executor/nested_loop_join.rs at main Â· risinglightdb/risinglight Â· GitHub\nå‚ç…§ä¸Šè¿°çš„joinå®ç°æ¯”è¾ƒçš„ä¼˜é›…ã€‚è¿™ä¹Ÿæ˜¯Bustubçš„ä½œè€…å‚ä¸çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå‚è€ƒåŸä½œè€…çš„å®ç°æˆ‘æƒ³ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„å¥‡æ•ˆã€‚\n==æ€è·¯æ•´ç†==\nç¬¬ä¸€ç‰ˆ\næŒ‰ç…§è¯¾ä¸Šè®²çš„æ€è·¯ï¼Œå°±æ˜¯ä¸¤ä¸ªå¾ªç¯ç›´æ¥è¿›è¡ŒåµŒå¥—å‘ç°æœ‰ä¸€æ ·çš„å°±ç›´æ¥è¿”å›\nwhile(leftchild-\u0026gt;next(lefttuple)){ for(auto rightchild : righttuple){ if(leftchild==rightchild){ *tuple = ...; return true; } } } ä½†æ˜¯æŒ‰ç…§ä¸Šè¿°çš„æ€è·¯æˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªå¾ˆè‡´å‘½çš„é—®é¢˜ï¼Œå¦‚æœå³è¾¹çš„tupleé‡Œé¢æœ‰é‡å¤çš„å€¼ä¸å·¦é¢çš„å€¼åŒ¹é…çš„è¯ä¸Šè¿°ä»£ç åªä¼šåŒ¹é…ç¬¬ä¸€ä¸ªç›¸ç­‰çš„tupleç„¶åå°±è¿”å›äº†ã€‚\nğŸ‘‡ä¸¾ä¸ªä¾‹å­\nt1.x | t2.x ----- 1 | 0 2 | 1 \u0026lt;--- 3 | 1 4 | 2 æŒ‰ç…§æ­£ç¡®çš„åº”è¯¥t1.xçš„1å’Œ t2.x ä¸­çš„ä¸¤ä¸ª1è¿›è¡ŒåŒ¹é… ä½†æ˜¯ä¸Šè¿°ä»£ç çš„é€»è¾‘åªä¼šåŒ¹é…åˆ°ç®­å¤´æŒ‡çš„åœ°æ–¹ç„¶åå°±è¿”å›äº†ã€‚\n+32å»æ¯”è¾ƒçš„åŸå› æ˜¯çˆ¶ç±»pageå’Œtablepageçš„headä¸€å…±éœ€è¦é¢„ç•™32bçš„ä½ç½®ã€‚\n","permalink":"https://jialog.top/posts/database/note/bustub%E6%89%A7%E8%A1%8C%E5%99%A8%E6%9E%B6%E6%9E%84%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90/","summary":"\u003ch2 id=\"å†™åœ¨å‰é¢\"\u003eå†™åœ¨å‰é¢\u003c/h2\u003e\n\u003cp\u003eåœ¨è¿™ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å…ˆæŠ›å¼€SQLåœ¨bustubçš„ä¸­çš„å†ç¨‹ï¼Œç›´æ¥å¿«è¿›åˆ°æœ€åå¼€å§‹æ‰§è¡Œçš„é˜¶æ®µï¼Œè¿™ç¯‡æ–‡ç« åªå…³æ³¨è®¾è®¡ä¸Šçš„ç»†èŠ‚ã€‚\u003c/p\u003e\n\u003cp\u003eè‡³äºå¦‚ä½•ç†é¡ºè¿™äº›ç»†èŠ‚åœ¨[[CMU15-445 Project3 - Query Execution]]æ–‡ç« ä¸­ä¼šæœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚ğŸ˜ƒ\u003c/p\u003e\n\u003ch2 id=\"æ¶æ„æ€»è§ˆ\"\u003eæ¶æ„æ€»è§ˆ\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221212132.png\"\u003e\u003c/p\u003e\n\u003cp\u003eä¸Šå›¾ä¸­catalogå…¶å®ä¸æ˜¯ç‰¹åˆ«å‡†ç¡®ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£åº”è¯¥æ˜¯ä¸‹é¢è¿™ç§æƒ…å†µğŸ‘‡ã€‚é€šè¿‡ä¸€ä¸ªtable_idåŒå‘æ˜ å°„è¡¨çš„åå­—å’Œå®ä½“tableã€‚\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221212842.png\"\u003e\u003c/p\u003e\n\u003cp\u003eæ¥ä¸‹æ¥å°±æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡ä»‹ç»å„ä¸ªéƒ¨åˆ†çš„ç»“æ„ã€‚\u003c/p\u003e\n\u003ch2 id=\"catalog\"\u003eCatalog\u003c/h2\u003e\n\u003cp\u003eä¸‹é¢è¿™ä¸ªå›¾æ˜¯æ˜¯æ•´ä¸ªcatalogå…³äºtableçš„ã€‚ğŸ‘‡è¿™é‡Œå¼•å‡ºäº†\u003ccode\u003eTableInfo\u003c/code\u003e.\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221221311.png\"\u003e\u003c/p\u003e\n\u003cp\u003eCatalogä¸­ä¸ä»…ä»…åŒ…å«tableçš„ä¿¡æ¯è¿˜å‚¨å­˜äº†indexçš„ä¿¡æ¯ã€‚è¿™é‡Œå¼•å‡ºäº†\u003ccode\u003eIndexInfo\u003c/code\u003e,ä½†æ˜¯åè¾¹ç”¨çš„ä¸æ˜¯å¾ˆå¤šã€‚\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221222700.png\"\u003e\u003c/p\u003e\n\u003cp\u003eæ¥ä¸‹æ¥çœ‹\u003ccode\u003eTableInfo\u003c/code\u003eçš„ç»„æˆã€‚ï¼ˆTableInfoçš„å®šä¹‰å°±åœ¨Catalog.hæ–‡ä»¶ä¸­ï¼‰\u003c/p\u003e\n\u003ch2 id=\"tableinfo\"\u003eTableInfo\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"ä¸»è¦æˆå‘˜å˜é‡|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221223744.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ename_:å°±æ˜¯è¡¨çš„åå­—\u003c/li\u003e\n\u003cli\u003etable_: æ˜¯ä¸€ä¸ªæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯tablepageçš„åŒå‘é“¾è¡¨\u003c/li\u003e\n\u003cli\u003eoid_: é¡¾åæ€ä¹‰å°±æ˜¯è¡¨çš„id\u003c/li\u003e\n\u003cli\u003eSchema_ï¼šå…¶å®åˆ°ç°åœ¨æˆ‘éƒ½æ²¡æœ‰å¾ˆå¼„æ‡‚è¿™ä¸ªæ˜¯å¹²ä»€ä¹ˆçš„ä¸œè¥¿ï¼Œä½†æ˜¯chatç»™å‡ºäº†ç­”æ¡ˆã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"ä»€ä¹ˆæ˜¯schema\"\u003eä»€ä¹ˆæ˜¯Schema\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221224249.png\"\u003e\næŒ‰ç…§æˆ‘çš„ç†è§£åº”è¯¥æ˜¯ä¸€ä¸ªç±»ä¼¼äºè¡¨å¤´çš„åŒ…å«å„ç§é…ç½®ä¿¡æ¯çš„ä¸€ä¸ªæŠ½è±¡é›†åˆã€‚ç°åœ¨å°±çœ‹çœ‹æºç ã€‚ğŸ‘‡\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221225429.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨bustubä¸­schemaçš„ä¿¡æ¯ä¼¼ä¹æ²¡æœ‰åŒ…å«å¾ˆå¤šï¼Œå°±æ˜¯å¯¹æ¯ä¸€ä¸ªåˆ—çš„æ•°æ®ç±»å‹çº¦æŸè¿›è¡Œäº†è®°å½•ã€‚ä»¥åŠå¯¹æ‰€æœ‰çš„åˆ—è¿›è¡Œä¸€ä¸ªæ±‡æ€»ï¼Œæ–¹ä¾¿è·å–åˆ°æ¯ä¸€ä¸ªåˆ—ã€‚\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221225647.png\"\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e==Column==\u003c/p\u003e\n\u003cp\u003eå®é™…ä¸Šæ¯ä¸ªåˆ—çš„å®ç°å®ä½“æ˜¯\u003ccode\u003eColumn\u003c/code\u003eï¼Œåœ¨è¿™ä¸ªå®ä½“ä¸­åŒ…å«\u003cstrong\u003eåˆ—åï¼Œæ•°æ®ç±»å‹ï¼Œé•¿åº¦\u003c/strong\u003eç­‰åŸºæœ¬ä¿¡æ¯ã€‚\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221230318.png\"\u003e\u003c/p\u003e\n\u003cp\u003eâš ï¸å€¼å¾—æ³¨æ„çš„æ˜¯columnå¯¹äº\u003ccode\u003evarchar\u003c/code\u003eå•ç‹¬åšäº†å¤„ç†ğŸ™‚,å˜é•¿æ•°ç»„ç»ˆç©¶è¿˜æ˜¯ä¸ä¸€æ ·å•Šã€‚\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221231559.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"tableheap\"\u003eTableHeap\u003c/h2\u003e\n\u003cp\u003eå®è´¨ä¸Šå°±æ˜¯é…åˆ\u003ccode\u003eTablePage\u003c/code\u003eé‡Œé¢çš„ä¿¡æ¯æ„æˆçš„åŒå‘é“¾è¡¨ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªè®¾è®¡çœŸçš„éå¸¸çš„å·§å¦™ã€‚åªç”¨äº†åŸºæœ¬çš„\u003ccode\u003epre_page_id\u003c/code\u003e å’Œ\u003ccode\u003enext_page_id\u003c/code\u003eè¿™ä¸¤ä¸ªå˜é‡å°±æŠŠåŒå‘é“¾è¡¨ç»™å»ºç«‹èµ·æ¥è€Œä¸”è€¦åˆåº¦éå¸¸çš„ä½ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221233636.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003efirst_page_id_: å°±æ˜¯ç¬¬ä¸€ä¸ªpageid\u003c/li\u003e\n\u003cli\u003ebufferpoolï¼šæ‰€æœ‰çš„pageéƒ½éœ€è¦ä»bufferpoolä¸­å»å–ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"tablepageçš„ç»“æ„\"\u003eTablePageçš„ç»“æ„\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240222001937.png\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240222001143.png\"\u003e\u003c/p\u003e\n\u003cp\u003eokçœ‹åˆ°è¿™é‡Œæœ‰ç–‘é—®äº†ï¼Ÿ é‚£ä¹ˆå¤šçš„ä¿¡æ¯éƒ½å­˜åœ¨é‚£é‡Œï¼Œ è¿™ç»§æ‰¿çš„åŠ ä¸Šåˆå§‹åŒ–çš„ä¹Ÿä¸å¤Ÿå•Šã€‚\nç­”æ¡ˆåœ¨è¿™é‡ŒğŸ‘‡\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240222001417.png\"\u003e\u003c/p\u003e\n\u003cp\u003eé€šè¿‡\u003ccode\u003eåç§»é‡\u003c/code\u003eç›´æ¥åœ¨pageçš„å‰©ä½™ç©ºé—´é‡Œå»å®šä¹‰å„ç§å˜é‡ã€‚\u003c/p\u003e\n\u003cp\u003e==é€šè¿‡InsertTupleï¼ˆï¼‰å‡½æ•°äº†è§£è¯¦ç»†ç»“æ„==\u003c/p\u003e\n\u003cp\u003eç›´æ¥çœ‹æºä»£ç ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etuple\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esize_\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e32\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eBUSTUB_PAGE_SIZE\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ Â \u003cspan class=\"c1\"\u003e// larger than one page size\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003eÂ  Â  \u003cspan class=\"n\"\u003etxn\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSetState\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTransactionState\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eABORTED\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ  Â  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ  \u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003ecur_page\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003estatic_cast\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTablePage\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebuffer_pool_manager_\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eFetchPage\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efirst_page_id_\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecur_page\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"k\"\u003enullptr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ  Â  \u003cspan class=\"n\"\u003etxn\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSetState\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTransactionState\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eABORTED\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ  Â  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nb\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cul\u003e\n\u003cli\u003eè¿™ä¸»è¦æ˜¯åˆ¤æ–­ä¸€äº›å‰ç½®æ¡ä»¶çš„åˆæ³•æ€§\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cem\u003eä¸ºä»€ä¹ˆè¦ç”¨tupleçš„å¤§å°+32è¿›è¡Œæ¯”è¾ƒå‘¢ï¼Ÿ\u003c/em\u003e æ–‡æœ«ç»™å‡ºç­”æ¡ˆ\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|800\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240222002633.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨ç¬¬ä¸€é¡µä¸­è¿›è¡Œæ’å…¥ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å°±å¼€ä¸€ä¸ªæ–°é¡µç„¶åæ’è¿›å»\u003c/li\u003e\n\u003cli\u003eâš ï¸éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç¦»å¼€ç¬¬ä¸€é¡µçš„æ—¶å€™\u003cstrong\u003eä»ç„¶è¦æŒæœ‰å†™é”\u003c/strong\u003eï¼Œå› ä¸ºè¿˜è¦å†™\u003ccode\u003enext_page_id\u003c/code\u003eå˜é‡.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eğŸ’¡è·Ÿéšä»£ç è·³è½¬åˆ°\u003ccode\u003eTablePage::InserTuple()\u003c/code\u003e.\u003c/p\u003e","title":"Bustubæ¶æ„ç®€å•åˆ†æ"},{"content":"äº‹åŠ¡ ==Transaction==\nåœ¨è‹±æ–‡ä¸­äº‹åŠ¡ç”¨transactionè¡¨ç¤ºï¼Œä¸€èˆ¬çº¦å®šä¿—æˆçš„ç¼©å†™ä¸ºtxnï¼Œæ‰€ä»¥åœ¨æ•°æ®åº“çš„æºä»£ç ä¸­çœ‹åˆ°txnçš„è¯å¤šåŠå°±æ˜¯äº‹åŠ¡ã€‚\n==äº‹åŠ¡è¯ç”Ÿçš„èƒŒæ™¯==\næˆ‘ä»¬å‡è®¾ä¸€ä¸ªé“¶è¡Œçš„åœºæ™¯ï¼Œè½¬è´¦è¿™ä¸€æ“ä½œåœ¨å¤–ç•Œçœ‹æ¥æ˜¯å•ä¸€çš„æ“ä½œï¼Œä½†æ˜¯åœ¨æ•°æ®åº“å†…éƒ¨æ¶‰åŠåˆ°å¾ˆå¤šçš„æ“ä½œï¼Œå‡å¦‚è½¬è´¦æ“ä½œå‘ç”Ÿäº†å¤±è´¥ï¼Œé‚£ä¹ˆæ•°æ®çš„ä¸ä¸€è‡´æ˜¯ä¸èƒ½è¢«æ¥å—çš„ã€‚æ‰€ä»¥è¿™ä¸€è¿ä¸²çš„æ“ä½œå¯ä»¥è¢«å½’ä¸ºé€»è¾‘ä¸Šçš„ä¸€ä¸ªæ“ä½œé›†ã€‚è¦ä¹ˆæ•´ä½“éƒ½æˆåŠŸè¦ä¹ˆéƒ½å¤±è´¥ã€‚\näº‹åŠ¡çš„æ¦‚å¿µ åœ¨chatgptä¸Šé—®äº‹åŠ¡çš„æ¦‚å¿µä»–ä¼šè¿™æ ·å­è¿›è¡Œå›ç­”ã€‚ è¿™ä¹Ÿæ­£æ˜¯äº‹åŠ¡çš„å…³é”®ã€‚ æˆ‘ä»¬å›å½’è¯¾æœ¬ï¼Œçœ‹è¯¾æœ¬ä¸Šç»™å‡ºçš„å®šä¹‰ äº‹åŠ¡çš„éš”ç¦»æ€§çº§åˆ« æˆ‘ä¸ªäººè§‰å¾—å¯¹äºéš”ç¦»æ€§çš„çš„ç†è§£æ˜¯éå¸¸é‡è¦çš„ï¼Œåœ¨åç»­çš„ç®—å­çš„å®ç°å½“ä¸­å‡ ä¹éƒ½è¦è€ƒè™‘äº‹åŠ¡çš„éš”ç¦»ç­‰çº§ï¼Œæ ¹æ®ä¸åŒçš„éš”ç¦»ç­‰çº§å»è¿›è¡Œä¸åŒçš„æ“ä½œã€‚ï¼ˆæˆ‘ä¸ªäººç°åœ¨æ¯”è¾ƒè¿·èŒ«çš„æ˜¯æ€ä¹ˆèƒ½æ¯”è¾ƒå‘¨å…¨çš„è€ƒè™‘ä¸åŒéš”ç¦»ç­‰çº§æ‰€å¸¦æ¥çš„å½±å“ã€‚ï¼šï¼‰ã€‚çœ‹æ¥æ˜¯æ—¶å€™æ‰¾ä¸ªå¤§ä½¬è¯·æ•™ä¸€ä¸‹äº†ã€‚ğŸ™ƒ\n","permalink":"https://jialog.top/posts/database/note/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1/","summary":"\u003ch1 id=\"äº‹åŠ¡\"\u003eäº‹åŠ¡\u003c/h1\u003e\n\u003cp\u003e==Transaction==\u003c/p\u003e\n\u003cp\u003eåœ¨è‹±æ–‡ä¸­äº‹åŠ¡ç”¨transactionè¡¨ç¤ºï¼Œä¸€èˆ¬çº¦å®šä¿—æˆçš„ç¼©å†™ä¸º\u003ccode\u003etxn\u003c/code\u003eï¼Œæ‰€ä»¥åœ¨æ•°æ®åº“çš„æºä»£ç ä¸­çœ‹åˆ°\u003ccode\u003etxn\u003c/code\u003eçš„è¯å¤šåŠå°±æ˜¯äº‹åŠ¡ã€‚\u003c/p\u003e\n\u003cp\u003e==äº‹åŠ¡è¯ç”Ÿçš„èƒŒæ™¯==\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬å‡è®¾ä¸€ä¸ªé“¶è¡Œçš„åœºæ™¯ï¼Œ\u003cstrong\u003eè½¬è´¦\u003c/strong\u003eè¿™ä¸€æ“ä½œåœ¨å¤–ç•Œçœ‹æ¥æ˜¯å•ä¸€çš„æ“ä½œï¼Œä½†æ˜¯åœ¨æ•°æ®åº“å†…éƒ¨æ¶‰åŠåˆ°å¾ˆå¤šçš„æ“ä½œï¼Œå‡å¦‚è½¬è´¦æ“ä½œå‘ç”Ÿäº†å¤±è´¥ï¼Œé‚£ä¹ˆæ•°æ®çš„ä¸ä¸€è‡´æ˜¯ä¸èƒ½è¢«æ¥å—çš„ã€‚æ‰€ä»¥è¿™ä¸€è¿ä¸²çš„æ“ä½œå¯ä»¥è¢«å½’ä¸ºé€»è¾‘ä¸Šçš„ä¸€ä¸ªæ“ä½œé›†ã€‚è¦ä¹ˆæ•´ä½“éƒ½æˆåŠŸè¦ä¹ˆéƒ½å¤±è´¥ã€‚\u003c/p\u003e\n\u003ch2 id=\"äº‹åŠ¡çš„æ¦‚å¿µ\"\u003eäº‹åŠ¡çš„æ¦‚å¿µ\u003c/h2\u003e\n\u003cp\u003eåœ¨chatgptä¸Šé—®äº‹åŠ¡çš„æ¦‚å¿µä»–ä¼šè¿™æ ·å­è¿›è¡Œå›ç­”ã€‚\nè¿™ä¹Ÿæ­£æ˜¯äº‹åŠ¡çš„å…³é”®ã€‚\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240220222726.png\"\u003e\næˆ‘ä»¬å›å½’è¯¾æœ¬ï¼Œçœ‹è¯¾æœ¬ä¸Šç»™å‡ºçš„å®šä¹‰\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240220231837.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"äº‹åŠ¡çš„éš”ç¦»æ€§çº§åˆ«\"\u003eäº‹åŠ¡çš„éš”ç¦»æ€§çº§åˆ«\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221012712.png\"\u003e\u003c/p\u003e\n\u003cp\u003eæˆ‘ä¸ªäººè§‰å¾—å¯¹äºéš”ç¦»æ€§çš„çš„ç†è§£æ˜¯éå¸¸é‡è¦çš„ï¼Œåœ¨åç»­çš„ç®—å­çš„å®ç°å½“ä¸­å‡ ä¹éƒ½è¦è€ƒè™‘äº‹åŠ¡çš„éš”ç¦»ç­‰çº§ï¼Œæ ¹æ®ä¸åŒçš„\u003cstrong\u003eéš”ç¦»ç­‰çº§\u003c/strong\u003eå»è¿›è¡Œä¸åŒçš„æ“ä½œã€‚ï¼ˆæˆ‘ä¸ªäººç°åœ¨æ¯”è¾ƒè¿·èŒ«çš„æ˜¯æ€ä¹ˆèƒ½æ¯”è¾ƒå‘¨å…¨çš„è€ƒè™‘ä¸åŒéš”ç¦»ç­‰çº§æ‰€å¸¦æ¥çš„å½±å“ã€‚ï¼šï¼‰ã€‚çœ‹æ¥æ˜¯æ—¶å€™æ‰¾ä¸ªå¤§ä½¬è¯·æ•™ä¸€ä¸‹äº†ã€‚ğŸ™ƒ\u003c/p\u003e","title":"æ•°æ®åº“äº‹åŠ¡"},{"content":" Join Operationï¼Œ è¿è¡¨ åœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­ç»å¸¸ä¼šæ¶‰åŠåˆ°è¿è¡¨çš„æ“ä½œã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆæ€»æ˜¯éœ€è¦è¿è¡¨å‘¢ï¼Ÿ\n==ä¸ºä»€ä¹ˆéœ€è¦è¿è¡¨ï¼Ÿ==\nåœ¨å­˜å‚¨çš„æ—¶å€™ä¸ºäº†é¿å…æ•°æ®çš„å†—æ‚ï¼Œå°†è¡¨è¿›è¡Œè§„èŒƒåŒ–ï¼Œå¯¼è‡´è¡¨çš„å‰²è£‚ã€‚ åœ¨æŸ¥è¯¢çš„æ—¶å€™éœ€è¦è·å–å®Œæ•´çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å°†è¡¨è¿›è¡Œé‡æ–°çš„ç»„è£…ã€‚ è¿è¡¨çš„ç®—æ³• Fetching Title#i6kq\n","permalink":"https://jialog.top/posts/database/note/%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%A4%84%E7%90%86%E5%92%8C%E4%BC%98%E5%8C%96/","summary":"\u003chr\u003e\n\u003ch2 id=\"join-operation-è¿è¡¨\"\u003eJoin Operationï¼Œ è¿è¡¨\u003c/h2\u003e\n\u003cp\u003eåœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­ç»å¸¸ä¼šæ¶‰åŠåˆ°è¿è¡¨çš„æ“ä½œã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆæ€»æ˜¯éœ€è¦è¿è¡¨å‘¢ï¼Ÿ\u003c/p\u003e\n\u003cp\u003e==ä¸ºä»€ä¹ˆéœ€è¦è¿è¡¨ï¼Ÿ==\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240209151410.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨å­˜å‚¨çš„æ—¶å€™ä¸ºäº†é¿å…æ•°æ®çš„å†—æ‚ï¼Œå°†è¡¨è¿›è¡Œè§„èŒƒåŒ–ï¼Œå¯¼è‡´è¡¨çš„å‰²è£‚ã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨æŸ¥è¯¢çš„æ—¶å€™éœ€è¦è·å–å®Œæ•´çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å°†è¡¨è¿›è¡Œé‡æ–°çš„ç»„è£…ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"è¿è¡¨çš„ç®—æ³•\"\u003eè¿è¡¨çš„ç®—æ³•\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/show.mp4\"\u003eFetching Title#i6kq\u003c/a\u003e\u003c/p\u003e","title":"æŸ¥è¯¢çš„å¤„ç†å’Œä¼˜åŒ–"},{"content":"åšè¿™ä¸ªp3é¦–å…ˆéœ€è¦æ˜æ™°æ•´ä¸ªbustubçš„æ¶æ„[[Bustubæ‰§è¡Œå™¨æ¶æ„ç®€å•åˆ†æ]],åœ¨è¿™ä¸ªæ–‡ç« ä¸­è¿›è¡Œäº†å¾ˆè¯¦ç»†çš„åˆ†æã€‚ ","permalink":"https://jialog.top/posts/database/project/cmu15-445-project3---query-execution/","summary":"\u003cp\u003eåšè¿™ä¸ªp3é¦–å…ˆéœ€è¦æ˜æ™°æ•´ä¸ªbustubçš„æ¶æ„[[Bustubæ‰§è¡Œå™¨æ¶æ„ç®€å•åˆ†æ]],åœ¨è¿™ä¸ªæ–‡ç« ä¸­è¿›è¡Œäº†å¾ˆè¯¦ç»†çš„åˆ†æã€‚\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240221215146.png\"\u003e\u003c/p\u003e","title":"CMU15-445-Project #3 - Project3 - Query Execution"},{"content":"CHECKPOINT-2 Task #3 - Index Iterator ç®€å•æ¥è¯´å°±æ˜¯å®ç°ä¸€ä¸ªè¿­ä»£å™¨\nå°†æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹è§†ä¸ºä¸€ä¸ªé“¾è¡¨ï¼Œè¦æ±‚å®ç°ç»™å‡ºçš„å‡½æ•°ã€‚åœ¨å½“å‰çš„è¿­ä»£å™¨ä¸­ä¿å­˜æ‰€åœ¨çš„pageIdå’Œå½“å‰çš„èµ·å§‹ä½ç½®ï¼Œç„¶åé€šè¿‡leafpageä¸­çš„next_page_idæ¥è·å–ä¸‹ä¸€ä¸ªå¶å­èŠ‚ç‚¹ã€‚ æ€»ä½“ä¸Šæ¥è¯´éš¾åº¦ä¸æ˜¯å¾ˆå¤§ï¼Œæ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯è¿˜æ˜¯æ³¨æ„è¦åŠ é”ï¼Œå…¶ä¸­çš„æŸä¸€ä¸ªå‡½æ•°åœ¨å®ç°çš„æ—¶å€™éœ€è¦è€ƒè™‘è·¨é¡µçš„æƒ…å†µï¼Œè¿™æ—¶å€™å°±è¦è€ƒè™‘åŠ é”å’Œå»é”çš„æƒ…å†µäº†ã€‚\nTask #4 - Concurrent Index è¿™å°±æ˜¯è¦å®Œå®ç°ä¸€ä¸ªå¤šçº¿ç¨‹çš„b+æ ‘ï¼ŒåŠ é”çš„å®ç°æ–¹å¼å’ŒåŸç†åœ¨[[B+ Tree Index#b+ tree latches]]ä¸­æœ‰æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œæˆ‘ç®€å•çš„è§£é‡Šä¸€ä¸‹ã€‚\nè¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„é‡ç‚¹ä¹Ÿæ˜¯éš¾ç‚¹ï¼Œè€ƒå¯Ÿå¯¹b+æ ‘æ•´ä¸ªç»“æ„å’Œæ¯ä¸ªæ“ä½œæ¶‰åŠåˆ°çš„ç‚¹ï¼Œå½“ç„¶å¯ä»¥åƒä¹‹å‰çš„é¡¹ç›®ä¸€æ ·ä¸€æŠŠå¤§é”æŠ¥å¹³å®‰ï¼Œä½†æ˜¯å¯¹äºb+æ ‘æ¥è¯´è¿™æ ·ä¼šä½¿çš„æ€§èƒ½çº¦ç­‰äºå•çº¿ç¨‹ï¼Œæ¯æ¬¡éƒ½éœ€è¦ä»æ ¹èŠ‚ç‚¹è¿›å…¥æ•´ä¸ªæ ‘ï¼Œä½†æ˜¯ä¸€æŠŠå¤§é”å°±æ„å‘³ç€æ¯æ¬¡æ•´ä¸ªæ ‘ä¸­éƒ½åªèƒ½å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹åœ¨æ“ä½œã€‚ã€‚ã€‚\næ‰€ä»¥æˆ‘ä»¬éœ€è¦æ›´ç»†ç²’åº¦çš„é”ï¼Œäºæ˜¯èƒèŸ¹é”ğŸ¦€åº”è¿è€Œç”Ÿã€‚ ï¼šï¼‰rustçš„å‰ç¥¥ç‰©ä¹Ÿæ˜¯ä¸ªèƒèŸ¹å§ã€‚ã€‚\n==èƒèŸ¹é”==\nå› ä¸ºå…¶åŠ é”å’Œè§£é”çš„è¿‡ç¨‹ä»¥åŠé€»è¾‘ç‰¹åˆ«åƒèƒèŸ¹çš„è¡Œèµ°çš„æ–¹å¼ï¼Œå› æ­¤è€Œå¾—åèƒèŸ¹é”ã€‚\nè¯»æ¨¡å¼\nåœ¨è¯»æ¨¡å¼çš„æ—¶å€™æœ€ä¸ºå½¢è±¡ï¼Œå½“è·å–åˆ°çˆ¶èŠ‚ç‚¹çš„è¯»é”ä¹‹åï¼Œå°è¯•ç€è·å–ç›®æ ‡å­èŠ‚ç‚¹çš„è¯»é”ï¼Œå½“è·å–åˆ°é”ä¹‹åç«‹é©¬é‡Šæ”¾çˆ¶èŠ‚ç‚¹çš„é” åœ¨ä¸Šå›¾ä¸­ï¼Œä¸€ä¸ªçº¿ç¨‹è·å–Aé¡µçš„é”ä¹‹åä¼šå°è¯•ç€è·å–ç›®æ ‡å­èŠ‚ç‚¹Bçš„é”ï¼Œå½“è·å–Bçš„é”ä¹‹åå°±ä¼šé‡Šæ”¾Açš„é”ã€‚å¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œå°±åƒèƒèŸ¹åœ¨èµ°ã€‚\nå†™æ¨¡å¼\nå†™æ¨¡å¼çš„æ—¶å€™åªæ˜¯é”é‡Šæ”¾çš„æ¡ä»¶ä¸ä¸€æ ·ï¼Œè¯»æ¨¡å¼çš„æ—¶å€™å½“è·å–çš„ä¸‹ä¸€ä¸ªé¡µçš„é”çš„æ—¶å€™å°±å¯ä»¥ç«‹é©¬é‡Šæ”¾å½“å‰é¡µçš„é”ï¼Œä½†æ˜¯å†™æ¨¡å¼æ¶‰åŠåˆ°æ’å…¥å’Œåˆ é™¤ï¼Œå¯èƒ½æ•´ä¸ªè·¯å¾„ä¸Šçš„é¡µéƒ½ä¼šå—å½±å“ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“è·å–åˆ°Bé¡µçš„é”çš„æ—¶å€™ä¸èƒ½é‡Šæ”¾Aé¡µçš„é”ï¼Œå› ä¸ºBæœ‰å¯èƒ½ä¼šå‘ç”Ÿåˆå¹¶ï¼Œäºæ˜¯ç»§ç»­å‘ä¸‹è·å–é”ï¼Œè·å–åˆ°Cé¡µçš„é”ä¹‹åå‘ç°Cé¡µæ˜¯å¤„äºå®‰å…¨çŠ¶æ€çš„ã€‚æ‰€ä»¥å¯ä»¥é‡Šæ”¾Cé¡µä¹‹ä¸Šçš„æ‰€æœ‰é”ã€‚âš ï¸æ³¨æ„ï¼šå¹¶ä¸åŒ…æ‹¬Cæœ¬èº«ã€‚\nå®‰å…¨çŠ¶æ€\nå®‰å…¨çŠ¶æ€çš„è¿™ä¸ªæ¦‚å¿µåªå­˜åœ¨äºå†™æ¨¡å¼çš„æ—¶å€™ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨åˆ é™¤å’Œæ’å…¥çš„æ—¶å€™é¡µå¤„äºå®‰å…¨çŠ¶æ€çš„æ¡ä»¶å¹¶ä¸ä¸€æ ·ã€‚\nåœ¨æ’å…¥çš„æ—¶å€™ï¼šè¯¥é¡µä¸æ˜¯æ»¡çš„\u0026mdash;\u0026ndash;ã€‹å°±ç®—å‘ç”Ÿåˆ†è£‚çš„æƒ…å†µï¼Œåˆ°æ­¤é¡µä¹Ÿå°±ç»“æŸäº†ã€‚ åœ¨åˆ é™¤çš„æ—¶å€™ï¼šå¤§äºåŠæ•°\u0026mdash;\u0026mdash;\u0026mdash;ã€‹å°±ç®—åˆ é™¤ä¹‹åå‘ç”Ÿåˆå¹¶æˆ–è€…é‡æ–°åˆ†é…åˆ°æ­¤é¡µå°±ç»“æŸäº†ã€‚ èƒèŸ¹é”çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ\nâš ï¸è¿™é‡Œçš„ä¼˜åŠ¿æ˜¯ç›¸è¾ƒäºä¸€æŠŠå¤§é”è€Œè¨€ã€‚ è™½ç„¶B+æ ‘å¯ä»¥åšçš„å¾ˆé«˜å¾ˆå¤§ï¼Œä½†æ˜¯æ— è®ºå¦‚ä½•éƒ½åªæœ‰ä¸€ä¸ªå…¥å£ã€‚å¦‚æœæ¯æ¬¡éƒ½æ˜¯ä¸€æŠŠå¤§é”ï¼Œé‚£ä¸ç®¡ä»€ä¹ˆæ“ä½œéƒ½ä¼šå…ˆè·å–æ ¹èŠ‚ç‚¹å¹¶ä¸”é”ä½ï¼Œé‚£ç›´æ¥å°±ç¼–ç¨‹å•çº¿ç¨‹çš„äº†ã€‚\næ‰€ä»¥æ•´ä¸ªçš„ç“¶é¢ˆå°±æ˜¯æ ¹èŠ‚ç‚¹ä¸Šé”çš„æ—¶é—´å¤ªé•¿äº†ã€‚å½±å“äº†å¹¶å‘ã€‚æ‰€ä»¥èƒèŸ¹é”çš„ä¼˜åŠ¿å°±åœ¨äºï¼š\nèƒ½å¤Ÿæ˜¾è‘—çš„å‡å°‘æ ¹ç»“ç‚¹ä¸Šé”çš„æ—¶é—´ï¼Œè®©æ›´å¤šçš„çº¿ç¨‹è¿›å…¥B+æ ‘è¿›è¡Œæ“ä½œ æ›´ä¼˜çš„èƒèŸ¹é”æ‰§è¡Œç­–ç•¥\nå½“å‰é‡Šæ”¾çš„ç­–ç•¥ä»ç„¶æ‹¥æœ‰å¾ˆå¤§çš„ä¼˜åŒ–ç©ºé—´ã€‚åœ¨åŸæ¥çš„ç­–ç•¥ä¸Šå†™æ¨¡å¼çš„æ—¶å€™ä¼šå¯¹æ ¹èŠ‚ç‚¹ä¸Šå†™é”ï¼ŒçŸ¥é“æ‰¾åˆ°ä¸€ä¸ªå®‰å…¨èŠ‚ç‚¹ä¹‹åæ‰ä¼šé‡Šæ”¾ï¼Œè¿™å°±å ç”¨äº†å¾ˆé•¿æ—¶é—´ï¼Œå¯¼è‡´æ•ˆç‡é™ä½ã€‚è¿™ç§ä¸åˆ†é’çº¢çš‚ç™½çš„ç›´æ¥ç»™å„ä¸ªèŠ‚ç‚¹ä¸Šå†™é”çš„è¡Œä¸ºç§°ä¹‹ä¸ºæ‚²è§‚é”ã€‚é¡¾åæ€ä¹‰ï¼Œæ‚²è§‚é”è¡¨ç¤ºè¿™ç§ç­–ç•¥å¯¹å¤šçº¿ç¨‹çš„æ‰§è¡Œéå¸¸çš„æ‚²è§‚ï¼Œè§‰å¾—æ¯ä¸ªé¡µéƒ½ä¼šè¢«ä¿®æ”¹ï¼Œå¿…é¡»éƒ½ä¸Šé”æ‰å®‰å¿ƒã€‚ä½†æ˜¯äº‹å®ä¸Šåœ¨å®é™…çš„åº”ç”¨è¿‡ç¨‹ä¸­è§¦å‘åˆ†è£‚æˆ–è€…åˆå¹¶å¹¶ä¸æ˜¯å¾ˆé¢‘ç¹ã€‚\næ‰€ä»¥å°±è¯ç”Ÿäº†ä¸€ç§æ›´ä¼˜çš„åŠ é”ç­–ç•¥ä¹è§‚é”ï¼Œåœ¨å†™æ¨¡å¼çš„æ—¶å€™å°±å¤§èƒ†çš„å‡è®¾ä»æ ¹èŠ‚ç‚¹åˆ°æœ€åçš„å¶å­èŠ‚ç‚¹éƒ½æ˜¯å®‰å…¨çš„ï¼Œç»™è·¯å¾„çš„é¡µéƒ½ä¸Šè¯»é”ï¼Œæœ€åçš„å¶å­èŠ‚ç‚¹æ‰ä¸Šå†™é”ã€‚å¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‘ç°äº†æŸä¸ªèŠ‚ç‚¹è·Ÿå‡è®¾çš„ä¸ä¸€æ ·ï¼Œä¸æ˜¯å®‰å…¨çš„ï¼Œé‚£ä¹ˆä¹‹å‰çš„æ‰€æœ‰é”éƒ½é‡Šæ”¾ï¼Œå†é‡æ–°æŒ‰ç…§æ‚²è§‚é”çš„æ–¹å¼è¿›è¡Œæ“ä½œã€‚\nè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåœ¨ç›¸è¾ƒäºæ‚²è§‚é”ä¹è§‚é”åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½æ”¹å–„æ ¹èŠ‚ç‚¹æ€»æ˜¯ä¸Šå†™é”å¯¼è‡´å¹¶å‘æ—¶è¯»å–æ•ˆç‡çš„é™ä½ã€‚\nä½†æ˜¯æˆ‘æœ¬äººè¿˜æ²¡æœ‰å®ç°ä¹è§‚é”ï¼Œä¿®æ”¹FindLeafPage()æˆ–è€…æ·»åŠ FindLeafPageHelper()åº”è¯¥éƒ½æ˜¯å¯ä»¥çš„ã€‚\nå…·ä½“å®ç° ==GetValueï¼ˆï¼‰==\nå¦‚ä¸Šå¦‚æ‰€ç¤ºï¼Œå½“è·å–åˆ°ä¸‹ä¸€ä¸ªè¯»é”çš„æ—¶å€™å°±é‡Šæ”¾çˆ¶èŠ‚ç‚¹çš„è¯»é”ï¼Œç„¶åæ¥ç€å¾ªç¯è¿™æ ·çš„æ“ä½œ è¿™æ ·å­åƒèƒèŸ¹èµ°è·¯çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯è¿™ç§åŠ é”ç­–ç•¥çš„ç”±æ¥ã€‚ ==Insertï¼ˆï¼‰==\nè¿˜æœ‰ä¸€ä¸ªå›¾æˆ‘æ‡’å¾—ç”»äº†ï¼Œpage4ä¹Ÿæ˜¯ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥page2ã€3ã€4.åœ¨è¿™é‡Œéƒ½ä¸èƒ½é‡Šæ”¾ã€‚ æ‰¾åˆ°ä¸€ä¸ªå®‰å…¨çš„èŠ‚ç‚¹ä¹‹åå¦‚ä½•å®‰å…¨æœ‰ä¾¿æ·çš„é‡Šæ”¾æ‰€æœ‰çˆ¶èŠ‚ç‚¹é“¾çš„é”å‘¢ï¼Ÿ ==Removeï¼ˆï¼‰==\nç§»é™¤å’Œä¸Šå›¾å¤§åŒå°å¼‚å•¦ï¼Œå°±æ˜¯åˆ¤æ–­å®‰å…¨çš„æ¡ä»¶ä¸ä¸€æ ·å•¦ã€‚æ³¨æ„ä¸€ä¸‹å°±å¥½äº†\nTransactionã€äº‹åŠ¡\nè¿™é‡Œå°±ç”¨åˆ°äº†æˆ‘åœ¨checkpoint1ä¸­æåˆ°çš„è¿™ä¸ªä¸œè¥¿[[CMU15-445 Project2-B+ Tree Index Checkpoint 1#^d53eec|å¯¹Transactionçš„è¯¦ç»†ä»‹ç»]],å¯ä»¥ç¿»çœ‹å‰æ–‡ã€‚ å®ƒå¯ä»¥è·Ÿè¸ªè®°å½•æŸä¸ªçº¿ç¨‹ä¸Šçš„é”ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§é¡ºåºçš„ã€‚ä»ä¸Šåˆ°ä¸‹ã€‚ä¾¿äºè¿›è¡Œç»Ÿç­¹æ“ä½œã€‚\nç”±äºè¶Šå¾€ä¸Špageè¶Šå¯†é›†ï¼Œç«äº‰è¶Šæ¿€çƒˆï¼Œåœ¨é‡Šæ”¾é”çš„æ—¶å€™å¯ä»¥ä¼˜å…ˆé‡Šæ”¾å¤„äºé¡¶éƒ¨çš„é”ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªå°ä¼˜åŒ–ğŸ¤£ã€‚\nSummary æ•´ä¸ªcheckpoint2æƒ³è¾ƒäºcheckpoint1æ¥è¯´æˆ‘è§‰å¾—éœ€è¦æ³¨æ„çš„äº‹æƒ…æ›´å¤šã€‚ç‰¹åˆ«æ˜¯å¯¹æ ¹èŠ‚ç‚¹çš„åŠ é”æ—¶æœºçš„æŠŠæ¡ï¼Œå¾ˆé‡è¦çš„ã€‚éš¾åº¦æˆ‘è§‰å¾—æ˜¯æœ‰æå‡çš„ã€‚\nå†™å®Œè¿™ä¸ªè®©æˆ‘ä½“ä¼šæœ€æ·±çš„æ˜¯ï¼Œä»£ç å†™å®Œæ•´ä¸ªå·¥ä½œå®Œæˆç™¾åˆ†ä¹‹20ï¼Œè·‘èµ·æ¥å¹¶ä¸”è¿‡æœ¬åœ°æµ‹è¯•å‹‰å¼ºç®—å®Œæˆä¸€åŠï¼Œçº¿ä¸Šæµ‹è¯•æ˜¯çœŸéš¾å•Šå•Šå•Šï¼Œæ¯æ¬¡å¡ç©éƒ½å›æ¥ä¸€ç‚¹ä¸€ç‚¹çœ‹logğŸ‘€ï¼Œçœ¼çªçš„æ¯”é»‘çŒ«è­¦é•¿è¿˜å¤§ã€‚\næœ€åé™„ä¸Šé€šè¿‡æˆªå›¾ã€‚ rankä¹Ÿæ¯”è¾ƒé åï¼Œç­‰å®ç°ä¹è§‚é”ä¹‹åå¸Œæœ›ä¸ä¼šè´Ÿä¼˜åŒ–ã€‚\nç°åœ¨ä¸ç”¨æ‹…å¿ƒäº†ï¼Œç”¨äº†ä¸€ä¸‹åˆä¹è§‚é”æ€»æ˜¯å‡ºé—®é¢˜ï¼Œçº¿ä¸Šæµ‹è¯•aä¸äº†ã€‚ä¹Ÿç®—æ˜¯è´Ÿä¼˜åŒ–å¤±è´¥äº†ã€‚ğŸ¤£\n","permalink":"https://jialog.top/posts/database/project/cmu15-445-project2-b+-tree-index-checkpoint-2/","summary":"\u003ch2 id=\"checkpoint-2\"\u003eCHECKPOINT-2\u003c/h2\u003e\n\u003ch3 id=\"task-3---index-iterator\"\u003eTask #3 - Index Iterator\u003c/h3\u003e\n\u003cp\u003eç®€å•æ¥è¯´å°±æ˜¯å®ç°ä¸€ä¸ªè¿­ä»£å™¨\u003c/p\u003e\n\u003cp\u003eå°†æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹è§†ä¸ºä¸€ä¸ªé“¾è¡¨ï¼Œè¦æ±‚å®ç°ç»™å‡ºçš„å‡½æ•°ã€‚åœ¨å½“å‰çš„è¿­ä»£å™¨ä¸­ä¿å­˜æ‰€åœ¨çš„pageIdå’Œå½“å‰çš„èµ·å§‹ä½ç½®ï¼Œç„¶åé€šè¿‡leafpageä¸­çš„next_page_idæ¥è·å–ä¸‹ä¸€ä¸ªå¶å­èŠ‚ç‚¹ã€‚\næ€»ä½“ä¸Šæ¥è¯´éš¾åº¦ä¸æ˜¯å¾ˆå¤§ï¼Œæ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯è¿˜æ˜¯æ³¨æ„è¦åŠ é”ï¼Œå…¶ä¸­çš„æŸä¸€ä¸ªå‡½æ•°åœ¨å®ç°çš„æ—¶å€™éœ€è¦è€ƒè™‘è·¨é¡µçš„æƒ…å†µï¼Œè¿™æ—¶å€™å°±è¦è€ƒè™‘åŠ é”å’Œå»é”çš„æƒ…å†µäº†ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"task-4---concurrent-index\"\u003eTask #4 - Concurrent Index\u003c/h3\u003e\n\u003cp\u003eè¿™å°±æ˜¯è¦å®Œå®ç°ä¸€ä¸ªå¤šçº¿ç¨‹çš„b+æ ‘ï¼ŒåŠ é”çš„å®ç°æ–¹å¼å’ŒåŸç†åœ¨[[B+ Tree Index#b+ tree latches]]ä¸­æœ‰æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œæˆ‘ç®€å•çš„è§£é‡Šä¸€ä¸‹ã€‚\u003c/p\u003e\n\u003cp\u003eè¿™æ˜¯æ•´ä¸ªé¡¹ç›®çš„é‡ç‚¹ä¹Ÿæ˜¯éš¾ç‚¹ï¼Œè€ƒå¯Ÿå¯¹b+æ ‘æ•´ä¸ªç»“æ„å’Œæ¯ä¸ªæ“ä½œæ¶‰åŠåˆ°çš„ç‚¹ï¼Œå½“ç„¶å¯ä»¥åƒä¹‹å‰çš„é¡¹ç›®ä¸€æ ·ä¸€æŠŠå¤§é”æŠ¥å¹³å®‰ï¼Œä½†æ˜¯å¯¹äºb+æ ‘æ¥è¯´è¿™æ ·ä¼šä½¿çš„æ€§èƒ½çº¦ç­‰äºå•çº¿ç¨‹ï¼Œæ¯æ¬¡éƒ½éœ€è¦ä»æ ¹èŠ‚ç‚¹è¿›å…¥æ•´ä¸ªæ ‘ï¼Œä½†æ˜¯ä¸€æŠŠå¤§é”å°±æ„å‘³ç€æ¯æ¬¡æ•´ä¸ªæ ‘ä¸­éƒ½åªèƒ½å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹åœ¨æ“ä½œã€‚ã€‚ã€‚\u003c/p\u003e\n\u003cp\u003eæ‰€ä»¥æˆ‘ä»¬éœ€è¦\u003cstrong\u003eæ›´ç»†ç²’åº¦\u003c/strong\u003eçš„é”ï¼Œäºæ˜¯èƒèŸ¹é”ğŸ¦€åº”è¿è€Œç”Ÿã€‚ ï¼šï¼‰rustçš„å‰ç¥¥ç‰©ä¹Ÿæ˜¯ä¸ªèƒèŸ¹å§ã€‚ã€‚\u003c/p\u003e\n\u003cp\u003e==èƒèŸ¹é”==\u003c/p\u003e\n\u003cp\u003eå› ä¸ºå…¶åŠ é”å’Œè§£é”çš„è¿‡ç¨‹ä»¥åŠé€»è¾‘ç‰¹åˆ«åƒèƒèŸ¹çš„è¡Œèµ°çš„æ–¹å¼ï¼Œå› æ­¤è€Œå¾—å\u003cstrong\u003eèƒèŸ¹é”\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eè¯»æ¨¡å¼\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eåœ¨\u003cstrong\u003eè¯»æ¨¡å¼\u003c/strong\u003eçš„æ—¶å€™æœ€ä¸ºå½¢è±¡ï¼Œå½“è·å–åˆ°çˆ¶èŠ‚ç‚¹çš„è¯»é”ä¹‹åï¼Œå°è¯•ç€è·å–ç›®æ ‡å­èŠ‚ç‚¹çš„è¯»é”ï¼Œå½“è·å–åˆ°é”ä¹‹åç«‹é©¬é‡Šæ”¾çˆ¶èŠ‚ç‚¹çš„é”\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207192232.png\"\u003e\nåœ¨ä¸Šå›¾ä¸­ï¼Œä¸€ä¸ªçº¿ç¨‹è·å–Aé¡µçš„é”ä¹‹åä¼šå°è¯•ç€è·å–ç›®æ ‡å­èŠ‚ç‚¹Bçš„é”ï¼Œå½“è·å–Bçš„é”ä¹‹åå°±ä¼šé‡Šæ”¾Açš„é”ã€‚å¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œå°±åƒèƒèŸ¹åœ¨èµ°ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eå†™æ¨¡å¼\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eå†™æ¨¡å¼çš„æ—¶å€™åªæ˜¯é”é‡Šæ”¾çš„æ¡ä»¶ä¸ä¸€æ ·ï¼Œè¯»æ¨¡å¼çš„æ—¶å€™å½“è·å–çš„ä¸‹ä¸€ä¸ªé¡µçš„é”çš„æ—¶å€™å°±å¯ä»¥ç«‹é©¬é‡Šæ”¾å½“å‰é¡µçš„é”ï¼Œä½†æ˜¯å†™æ¨¡å¼æ¶‰åŠåˆ°\u003cstrong\u003eæ’å…¥\u003c/strong\u003eå’Œ\u003cstrong\u003eåˆ é™¤\u003c/strong\u003eï¼Œå¯èƒ½æ•´ä¸ªè·¯å¾„ä¸Šçš„é¡µéƒ½ä¼šå—å½±å“ã€‚\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207192622.png\"\u003e\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“è·å–åˆ°Bé¡µçš„é”çš„æ—¶å€™ä¸èƒ½é‡Šæ”¾Aé¡µçš„é”ï¼Œå› ä¸ºBæœ‰å¯èƒ½ä¼šå‘ç”Ÿåˆå¹¶ï¼Œäºæ˜¯ç»§ç»­å‘ä¸‹è·å–é”ï¼Œè·å–åˆ°Cé¡µçš„é”ä¹‹åå‘ç°Cé¡µæ˜¯å¤„äº\u003cstrong\u003eå®‰å…¨çŠ¶æ€\u003c/strong\u003eçš„ã€‚æ‰€ä»¥å¯ä»¥é‡Šæ”¾Cé¡µä¹‹ä¸Šçš„æ‰€æœ‰é”ã€‚âš ï¸æ³¨æ„ï¼šå¹¶ä¸åŒ…æ‹¬Cæœ¬èº«ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eå®‰å…¨çŠ¶æ€\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eå®‰å…¨çŠ¶æ€çš„è¿™ä¸ªæ¦‚å¿µåªå­˜åœ¨äº\u003cstrong\u003eå†™æ¨¡å¼\u003c/strong\u003eçš„æ—¶å€™ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨\u003cstrong\u003eåˆ é™¤\u003c/strong\u003eå’Œ\u003cstrong\u003eæ’å…¥\u003c/strong\u003eçš„æ—¶å€™é¡µå¤„äºå®‰å…¨çŠ¶æ€çš„\u003cstrong\u003eæ¡ä»¶\u003c/strong\u003eå¹¶ä¸ä¸€æ ·ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207193015.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨æ’å…¥çš„æ—¶å€™ï¼šè¯¥é¡µä¸æ˜¯æ»¡çš„\u0026mdash;\u0026ndash;ã€‹å°±ç®—å‘ç”Ÿåˆ†è£‚çš„æƒ…å†µï¼Œåˆ°æ­¤é¡µä¹Ÿå°±ç»“æŸäº†ã€‚\u003c/li\u003e\n\u003cli\u003eåœ¨åˆ é™¤çš„æ—¶å€™ï¼šå¤§äºåŠæ•°\u0026mdash;\u0026mdash;\u0026mdash;ã€‹å°±ç®—åˆ é™¤ä¹‹åå‘ç”Ÿåˆå¹¶æˆ–è€…é‡æ–°åˆ†é…åˆ°æ­¤é¡µå°±ç»“æŸäº†ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eèƒèŸ¹é”çš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eâš ï¸è¿™é‡Œçš„ä¼˜åŠ¿æ˜¯ç›¸è¾ƒäºä¸€æŠŠå¤§é”è€Œè¨€ã€‚\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eè™½ç„¶B+æ ‘å¯ä»¥åšçš„å¾ˆé«˜å¾ˆå¤§ï¼Œä½†æ˜¯æ— è®ºå¦‚ä½•éƒ½åªæœ‰ä¸€ä¸ªå…¥å£ã€‚å¦‚æœæ¯æ¬¡éƒ½æ˜¯ä¸€æŠŠå¤§é”ï¼Œé‚£ä¸ç®¡ä»€ä¹ˆæ“ä½œéƒ½ä¼šå…ˆè·å–æ ¹èŠ‚ç‚¹å¹¶ä¸”é”ä½ï¼Œé‚£ç›´æ¥å°±ç¼–ç¨‹å•çº¿ç¨‹çš„äº†ã€‚\u003c/p\u003e\n\u003cp\u003eæ‰€ä»¥æ•´ä¸ªçš„\u003cstrong\u003eç“¶é¢ˆ\u003c/strong\u003eå°±æ˜¯æ ¹èŠ‚ç‚¹ä¸Šé”çš„æ—¶é—´å¤ªé•¿äº†ã€‚å½±å“äº†å¹¶å‘ã€‚æ‰€ä»¥èƒèŸ¹é”çš„ä¼˜åŠ¿å°±åœ¨äºï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eèƒ½å¤Ÿæ˜¾è‘—çš„å‡å°‘æ ¹ç»“ç‚¹ä¸Šé”çš„æ—¶é—´ï¼Œè®©æ›´å¤šçš„çº¿ç¨‹è¿›å…¥B+æ ‘è¿›è¡Œæ“ä½œ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003eæ›´ä¼˜çš„èƒèŸ¹é”æ‰§è¡Œç­–ç•¥\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eå½“å‰é‡Šæ”¾çš„ç­–ç•¥ä»ç„¶æ‹¥æœ‰å¾ˆå¤§çš„ä¼˜åŒ–ç©ºé—´ã€‚åœ¨åŸæ¥çš„ç­–ç•¥ä¸Šå†™æ¨¡å¼çš„æ—¶å€™ä¼šå¯¹æ ¹èŠ‚ç‚¹ä¸Šå†™é”ï¼ŒçŸ¥é“æ‰¾åˆ°ä¸€ä¸ªå®‰å…¨èŠ‚ç‚¹ä¹‹åæ‰ä¼šé‡Šæ”¾ï¼Œè¿™å°±å ç”¨äº†å¾ˆé•¿æ—¶é—´ï¼Œå¯¼è‡´æ•ˆç‡é™ä½ã€‚è¿™ç§ä¸åˆ†é’çº¢çš‚ç™½çš„ç›´æ¥ç»™å„ä¸ªèŠ‚ç‚¹ä¸Šå†™é”çš„è¡Œä¸ºç§°ä¹‹ä¸º\u003cstrong\u003eæ‚²è§‚é”\u003c/strong\u003eã€‚é¡¾åæ€ä¹‰ï¼Œæ‚²è§‚é”è¡¨ç¤ºè¿™ç§ç­–ç•¥å¯¹å¤šçº¿ç¨‹çš„æ‰§è¡Œéå¸¸çš„æ‚²è§‚ï¼Œè§‰å¾—æ¯ä¸ªé¡µéƒ½ä¼šè¢«ä¿®æ”¹ï¼Œå¿…é¡»éƒ½ä¸Šé”æ‰å®‰å¿ƒã€‚ä½†æ˜¯äº‹å®ä¸Šåœ¨å®é™…çš„åº”ç”¨è¿‡ç¨‹ä¸­è§¦å‘åˆ†è£‚æˆ–è€…åˆå¹¶å¹¶ä¸æ˜¯å¾ˆé¢‘ç¹ã€‚\u003c/p\u003e\n\u003cp\u003eæ‰€ä»¥å°±è¯ç”Ÿäº†ä¸€ç§æ›´ä¼˜çš„åŠ é”ç­–ç•¥\u003cstrong\u003eä¹è§‚é”\u003c/strong\u003eï¼Œåœ¨å†™æ¨¡å¼çš„æ—¶å€™å°±å¤§èƒ†çš„å‡è®¾ä»æ ¹èŠ‚ç‚¹åˆ°æœ€åçš„å¶å­èŠ‚ç‚¹éƒ½æ˜¯å®‰å…¨çš„ï¼Œç»™è·¯å¾„çš„é¡µéƒ½ä¸Šè¯»é”ï¼Œæœ€åçš„å¶å­èŠ‚ç‚¹æ‰ä¸Šå†™é”ã€‚å¦‚æœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‘ç°äº†æŸä¸ªèŠ‚ç‚¹è·Ÿå‡è®¾çš„ä¸ä¸€æ ·ï¼Œä¸æ˜¯å®‰å…¨çš„ï¼Œé‚£ä¹ˆä¹‹å‰çš„æ‰€æœ‰é”éƒ½é‡Šæ”¾ï¼Œå†é‡æ–°æŒ‰ç…§\u003cstrong\u003eæ‚²è§‚é”\u003c/strong\u003eçš„æ–¹å¼è¿›è¡Œæ“ä½œã€‚\u003c/p\u003e\n\u003cp\u003eè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåœ¨ç›¸è¾ƒäºæ‚²è§‚é”ä¹è§‚é”åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½æ”¹å–„æ ¹èŠ‚ç‚¹æ€»æ˜¯ä¸Šå†™é”å¯¼è‡´å¹¶å‘æ—¶è¯»å–æ•ˆç‡çš„é™ä½ã€‚\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯æˆ‘æœ¬äººè¿˜æ²¡æœ‰å®ç°ä¹è§‚é”ï¼Œä¿®æ”¹\u003ccode\u003eFindLeafPage()\u003c/code\u003eæˆ–è€…æ·»åŠ \u003ccode\u003eFindLeafPageHelper()\u003c/code\u003eåº”è¯¥éƒ½æ˜¯å¯ä»¥çš„ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch4 id=\"å…·ä½“å®ç°\"\u003eå…·ä½“å®ç°\u003c/h4\u003e\n\u003cp\u003e==GetValueï¼ˆï¼‰==\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207222907.png\"\u003e\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207223113.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¦‚ä¸Šå¦‚æ‰€ç¤ºï¼Œå½“è·å–åˆ°ä¸‹ä¸€ä¸ªè¯»é”çš„æ—¶å€™å°±é‡Šæ”¾çˆ¶èŠ‚ç‚¹çš„è¯»é”ï¼Œç„¶åæ¥ç€å¾ªç¯è¿™æ ·çš„æ“ä½œ\u003c/li\u003e\n\u003cli\u003eè¿™æ ·å­åƒèƒèŸ¹èµ°è·¯çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯è¿™ç§åŠ é”ç­–ç•¥çš„ç”±æ¥ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e==Insertï¼ˆï¼‰==\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207225033.png\"\u003e\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207225237.png\"\u003e\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207225451.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè¿˜æœ‰ä¸€ä¸ªå›¾æˆ‘æ‡’å¾—ç”»äº†ï¼Œpage4ä¹Ÿæ˜¯ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥page2ã€3ã€4.åœ¨è¿™é‡Œéƒ½ä¸èƒ½é‡Šæ”¾ã€‚\u003c/li\u003e\n\u003cli\u003eæ‰¾åˆ°ä¸€ä¸ªå®‰å…¨çš„èŠ‚ç‚¹ä¹‹åå¦‚ä½•å®‰å…¨æœ‰ä¾¿æ·çš„é‡Šæ”¾æ‰€æœ‰çˆ¶èŠ‚ç‚¹é“¾çš„é”å‘¢ï¼Ÿ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e==Removeï¼ˆï¼‰==\u003c/p\u003e\n\u003cp\u003eç§»é™¤å’Œä¸Šå›¾å¤§åŒå°å¼‚å•¦ï¼Œå°±æ˜¯åˆ¤æ–­å®‰å…¨çš„æ¡ä»¶ä¸ä¸€æ ·å•¦ã€‚æ³¨æ„ä¸€ä¸‹å°±å¥½äº†\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eTransactionã€äº‹åŠ¡\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eè¿™é‡Œå°±ç”¨åˆ°äº†æˆ‘åœ¨checkpoint1ä¸­æåˆ°çš„è¿™ä¸ªä¸œè¥¿[[CMU15-445 Project2-B+ Tree Index Checkpoint 1#^d53eec|å¯¹Transactionçš„è¯¦ç»†ä»‹ç»]],å¯ä»¥ç¿»çœ‹å‰æ–‡ã€‚\nå®ƒå¯ä»¥è·Ÿè¸ªè®°å½•æŸä¸ªçº¿ç¨‹ä¸Šçš„é”ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§é¡ºåºçš„ã€‚ä»ä¸Šåˆ°ä¸‹ã€‚ä¾¿äºè¿›è¡Œç»Ÿç­¹æ“ä½œã€‚\u003c/p\u003e\n\u003cp\u003eç”±äºè¶Šå¾€ä¸Špageè¶Šå¯†é›†ï¼Œç«äº‰è¶Šæ¿€çƒˆï¼Œåœ¨é‡Šæ”¾é”çš„æ—¶å€™å¯ä»¥ä¼˜å…ˆé‡Šæ”¾å¤„äºé¡¶éƒ¨çš„é”ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªå°ä¼˜åŒ–ğŸ¤£ã€‚\u003c/p\u003e\n\u003ch3 id=\"summary\"\u003eSummary\u003c/h3\u003e\n\u003cp\u003eæ•´ä¸ªcheckpoint2æƒ³è¾ƒäºcheckpoint1æ¥è¯´æˆ‘è§‰å¾—éœ€è¦æ³¨æ„çš„äº‹æƒ…æ›´å¤šã€‚ç‰¹åˆ«æ˜¯å¯¹æ ¹èŠ‚ç‚¹çš„åŠ é”æ—¶æœºçš„æŠŠæ¡ï¼Œå¾ˆé‡è¦çš„ã€‚éš¾åº¦æˆ‘è§‰å¾—æ˜¯æœ‰æå‡çš„ã€‚\u003c/p\u003e\n\u003cp\u003eå†™å®Œè¿™ä¸ªè®©æˆ‘ä½“ä¼šæœ€æ·±çš„æ˜¯ï¼Œä»£ç å†™å®Œæ•´ä¸ªå·¥ä½œå®Œæˆç™¾åˆ†ä¹‹20ï¼Œè·‘èµ·æ¥å¹¶ä¸”è¿‡æœ¬åœ°æµ‹è¯•å‹‰å¼ºç®—å®Œæˆä¸€åŠï¼Œçº¿ä¸Šæµ‹è¯•æ˜¯çœŸéš¾å•Šå•Šå•Šï¼Œæ¯æ¬¡å¡ç©éƒ½å›æ¥ä¸€ç‚¹ä¸€ç‚¹çœ‹logğŸ‘€ï¼Œçœ¼çªçš„æ¯”é»‘çŒ«è­¦é•¿è¿˜å¤§ã€‚\u003c/p\u003e\n\u003cp\u003eæœ€åé™„ä¸Šé€šè¿‡æˆªå›¾ã€‚\n\u003cimg alt=\"image.png|350\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207232212.png\"\u003e\n\u003cimg alt=\"image.png|775\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240207232250.png\"\u003e\u003c/p\u003e","title":"CMU15-445-Project #2 - B+ Tree Index Checkpoint 2"},{"content":"ä¸€äº›å·¥å…· BusTub B+Tree PrinterCMUå®˜æ–¹åœ¨çº¿çš„B+æ ‘çš„ç”Ÿæˆå·¥å…·ã€‚æˆ‘ä¸»è¦ç”¨æ¥ç»†èŠ‚å®ç°çš„æ—¶å€™è¿›è¡Œå‚è€ƒã€‚ JavaScript B+ TreeB+æ ‘æ’å…¥å’Œåˆ é™¤çš„åŠ¨æ€æ¼”ç¤ºã€‚ Graphviz Onlineå¯è§†åŒ–è‡ªå·±çš„æ ‘ã€‚åœ¨debugçš„æ—¶å€™ä¼šç”¨åˆ°ã€‚å°†ç”Ÿæˆçš„dotæ–‡ä»¶è½¬æ¢æˆsvgå›¾ç‰‡ã€‚ Log In | Gradescopeåœ¨çº¿è¯„æµ‹ç½‘ç«™,é‚€è¯·ç ï¼šPXWVR5ï¼Œ Project #2 - B+Tree | CMU 15-445/645 :: Intro to Database Systems (Fall 2022)æœ€é‡è¦çš„å½“ç„¶è¿˜æ˜¯è¯¾ç¨‹ç½‘ç«™äº† è¯¾ç¨‹çš„è§†é¢‘ï¼Œè¿˜æœ‰å¯¹åº”çš„æ•™æè¿˜æ˜¯æ¨èçœ‹ä¸€ä¸‹çš„ä¸Šé¢æœ‰å¾ˆå¤šå®ç°ç»†èŠ‚çš„ã€‚éå¸¸å€¼å¾—å‚è€ƒã€‚ å¦‚ä½•Debugè‡ªå·±çš„ğŸŒ³ å¤§è‡´ä¸Šå¯ä»¥åˆ†ä¸ºä¸¤ç§æ–¹å¼\nå¯è§†åŒ–çš„ç”¨è‡ªå¸¦çš„printerå°†æ ‘ç”Ÿæˆdotæ–‡ä»¶ç„¶åå¤åˆ¶åˆ°ä¸Šé¢çš„å¯è§†åŒ–ç½‘ç«™ã€‚ ç”±äºæœ¬é¡¹ç›®é‡‡ç”¨çš„æ˜¯cmakeæ„å»ºçš„ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨æµ‹è¯•æ–‡ä»¶ä¸­æ‰“ä¸Šæ–­ç‚¹ã€‚è¿›è¡Œè°ƒè¯•ã€‚ ==å¯è§†åŒ–è°ƒè¯•==\nåœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ„å»ºå’Œæ‰§è¡Œprinterã€‚\nâœ build git:(main) make b_plus_tree_printer -j2 // æ„å»ºprinter âœ build git:(main) ./bin/b_plus_tree_printer // æ‰§è¡Œprinter æ‰§è¡Œå®Œä¹‹åå°±ä¼šæœ‰ä»¥ä¸‹æç¤ºï¼š\næŒ‰ç…§è¿™ä¸ªæç¤ºå°±å¯ä»¥ç”Ÿæˆdotæ–‡ä»¶ï¼Œç„¶åå¤åˆ¶åˆ°ä¸Šè¿°çš„ç½‘ç«™è¿›è¡Œå¯è§†åŒ–ã€‚ï¼ˆå½“ä½ çœ‹åˆ°è‡ªå·±çš„æ ‘å‘ˆç°å‡ºæ¥çš„æ—¶å€™è¿˜æ˜¯éå¸¸æœ‰æˆå°±æ„Ÿçš„ğŸ˜ï¼‰\n==éå¯è§†åŒ–==\nå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›´æ¥æ‰“æ–­ç‚¹ï¼Œç„¶ååœ¨vscodeä¸­çš„cmakeæ’ä»¶ä¸­é€‰æ‹©è°ƒè¯•è¿›è¡Œdebugã€‚\nå®˜æ–¹è¿˜æä¾›äº†ä¸€ç§å¤§æ‰“logçš„æ–¹å¼è¿›è¡Œdebugï¼Œæˆ‘æ˜¯ä¸å¤ªä¹ æƒ¯è¿™ç§æ–¹å¼æ‰€ä»¥æ²¡æœ‰è¿›è¡Œå¾ˆæ·±å…¥çš„ç ”ç©¶ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±è¿›è¡Œäº†è§£ğŸ˜—ã€‚\nä¸¤ç§debugçš„æ–¹å¼æ˜¯ç›¸è¾…ç›¸æˆçš„ï¼Œåœ¨ä½ è¿‡ä¸äº†æœ¬åœ°æ ·ä¾‹çš„æ—¶å€™å¥½å¥½çš„ç”¨éå¯è§†åŒ–çš„æ–¹å¼è¿›è¡Œdebugï¼Œçº¿ä¸Šæ ·ä¾‹è¿‡ä¸äº†å¤§éƒ¨åˆ†åŸå› æ˜¯ç»†èŠ‚å¤„ç†ä¸Šå‡ºé—®é¢˜äº†ã€‚ç”¨å¯è§†åŒ–çš„æ–¹å¼ä¼šæ›´åŠ çš„ç›´è§‚ã€‚\nè¯·ä¸è¦å…¬å¼€ä»£ç ï¼Œå°Šé‡AndyåŠ³åŠ¨æˆæœ\næ¦‚è§ˆ Project2æ˜¯å®ç°B+æ ‘ç´¢å¼•ï¼Œæ•´ä¸ªprojectå¤§è‡´è¢«åˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†\ncheckpoint1ï¼šå®ç°ä¸€ä¸ªå•çº¿ç¨‹çš„b+æ ‘ã€‚ checkpoint2ï¼šå®ç°ä¸€ä¸ªå¤šçº¿ç¨‹çš„b+æ ‘ã€‚ å®éªŒä»£ç ä¸­ç»™å‡ºçš„è‡ªç”±å‘æŒ¥çš„ç©ºé—´éå¸¸çš„å¤§ï¼Œåªç»™å‡ºäº†Getvalue(),Insert(),Remove()è¿™ä¸‰ä¸ªå‡½æ•°çš„æ¥å£ï¼Œå‰©ä¸‹çš„æ‰€æœ‰çš„å®ç°éƒ½éå¸¸çš„è‡ªç”±ï¼Œæ•´ä¸ªå®éªŒå®ç°çš„è¿‡ç¨‹å°±åƒä¸€ä¸ªé»‘ç›’ä¸€æ ·ï¼Œåªåœ¨ä¹è¾“å…¥å’Œè¾“å‡ºã€‚\næœ¬å®éªŒéœ€è¦å®Œæˆb+ indexéƒ¨åˆ†ï¼Œb+æ ‘ä¸­çš„é¡µï¼ˆpageï¼‰éƒ½éœ€è¦ä»ä¸Šä¸€ä¸ªå®éªŒä¸­å®ç°çš„buffer poolä¸­å–ã€‚\nCheckpoint-1 Task #1 - B+Tree Pages éœ€è¦å®Œæˆä»¥ä¸‹ä¸‰ä¸ªpageï¼Œä¸»è¦éƒ½æ˜¯ä¸€äº›getterå’Œsetterçš„å‡½æ•°ï¼Œé‡åœ¨ç†è§£å„éƒ¨åˆ†çš„ç»„æˆã€‚\nB+Tree Parent Page B+Tree Internal Page B+Tree Leaf Page å…¶ä¸­parentPageæ˜¯internal pageå’Œleaf pageçš„çˆ¶ç±»ã€‚æˆ‘æ›´å€¾å‘äºæŠŠè¿™å‡ ä¸ªpageç±»å‹ç†è§£ä¸º ä»buffer poolä¸­å–å›æ¥çš„Pageçš„ä¸åŒè§£é‡Šå½¢å¼ã€‚Pageè¿˜æ˜¯é‚£ä¸ªPageã€‚ä¸»è¦å°±æ˜¯åœ¨äºä½ å¦‚ä½•å»è§£é‡Šå®ƒçš„ç»„æˆéƒ¨åˆ†ã€‚\n==Pageçš„ç»„æˆ==\né¦–å…ˆå›é¡¾ä¸€ä¸‹åœ¨P1ä¸­å°±å·²ç»æ¥è§¦åˆ°çš„Pageã€‚è¿™ä¸ªPageæˆ‘ç†è§£ä¸ºæ•°æ®åœ¨diskä¸Šçš„å­˜å‚¨å•ä½ã€‚ç›¸å½“äºä¸€ä¸ªè®¡é‡æ¦‚å¿µã€‚\nå¯ä»¥çœ‹å‡ºè¿™ä¸ªdata_æ•°ç»„çš„å¤§å°ä¸º4096Bå³4KBã€‚è¿™ä¸ªå¤§å°æ˜¯å®šä¹‰çš„å¸¸é‡BUSTUB_PAGE_SIZEå†³å®šçš„ã€‚\næœ¬é¡¹ç›®çš„æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯åœ¨data_ä¸­çš„ã€‚\u0026mdash;\u0026ndash;æˆ‘ç†è§£çš„å°±æ˜¯å¯¹dataæ•°ç»„ä¸­çš„æ•°æ®è§£é‡Šæ–¹å¼ä¸åŒã€‚\n==BPlusTreePage==\nè¿™æ˜¯internal pageå’Œleaf pageçš„çˆ¶ç±»b_plus_tree_pageã€‚\nIndexPageType page_type_; // leaf or internal. 4 Byte lsn_t lsn_ // temporarily unused. 4 Byte int size_; // tree page data size(not in byte, in count). 4 Byte int max_size_; // tree page data max size(not in byte, in count). 4 Byte page_id_t parent_page_id_; // 4 Byte page_id_t page_id_; // 4 Byte // 24 Byte in total ä»¥ä¸Šéƒ¨åˆ†ç»„æˆäº†ä¸¤ç§èŠ‚ç‚¹çš„å…¬å…±éƒ¨åˆ†ï¼Œå…±å æ®24Bï¼Œè¿˜å‰©ä¸‹4KB-24Bçš„ç©ºé—´ï¼Œä½†æ˜¯å¦‚ä½•ä½¿ç”¨è¿™å‰©ä¸‹çš„ç©ºé—´å‘¢ï¼Ÿ å¯ä»¥ä»ä¸‹é¢çš„è¿™ä¸ªflexibleæ•°ç»„æ‰¾åˆ°ç­”æ¡ˆã€‚è¿™ä¸ªå¤§ä½¬è§£é‡Šçš„æ¯”è¾ƒçš„è¯¦ç»†ï¼Œæˆ‘ä¹Ÿæ˜¯åœ¨è¿™çœ‹åˆ°çš„ã€‚åšä¸ªæ•°æ®åº“ï¼š2022 CMU15-445 Project2 B+Tree Index - çŸ¥ä¹\nä¼—æ‰€å‘¨çŸ¥ï¼Œæ•°æ®åœ¨æ•°ç»„ä¸­çš„æ’åˆ—æ˜¯è¿ç»­çš„ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡ä¸€ç›´å‘ä¸‹è¿›è¡Œè®¿é—®ï¼Œå°±æ˜¯é€šè¿‡åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ä½¿ç”¨å¤´æŒ‡é’ˆåŠ ä¸Šåç§»é‡å°±åˆ°å‡†ç¡®çš„æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„é‚£ä¸ªæ•°æ®ã€‚\nå› æ­¤æˆ‘è®¤ä¸ºè¿™ä¸ªarray_æ•°ç»„ç›¸å½“äºæä¾›äº†ä¸€ä¸ªä½¿ç”¨å‰©ä¸‹ç©ºé—´çš„ä¸€ä¸ªå…¥å£ï¼Œæœ‰ä¸ªè¿™ä¸ªé—¨æŠŠæ‰‹å°±å¯ä»¥è½»æ¾çš„ä½¿ç”¨å‰©ä¸‹çš„ç©ºé—´ã€‚ å¤§è‡´å¯ä»¥è®¤ä¸ºæ•°æ®å°±æ˜¯ä»¥ä¸Šçš„è¿™ç§å½¢å¼ã€‚æ¯ä¸€ä¸ªå°æ–¹æ ¼éƒ½æ˜¯ä¸€ä¸ªkvå¯¹ã€‚\nä»Šå¤©æˆ‘åœ¨ç½‘ä¸Šå†²æµªçš„æ—¶å€™å‘ç°äº†æ›´åŠ è¯¦ç»†çš„å…³äºæŸ”æ€§æ•°ç»„çš„ä¿¡æ¯ã€‚ æˆªå›¾è‡ªCè¯­è¨€ç»“æ„ä½“é‡Œçš„æˆå‘˜æ•°ç»„å’ŒæŒ‡é’ˆ | é…· å£³ - CoolShellã€‚ åŒæ—¶è¿™ç¯‡æ–‡ç« ä¹Ÿè´´å‡ºäº†æ–‡ç« å‡ºå¤„Zero Length (Using the GNU Compiler Collection (GCC))ã€‚\nç°åœ¨ç»†ç»†æƒ³æ¥è¿™ç¯‡åšå®¢æˆ‘å¾ˆæ—©å…¶å®å°±çœ‹åˆ°è¿‡ï¼Œä½†æ˜¯åœ¨å½“æ—¶æˆ‘æ€»è§‰å¾—è¿™äº›éƒ½æ˜¯ä¸€äº›è¯­æ³•ç³–ç½¢äº†ï¼Œæ²¡æƒ³åˆ°è‡ªå·±é”™å¤±äº†å¾ˆå¤šå­¦ä¹ çš„æœºä¼šã€‚ğŸ¤¤\n==Internalpage==\nä¸Šå›¾ä¸­çº¢è‰²çš„å°±æ˜¯internalpageã€‚ æˆ‘ä»¬å‘ç°ç¬¬ä¸€ä¸ªkeyæ˜¯ç©ºç€çš„ï¼Œä½†æ˜¯valueæŒ‡å‘äº†å°äºvalueï¼ˆ1ï¼‰çš„pageã€‚å…¶å®internalçš„valueå­˜æ”¾çš„æ˜¯pageidã€‚ æ‰€ä»¥internalpageçš„ç¬¬ä¸€ä¸ªkeyè¦ç½®ç©ºå¤„ç†ï¼Œå…¶å®æœ€åä¸€ä¸ªç½®ç©ºä¹Ÿå¯ä»¥äº†ï¼Œåªè¦èƒ½è‡ªæ´½å°±å¯ä»¥äº†ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œåªå­˜æ”¾å­©å­èŠ‚ç‚¹çš„pageIdï¼Œæ‰¾åˆ°è¿™ä¸ªidä¹‹åå–buffer poolé‡Œå– ==LeafPage==\nåŸºæœ¬ç»„æˆå’Œè¿™ä¸ªinternalpageæ˜¯ä¸€æ ·çš„ï¼Œå¤šäº†ä¸€ä¸ªnext_page_id. è¿™ä¸ªnext_page_idç”¨ä¸æŒ‡å‘ç›¸é‚»çš„å¶å­èŠ‚ç‚¹ï¼Œä»ä¸Šå›¾ä¸­ç»¿è‰²å¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆå°±èƒ½çœ‹å‡ºæ¥ã€‚ è¿™ä¸ªçš„ä¸»è¦ä½œç”¨å°±æ˜¯èƒ½å¤Ÿè¿›è¡Œéå†ã€‚\néœ€è¦è¯´æ˜çš„ä¸€ç‚¹æ˜¯ï¼šåœ¨å¶å­èŠ‚ç‚¹ä¸­keyæ˜¯ç´¢å¼•ï¼Œvalueæ˜¯recordIdï¼Œè¿™ç§å½¢å¼ä¹Ÿå°±æ˜¯äºŒçº§ç´¢å¼• åœ¨æ•°æ®åº“ä¸­éœ€è¦æ‹¿åˆ°è¿™ä¸ªrecodeIdä¹‹åè¿”å›è¡¨ä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚å¤§å¤§åŠ å¿«æŸ¥è¯¢çš„é€Ÿåº¦ã€‚\næˆ‘è§‰å¾—äºŒçº§ç´¢å¼•æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜åŠ¿ï¼š\næ›´æ–°çš„ä»£ä»·å¾ˆä½ï¼šå› ä¸ºvalueéƒ½åªæ˜¯ä¸€äº›idæ‰€ä»¥å å¾—ç©ºé—´å¾ˆå°ï¼Œå¤„ç†èµ·æ¥å¼€é”€è‡ªç„¶å°±å°äº†ã€‚ ä¸€å¼ è¡¨èƒ½å¤Ÿç»„ç»‡å¤šä¸ªç´¢å¼•ï¼šæ›´æ¢ä¸åŒçš„keyå°±èƒ½ç»„ç»‡èµ·æ¥ä¸€ä¸ªç´¢å¼•ã€‚ Task1çš„å†…å®¹å¾ˆç®€å•ï¼ŒåŸºæœ¬å°±ä¸Šè¿°è¿™äº›ï¼Œä¸»è¦æ˜¯å¼„æ¸…æ¥špageçš„ç»„æˆï¼Œå’Œæ¡†æ¶çš„æ„å»ºã€‚è¢«æŠ˜ç£¨äº†è¿™ä¹ˆå¤šå¤©çš„æˆ‘çœŸå¿ƒå»ºè®®å¤šç”¨æä¾›çš„å·¥å…·ç”»ä¸€äº›æ ‘å…ˆä¸è¦ç€æ€¥åŠ¨æ‰‹ï¼Œæƒ³æ¸…æ¥šæ¯ä¸ªéƒ¨åˆ†çš„ç»„æˆå’Œä½œç”¨å†ä¸‹æ‰‹ä¹Ÿä¸è¿Ÿï¼Œæ­£æ‰€è°“ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ã€‚\n==è¡¥å……ä¸€ç‚¹==\nèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰ ä¸€è¨€ä»¥è”½åŠï¼šèšç°‡ç´¢å¼•çš„valueå°±æ˜¯ä½ æƒ³è¦æ‰¾çš„æ•°æ®æˆ–è€…æ˜¯æ•°æ®æ‰€åœ¨çš„é¡µæœ¬èº«ï¼Œéèšç°‡ç´¢å¼•å­˜æ”¾çš„ç›¸å½“äºæ˜¯ä½ æƒ³è¦çš„æ•°æ®æ‰€åœ¨ä½ç½®çš„å¿«é€ŸæŒ‡é’ˆå¸®åŠ©ä½ å¿«é€Ÿå®šä½ã€‚\nTask #2 - B+Tree Data Structure task2æ˜¯checkpoint1çš„é‡å¤´æˆï¼Œéå¸¸çš„æœ‰æ„æ€ã€‚ æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š\nè¦æ±‚æ­¤b+æ ‘çš„ç´¢å¼•æ˜¯å”¯ä¸€çš„ï¼Œä¸æ”¯æŒé‡å¤çš„æ’å…¥ã€‚ UpdateRootPageIdåœ¨root_page_idå‘ç”Ÿæ”¹å˜çš„æ—¶å€™éœ€è¦è°ƒç”¨å·²ç»å®ç°å¥½çš„è¿™ä¸ªå‡½æ•°ï¼Œä¿è¯æ ‘çš„æŒä¹…åŒ–ã€‚ åœ¨å®ç°çš„æ—¶å€™ä¸€å®šå¤šå¤šè€ƒè™‘å®ç°çš„ç»†èŠ‚ï¼Œæ¯”å¦‚æ¯ç§èŠ‚ç‚¹çš„æœ€å¤§æœ€å°å€¼ï¼Œæ’å…¥åçš„é”®/å€¼å¯¹çš„æ•°é‡ç­‰äºå¶èŠ‚ç‚¹çš„max_sizeï¼Œæ’å…¥å‰çš„å­èŠ‚ç‚¹çš„æ•°é‡ç­‰äºå†…éƒ¨èŠ‚ç‚¹çš„max_sizeã€‚ ä¸‹é¢æŒ‰ç…§å‡½æ•°çš„é¡ºåºè¿›è¡Œä»‹ç»ã€‚ åœ¨ä»‹ç»å‡½æ•°ä¹‹å‰æˆ‘æƒ³è¯´æ˜ä¸€ä¸‹Transactionè¿™ä¸ªç±»çš„ä½œç”¨ã€‚é¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªTransactionè¢«ç¿»è¯‘ä¸ºäº‹åŠ¡ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­å¯¹è¿™ä¸ªäº‹åŠ¡æœ‰ç€è¯¦ç»†çš„ä»‹ç»ã€‚[[æŸ¥è¯¢çš„å¤„ç†å’Œä¼˜åŒ–]]ã€‚ åœ¨è¿™ä¸ªç±»ä¸­å®ç°äº†å¾ˆå¤šå‡½æ•°ï¼Œå¯ä»¥æŠŠéœ€è¦å¤„ç†çš„pageæ”¾åœ¨å®åŠ¡ä¸­ç­‰ç»“æŸäº†è¿›è¡Œç»Ÿä¸€çš„å¤„ç†ã€‚å› ä¸ºåœ¨å‡½æ•°ä¸­æ¶‰åŠåˆ°å¾ˆå¤šçš„fetchå’Œunpinï¼Œè€Œä¸”å‡½æ•°è¿˜æœ‰é€’å½’åµŒå¥—ï¼Œå¤„ç†èµ·æ¥æ˜¯éå¸¸çš„éº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘å»ºè®®ç›´æ¥å°è¯•ä½¿ç”¨transactionï¼Œåæ­£åé¢ä¹Ÿè¦ç”¨ã€‚ ^d53eec\nGetValueï¼ˆï¼‰ ==GetValueï¼ˆï¼‰==\nå†™åˆ°è¿™é‡Œçš„æ—¶å€™ç†åº”å¯¹b+æ ‘çš„ç»“æ„éå¸¸çš„äº†è§£ï¼Œå…¶å®ä¹Ÿå°±æ˜¯ä¸¤ç§èŠ‚ç‚¹ï¼Œä¸€ç§æ˜¯internalï¼Œä¸€ç§æ˜¯leafï¼Œä»rootèŠ‚ç‚¹å¼€å§‹å¯»æ‰¾æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸­æœ€åä¸€ä¸ª\u0026lt;=è¾“å…¥keyçš„å€¼ã€‚ç„¶åæ‰¾åˆ°keyæ‰€åœ¨çš„leafèŠ‚ç‚¹ï¼Œä»å‰å‘åéå†ï¼Œæ‰¾åˆ°æƒ³è¦çš„å€¼ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿç¤ºæ„å›¾ğŸ‘‡ã€‚ å…¶å®æ— è®ºæˆ‘ä»¬æ˜¯æŸ¥æ‰¾ï¼Œæ’å…¥ï¼Œè¿˜æ˜¯åˆ é™¤ï¼Œé¦–å…ˆéƒ½å¿…é¡»æ‰¾åˆ°keyæ‰€åœ¨çš„leafèŠ‚ç‚¹ã€‚ç”±æ­¤å¯ä»¥å°†ä¸Šé¢è¿™ä¸ªå¯»æ‰¾keyæ‰€åœ¨çš„leafèŠ‚ç‚¹çš„è¿‡ç¨‹å°è£…å‡ºä¸€ä¸ªä½¿ç”¨é¢‘ç‡æé«˜è€Œä¸”éå¸¸é‡è¦çš„å‡½æ•°ï¼šFindLeafPage()ã€‚æˆ‘ä»¬ä»ä¹¦ä¸Šç»™å‡ºçš„ä¼ªä»£ç å’Œä¸Šè¿°æ¨¡æ‹Ÿè¿‡ç¨‹å¯¹ç…§åˆ†æã€‚\nè™½ç„¶è¯´æˆ‘ä»¬è¦æ‰¾çš„æ˜¯æœ€åä¸€ä¸ª\u0026lt;=è¾“å…¥keyçš„å€¼ï¼Œä½†æ˜¯åœ¨å…·ä½“çš„ä¼ªä»£ç å®ç°ä¸­ç¡®å®å¯»æ‰¾ç¬¬ä¸€ä¸ª\u0026gt;=è¾“å…¥keyçš„å€¼ï¼Œå¹¶è¿›è¡Œåˆ†ç±»è®¨è®ºã€‚\nauto next_page = buffer_pool_manager_-\u0026gt;FetchPage(curr_internal-\u0026gt;LookUp(key, comparator_)); auto target=std::lower_bound(array_+1,array_+GetSize(),key,[\u0026amp;keyComparator](auto const\u0026amp;pair,auto k){return keyComparator(pair.first,k)\u0026lt;0; }); if (target==array_+GetSize()) { return ValueAt(GetSize()-1); // è¾“å…¥çš„keyæ¯”æ‰€æœ‰çš„å€¼éƒ½å¤§ï¼Œè¿”å›æœ€åä¸€ä¸ª } if (keyComparator(target-\u0026gt;first,key)==0) { return target-\u0026gt;second; //æ‰¾åˆ°çš„targetçš„keyå’Œè¾“å…¥çš„keyç›¸åŒå°±è¿”å›targetçš„value } return std::prev(target)-\u0026gt;second; // æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªå¤§äºkeyçš„targetï¼Œè¿”å›å‰ä¸€ä¸ªçš„valueã€‚ LookUpè¿”å›çš„å°±æ˜¯page_id,å‰é¢æˆ‘ä»¬ä¹Ÿæåˆ°è¿‡ï¼ŒinternalèŠ‚ç‚¹çš„valueå°±æ˜¯page_id. è¿™é‡Œç”¨åˆ°äº†lower_boundï¼ˆï¼‰å‡½æ•°ï¼Œæ¯”è‡ªå·±å®ç°äºŒåˆ†æŸ¥æ‰¾ä¼šæ–¹ä¾¿ä¸€äº›ã€‚\nä½†æ˜¯è¿™ä¸ªlower_boundå‡½æ•°ä¼ å…¥äº†keycompareterï¼ˆï¼‰çš„æ¯”è¾ƒæ–¹æ³•ï¼Œè¿›è¡Œäº†å›è°ƒå‡½æ•°çš„æ”¹é€ ï¼Œä½¿ç”¨ç±»å®šä¹‰çš„æ¯”è¾ƒè§„åˆ™ã€‚ä¸æ˜¯ç®€å•çš„æ¯”å¤§å°ã€‚\nç°åœ¨æ‰¾åˆ°äº†keyæ‰€åœ¨çš„pageæˆ‘ä»¬è¯¥å¦‚ä½•ä½¿ç”¨è¿™ä¸ªpageå‘¢ï¼Ÿ\nauto leaf_page = reinterpret_cast\u0026lt;LeafPage *\u0026gt;(page-\u0026gt;GetData()); é€šè¿‡reinterpret_castå°†pageè§£é‡Šä¸ºLeafPageç±»å‹ã€‚æ¥ä¾›æˆ‘ä»¬è¿›è¡Œä½¿ç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™ç§æ–¹å¼éå¸¸çš„ä¸å®‰å…¨ï¼Œåªæ˜¯å°†åŒæ ·çš„æ•°æ®è¿›è¡Œäº†ä¸åŒçš„è§£é‡Šã€‚åªæœ‰åœ¨æˆ‘ä»¬éå¸¸æ¸…æ¥šä¸¤è€…ä¹‹é—´çš„å…³ç³»çš„æ—¶å€™ä½¿ç”¨æ‰ä¸å®¹æ˜“å‡ºé”™ã€‚\næ‰¾åˆ°LeafPageååŒæ ·ä½¿ç”¨ä¸Šè¿°æ”¹é€ è¿‡åçš„çš„lower_bound()å‡½æ•°è¿›è¡ŒæŸ¥æ‰¾keyğŸ˜€ã€‚\n==è®°å¾—UnpinPage==\nåœ¨ä½¿ç”¨å®Œpageä¹‹åä¸€å®šè®°å¾—unpinä¸ç„¶çš„è¯é«˜å¼ºåº¦ä½¿ç”¨è¿‡åå†…å­˜ä¼šä¸è¶³ã€‚ æˆ‘çš„æ¯”è¾ƒå»ºè®®è¿˜æ˜¯ä¹‹å‰æåˆ°çš„transactionï¼Œè¿›è¡Œç»Ÿç­¹å¤„ç†ï¼Œå°‘æ­»ç‚¹è„‘ç»†èƒã€‚\nInsertï¼ˆï¼‰ ç›¸è¾ƒäºä¸Šä¸€ä¸ªå‡½æ•°è€Œè¨€ï¼Œinsertï¼ˆï¼‰çš„é€»è¾‘å°±ç›¸å¯¹è€Œè¨€è¦å¤æ‚ä¸€äº›äº†ã€‚\n==Insertï¼ˆï¼‰== æ’å…¥ä¸€ä¸ªkvå¯¹ç”±å°‘åˆ°å¤šçš„æƒ…å†µä¸€ä¸ªä¸€ä¸ªè¿›è¡Œæ¢³ç†\nåˆšå¼€å§‹æ ‘æ˜¯ç©ºçš„ï¼šéœ€è¦æ–°å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚ æœ‰ç©ºé—´èƒ½å¤Ÿç›´æ¥æ’å…¥ æ’å…¥ä¹‹åpageSize=leafMaxSizeï¼Œéœ€è¦è¿›è¡Œåˆ†è£‚ï¼Œåˆ†è£‚ä¹‹åå°†æ–°çš„pageæ’å…¥åˆ°çˆ¶èŠ‚ç‚¹ä¸­ã€‚ æœ‰é‡å¤çš„æ’å…¥ï¼Œç›´æ¥è¿”å›ã€‚ ç°åœ¨å†çœ‹ä¼ªä»£ç å¤§æ¦‚çš„æƒ…å†µä¹Ÿæ˜¯è¿™å‡ ç§ã€‚ å¯¹ç…§ä»£ç å†åˆ†æä¸€ä¸‹ï¼š\nINDEX_TEMPLATE_ARGUMENTS auto BPLUSTREE_TYPE::Insert(const KeyType \u0026amp;key, const ValueType \u0026amp;value, Transaction *transaction) -\u0026gt; bool { if (IsEmpty()) { StartNewTree(key, value); // è¿™ä¸ªå¯¹åº”ç©ºæ ‘çš„æƒ…å†µï¼Œ return true; } return InsertIntoLeaf(key, value, transaction); // å‰©ä¸‹çš„æ‰€æœ‰æƒ…å†µéƒ½åœ¨è¿™å¤„ç† } ä¹¦ä¸Šç»™çš„ä¼ªä»£ç æ˜¯æ’å…¥ä¹‹å‰ä¸(leaf_max_size-1)è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘åœ¨å¤„ç†çš„æ—¶å€™æ˜¯æ’å…¥ä¹‹åä¸leaf_max_sizeè¿›è¡Œæ¯”è¾ƒã€‚\nâš ï¸ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯LeafPageå’ŒInternalPageçš„åˆ†è£‚æ¡ä»¶å¹¶ä¸ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´leafpageä¸­æœ€å¤šæœ‰(leaf_max_size-1)ä¸ªkvå¯¹ï¼Œè€Œinternalä¸­å¯ä»¥æœ‰internal_max_sizeä¸ªkvå¯¹ã€‚ ä¸¤ä¸ªçš„max_sizeéƒ½æ˜¯5ï¼Œä½†æ˜¯æœ€å¤šçš„kvå¯¹ç¡®æ˜¯ä¸ä¸€æ ·çš„ã€‚\n==InsertIntoLeaf()==\nauto leaf_page = reinterpret_cast\u0026lt;LeafPage *\u0026gt;(page-\u0026gt;GetData()); int pre_size = leaf_page-\u0026gt;GetSize(); int curr_size = leaf_page-\u0026gt;Insert(key, valueType, comparator_); if (pre_size == curr_size) { // è¿™æ˜¯æœ‰é‡å¤çš„èŠ‚ç‚¹ç›´æ¥è¿”å› Unpin(transaction, I); return false; } if (curr_size == leaf_max_size_) { // æ’å…¥ä¹‹åç­‰äºå¶å­èŠ‚ç‚¹çš„æœ€å¤§å€¼é‚£ä¹ˆå°±è¿›è¡Œæ„‰å¿«çš„åˆ†è£‚å§ã€‚ page_id_t new_page_leaf_id; auto new_leaf_node_page = buffer_pool_manager_-NewPage(\u0026amp;new_page_leaf_id); auto new_leaf = reinterpret_cast\u0026lt;LeafPage *\u0026gt;(new_leaf_node_page-\u0026gt;GetData()); new_leaf-\u0026gt;Init(new_page_leaf_id, INVALID_PAGE_ID, leaf_max_size_); leaf_page-\u0026gt;Split(new_leaf_node_page); InsertIntoParent(page, new_leaf-\u0026gt;KeyAt(0), new_leaf_node_page, transaction); } åˆ°è¿™é‡Œæ‰€æœ‰çš„æ’å…¥çš„æƒ…å†µå°±å·²ç»è€ƒè™‘å®Œå…¨äº†ï¼Œä½†æ˜¯åˆ†è£‚ä¹‹åéœ€è¦å°†æ–°åˆ†è£‚çš„é¡µæ’å…¥åˆ°çˆ¶èŠ‚ç‚¹ä¸­ï¼Œæ’å…¥åˆ°çˆ¶èŠ‚ç‚¹ä¸­ä¹‹ååˆæ¶‰åŠåˆ°çˆ¶èŠ‚ç‚¹åˆ†è£‚çš„é—®é¢˜ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªé€’å½’åµŒå¥—äº†\n==InsertIntoParent()==\nä»”ç»†çœ‹ä¼ªä»£ç çš„å†™æ³•ï¼ŒåŸºæœ¬æ˜¯æŒ‰ç…§ä¼ªä»£ç ä¸€æ­¥æ­¥å†™æˆçš„ã€‚\nINDEX_TEMPLATE_ARGUMENTS auto BPLUSTREE_TYPE::InsertIntoParent(Page *old_leaf, const KeyType \u0026amp;key, Page *new_leaf, Transaction *transaction)-\u0026gt; void{ // å¦‚æœåŸé¡µæ˜¯æ ¹èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ–°å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå°†æ–°æ—§èŠ‚ç‚¹æ’å…¥åˆ°æ–°çš„æ ¹èŠ‚ç‚¹ä¸­ï¼Œå¹¶æ›´æ–°èŠ‚ç‚¹ ifï¼ˆold_leaf-\u0026gt;pageID==root_page_idï¼‰{ //æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼ŒæŠŠä¸¤ä¸ªéƒ½æ’å…¥ä¹‹åæ›´æ–°å„è‡ªçš„æŒ‡é’ˆ ps.è¿›åˆ°è¿™ä¸ªå‡½æ•°çš„æ—¶å€™è¯´æ˜æ ¹èŠ‚ç‚¹å·²ç»æ»¡äº†ï¼Œæ‰€ä»¥ç›´æ¥åˆ›ä¸€ä¸ªæ–°çš„å°±è¡Œäº†ã€‚ } ifï¼ˆparent_internal-\u0026gt;GetSize() \u0026lt; parent_internal-\u0026gt;GetMaxSize()ï¼‰{ // çˆ¶èŠ‚ç‚¹çš„ç©ºé—´æ˜¯å¤Ÿçš„ï¼Œç›´æ¥æ’å…¥å°±è¡Œäº† } // å‰©ä¸‹çš„è‡ªç„¶å°±æ˜¯ç©ºé—´ä¸å¤Ÿéœ€è¦è¿›è¡Œçˆ¶èŠ‚ç‚¹åˆ†è£‚çš„æƒ…å†µ ..... parent_internal-\u0026gt;Split(key, new_leaf, new_parent_page, comparator_, buffer_pool_manager_); ...... InsertIntoParent(parent_page, new_parent_internal-\u0026gt;KeyAt(0), new_parent_page, transaction); ...... } âš ï¸ internalPageåœ¨åˆ†è£‚çš„æ—¶å€™å°½é‡åˆ›å»ºä¸€ä¸ªtmpç©ºé—´è¿›è¡Œæ’å…¥å’Œé‡æ–°çš„åˆ†é…ï¼Œåœ¨æœ¬å®éªŒä¸­ç›´æ¥åœ¨åŸæ¥çš„é¡µä¸Šæ’å…¥å’Œåˆ†é…é¡µæ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœmaxsizeçš„å¤§å°å¾ˆæé™çš„è¯ï¼Œæ’å…¥ä¸€ä¸ªkvå¯¹å¯èƒ½ä¼šå®¹ä¸ä¸‹ï¼Œå‘ç”Ÿé”™è¯¯ã€‚\nRemoveï¼ˆï¼‰ removeï¼ˆï¼‰å‡½æ•°çš„é€»è¾‘ç›¸è¾ƒäºå‰ä¸¤ä¸ªåˆ™æ˜¯å¤æ‚éå¸¸å¤šçš„ï¼Œä½†æ˜¯æŒ‰ç…§ä¼ªä»£ç æŒ‰å›¾ç´¢éª¥ï¼Œä¸€æ­¥ä¸€æ­¥æ¥ï¼Œæ˜¯èƒ½å¤Ÿå®Œç¾å®ç°çš„ã€‚ auto brother_node = reinterpret_cast\u0026lt;BPlusTreePage *\u0026gt;(brother_page-\u0026gt;GetData()); if (brother_node-\u0026gt;GetSize() + btree_page-\u0026gt;GetSize() \u0026lt;= (btree_page-\u0026gt;IsLeafPage() ? leaf_max_size_ - 1 : internal_max_size_)) { if (is_pre) { std::swap(leaf_page, brother_page); } Coalesce(leaf_page, brother_page, parent_key, transaction); DeleteEntry(parent_page, parent_key, transaction); } else { Redistribute(leaf_page, brother_page, parent_page, parent_key, is_pre, transaction); } ==DeleteEntry()==\nå¤§è‡´æ¢³ç†ä¸€ä¸‹æ€è·¯ï¼š\né¦–å…ˆæ‰¾åˆ°é¡µä¹‹åè‡ªç„¶æ˜¯åˆ é™¤ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯leafå’Œinternalçš„ç»„æˆç•¥æœ‰å·®å¼‚ï¼Œéœ€è¦åˆ†åˆ«è¿›è¡Œå¤„ç† å¦‚æœæ‰€åœ¨é¡µæ˜¯æ ¹èŠ‚ç‚¹è€Œä¸”åªå‰©ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹éœ€è¦è¿›è¡Œé¢å¤–çš„Adjustrootï¼ˆï¼‰å‡½æ•°è¿›è¡Œæ“ä½œã€‚ åˆ é™¤ä¹‹åå‘ç°kvå¯¹çš„æ•°é‡å°äºè§„å®šçš„MinSize(),é‚£ä¹ˆè¿›è¡Œåˆ†ç±»è®¨è®º å’Œå…„å¼ŸèŠ‚ç‚¹åˆèµ·æ¥Coalesce()çš„å¤§å°æ²¡æœ‰è¶…è¿‡maxSizeï¼Œä½†æ˜¯ä¸åŒç±»å‹çš„èŠ‚ç‚¹maxSizeè®¡é‡æ–¹å¼ä¸åŒï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå‘ç‚¹,é‚£å°±å°†ä¸¤ä¸ªèŠ‚ç‚¹åˆå¹¶ï¼Œä½†æ˜¯æœ€åè®°å¾—æŠŠè¢«åˆå¹¶çš„keyä»çˆ¶èŠ‚ç‚¹ä¸­åˆ é™¤ å’Œå…„å¼ŸèŠ‚ç‚¹åˆèµ·æ¥çš„å¤§å°è¶…è¿‡äº†maxSizeï¼Œé‚£ä¹ˆéœ€è¦Redistribute(),ä»å…„å¼ŸèŠ‚ç‚¹ä¸­åè°ƒä¸€ä¸ªè¿‡æ¥ã€‚è¿™é‡Œåˆ†æˆå››ç§æƒ…å†µï¼Œæ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹ï¼Œä»¥åŠå…„å¼ŸèŠ‚ç‚¹åœ¨å‰åœ¨ååˆ†æˆäº†å››ç§æƒ…å†µ âš ï¸éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œroot page å¹¶ä¸å— min size çš„é™åˆ¶ã€‚ä½†å¦‚æœ root page è¢«åˆ åˆ° size åªå‰© 1ï¼Œå³åªæœ‰ä¸€ä¸ª child page çš„æ—¶å€™ï¼Œåº”å°†æ­¤ child page è®¾ç½®ä¸ºæ–°çš„ root pageã€‚\nè¿˜æœ‰ä¸¤ç§ç±»çš„pageè®¡ç®—maxSizeçš„é€»è¾‘ä¸å¤ªä¸€æ ·éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚\nå¦å¤–ï¼Œåœ¨åˆå¹¶æ—¶ï¼Œä¸¤ä¸ª page åˆå¹¶æˆä¸€ä¸ª pageï¼Œå¦ä¸€ä¸ª page åº”è¯¥åˆ é™¤ï¼Œé‡Šæ”¾èµ„æºã€‚åˆ é™¤ page æ—¶ï¼Œä»æ˜¯è°ƒç”¨ buffer pool çš„Â DeletePage()Â å‡½æ•°ã€‚\n==AdjustRootï¼ˆï¼‰== æ ¹èŠ‚ç‚¹åªå‰©ä¸€ä¸ªå­èŠ‚ç‚¹çš„æ—¶å€™å°å°çš„è°ƒæ•´ä¸€ä¸‹ã€‚\n==Coalesce()==\nè¿˜æ˜¯è¦åŒºåˆ†æ˜¯å¦æ˜¯leafPageï¼Œå¤„ç†æ–¹å¼ä¸å¤ªä¸€æ ·\nå¦‚æœæ˜¯leafèŠ‚ç‚¹ç®€ç®€å•å•çš„åˆå¹¶åˆ°ä¸€ä¸ªèŠ‚ç‚¹ç„¶åæ›´æ”¹ä¸€ä¸‹å¶å­èŠ‚ç‚¹çš„nextæŒ‡é’ˆå°±å¤Ÿäº†\nå¦‚æœæ˜¯InternalèŠ‚ç‚¹çš„è¯éœ€è¦åˆå¹¶å®Œä¹‹åæ›´æ–°ä¸€ä¸‹å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚\n==Redistributeï¼ˆï¼‰==\nå‘ç°ä¸èƒ½åˆå¹¶ä¹‹åå°±åªéœ€è¦ä»å…„å¼ŸèŠ‚ç‚¹å¤„åè°ƒä¸€ä¸ªå³å¯ åè°ƒçš„è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œä»å·¦ä¾§èŠ‚ç‚¹å·å–æ—¶ï¼ŒæŠŠå·¦ä¾§èŠ‚ç‚¹æœ€åä¸€ä¸ª KV å¯¹è½¬ç§»è‡³å½“å‰èŠ‚ç‚¹ç¬¬ä¸€ä¸ª KV å¯¹ï¼Œä»å³ä¾§èŠ‚ç‚¹å·å–æ—¶ï¼ŒæŠŠå³ä¾§èŠ‚ç‚¹çš„ KV å¯¹è½¬ç§»è‡³å½“å‰èŠ‚ç‚¹æœ€åä¸€ä¸ª KV å¯¹ã€‚leaf page å’Œ internal page çš„å·å–è¿‡ç¨‹åŸºæœ¬ç›¸åŒï¼Œä»…éœ€æ³¨æ„ internal page å·å–åæ›´æ–°å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æŒ‡é’ˆã€‚\nSummary ckeckpoint1ä¸»è¦çš„éš¾ç‚¹å°±æ˜¯åœ¨ç»†ææœ«èŠ‚çš„å¤„ç†ä¸Šï¼Œéå¸¸çš„æŠ˜ç£¨äººï¼Œæˆ‘å¼€å§‹æ²¡å¹¶æ²¡æœ‰æŒ‰ç…§ä¸¥æ ¼æŒ‰ç…§ä¼ªä»£ç å†™ï¼Œé™¤äº†å¾ˆå¤šçš„å¥‡å¥‡æ€ªæ€ªçš„bugï¼Œæœ€åå‡ ä¹æ˜¯æ¨åˆ°é‡æ¥ï¼ŒæŒ‰ç…§ä¼ªä»£ç æ‰ç®—æ˜¯èƒ½æ­£ç¡®çš„è¿è¡Œã€‚\nä½†æ˜¯unpinæˆ‘ä¸€ç›´å¤„ç†ä¸å¥½ï¼Œå¡äº†æˆ‘å¥½é•¿æ—¶é—´ï¼Œæœ€åè¿˜æ˜¯ç¥­å‡ºtransactionï¼Œå¥½å¥½ç ”ç©¶äº†ä¸€ä¸‹æ‰æŠŠçº¿ä¸Šè¯„æµ‹è¿‡äº†ã€‚\næœ€åé™„ä¸Šé€šè¿‡æˆªå›¾ ä¹Ÿæ˜¯æœ€è¿™ä¸€æ®µæ—¶é—´çš„ä¸€ä¸ªæ€»ç»“ã€‚\n","permalink":"https://jialog.top/posts/database/project/cmu15-445-project2-b+-tree-index-checkpoint-1/","summary":"\u003ch2 id=\"ä¸€äº›å·¥å…·\"\u003eä¸€äº›å·¥å…·\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://15445.courses.cs.cmu.edu/fall2022/bpt-printer/\"\u003eBusTub B+Tree Printer\u003c/a\u003eCMUå®˜æ–¹åœ¨çº¿çš„B+æ ‘çš„ç”Ÿæˆå·¥å…·ã€‚æˆ‘ä¸»è¦ç”¨æ¥ç»†èŠ‚å®ç°çš„æ—¶å€™è¿›è¡Œå‚è€ƒã€‚\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://goneill.co.nz/btree-demo.php\"\u003eJavaScript B+ Tree\u003c/a\u003eB+æ ‘æ’å…¥å’Œåˆ é™¤çš„åŠ¨æ€æ¼”ç¤ºã€‚\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dreampuf.github.io/GraphvizOnline/#digraph%20G%20%7B%0A%0A%20%20subgraph%20cluster_0%20%7B%0A%20%20%20%20style%3Dfilled%3B%0A%20%20%20%20color%3Dlightgrey%3B%0A%20%20%20%20node%20%5Bstyle%3Dfilled%2Ccolor%3Dwhite%5D%3B%0A%20%20%20%20a0%20-%3E%20a1%20-%3E%20a2%20-%3E%20a3%3B%0A%20%20%20%20label%20%3D%20%22process%20%231%22%3B%0A%20%20%7D%0A%0A%20%20subgraph%20cluster_1%20%7B%0A%20%20%20%20node%20%5Bstyle%3Dfilled%5D%3B%0A%20%20%20%20b0%20-%3E%20b1%20-%3E%20b2%20-%3E%20b3%3B%0A%20%20%20%20label%20%3D%20%22process%20%232%22%3B%0A%20%20%20%20color%3Dblue%0A%20%20%7D%0A%20%20start%20-%3E%20a0%3B%0A%20%20start%20-%3E%20b0%3B%0A%20%20a1%20-%3E%20b3%3B%0A%20%20b2%20-%3E%20a3%3B%0A%20%20a3%20-%3E%20a0%3B%0A%20%20a3%20-%3E%20end%3B%0A%20%20b3%20-%3E%20end%3B%0A%0A%20%20start%20%5Bshape%3DMdiamond%5D%3B%0A%20%20end%20%5Bshape%3DMsquare%5D%3B%0A%7D\"\u003eGraphviz Online\u003c/a\u003eå¯è§†åŒ–è‡ªå·±çš„æ ‘ã€‚åœ¨debugçš„æ—¶å€™ä¼šç”¨åˆ°ã€‚å°†ç”Ÿæˆçš„dotæ–‡ä»¶è½¬æ¢æˆsvgå›¾ç‰‡ã€‚\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.gradescope.com/courses/425272\"\u003eLog In | Gradescope\u003c/a\u003eåœ¨çº¿è¯„æµ‹ç½‘ç«™,é‚€è¯·ç ï¼šPXWVR5ï¼Œ\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://15445.courses.cs.cmu.edu/fall2022/project2/\"\u003eProject #2 - B+Tree | CMU 15-445/645 :: Intro to Database Systems (Fall 2022)\u003c/a\u003eæœ€é‡è¦çš„å½“ç„¶è¿˜æ˜¯è¯¾ç¨‹ç½‘ç«™äº†\u003c/li\u003e\n\u003cli\u003eè¯¾ç¨‹çš„è§†é¢‘ï¼Œè¿˜æœ‰å¯¹åº”çš„æ•™æè¿˜æ˜¯æ¨èçœ‹ä¸€ä¸‹çš„ä¸Šé¢æœ‰å¾ˆå¤šå®ç°ç»†èŠ‚çš„ã€‚éå¸¸å€¼å¾—å‚è€ƒã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"å¦‚ä½•debugè‡ªå·±çš„\"\u003eå¦‚ä½•Debugè‡ªå·±çš„ğŸŒ³\u003c/h3\u003e\n\u003cp\u003eå¤§è‡´ä¸Šå¯ä»¥åˆ†ä¸ºä¸¤ç§æ–¹å¼\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¯è§†åŒ–çš„ç”¨è‡ªå¸¦çš„\u003ccode\u003eprinter\u003c/code\u003eå°†æ ‘ç”Ÿæˆdotæ–‡ä»¶ç„¶åå¤åˆ¶åˆ°ä¸Šé¢çš„å¯è§†åŒ–ç½‘ç«™ã€‚\u003c/li\u003e\n\u003cli\u003eç”±äºæœ¬é¡¹ç›®é‡‡ç”¨çš„æ˜¯cmakeæ„å»ºçš„ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨æµ‹è¯•æ–‡ä»¶ä¸­æ‰“ä¸Šæ–­ç‚¹ã€‚è¿›è¡Œè°ƒè¯•ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e==å¯è§†åŒ–è°ƒè¯•==\u003c/p\u003e\n\u003cp\u003eåœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ„å»ºå’Œæ‰§è¡Œ\u003ccode\u003eprinter\u003c/code\u003eã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"err\"\u003eâœ\u003c/span\u003e  \u003cspan class=\"n\"\u003ebuild\u003c/span\u003e \u003cspan class=\"nl\"\u003egit\u003c/span\u003e\u003cspan class=\"p\"\u003e:(\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003emake\u003c/span\u003e \u003cspan class=\"n\"\u003eb_plus_tree_printer\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"n\"\u003ej2\u003c/span\u003e \u003cspan class=\"c1\"\u003e// æ„å»ºprinter\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"err\"\u003eâœ\u003c/span\u003e  \u003cspan class=\"n\"\u003ebuild\u003c/span\u003e \u003cspan class=\"nl\"\u003egit\u003c/span\u003e\u003cspan class=\"p\"\u003e:(\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003ebin\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003eb_plus_tree_printer\u003c/span\u003e    \u003cspan class=\"c1\"\u003e// æ‰§è¡Œprinter  \n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæ‰§è¡Œå®Œä¹‹åå°±ä¼šæœ‰ä»¥ä¸‹æç¤ºï¼š\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240202215423.png\"\u003e\u003c/p\u003e\n\u003cp\u003eæŒ‰ç…§è¿™ä¸ªæç¤ºå°±å¯ä»¥ç”Ÿæˆdotæ–‡ä»¶ï¼Œç„¶åå¤åˆ¶åˆ°ä¸Šè¿°çš„ç½‘ç«™è¿›è¡Œå¯è§†åŒ–ã€‚ï¼ˆå½“ä½ çœ‹åˆ°è‡ªå·±çš„æ ‘å‘ˆç°å‡ºæ¥çš„æ—¶å€™è¿˜æ˜¯éå¸¸æœ‰æˆå°±æ„Ÿçš„ğŸ˜ï¼‰\u003c/p\u003e\n\u003cp\u003e==éå¯è§†åŒ–==\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240202220003.png\"\u003e\u003c/p\u003e\n\u003cp\u003eå¯ä»¥å¾ˆæ–¹ä¾¿çš„ç›´æ¥æ‰“æ–­ç‚¹ï¼Œç„¶ååœ¨vscodeä¸­çš„cmakeæ’ä»¶ä¸­é€‰æ‹©è°ƒè¯•è¿›è¡Œdebugã€‚\u003c/p\u003e\n\u003cp\u003eå®˜æ–¹è¿˜æä¾›äº†ä¸€ç§å¤§æ‰“logçš„æ–¹å¼è¿›è¡Œdebugï¼Œæˆ‘æ˜¯ä¸å¤ªä¹ æƒ¯è¿™ç§æ–¹å¼æ‰€ä»¥æ²¡æœ‰è¿›è¡Œå¾ˆæ·±å…¥çš„ç ”ç©¶ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±è¿›è¡Œäº†è§£ğŸ˜—ã€‚\u003c/p\u003e\n\u003cp\u003eä¸¤ç§debugçš„æ–¹å¼æ˜¯\u003cstrong\u003eç›¸è¾…ç›¸æˆçš„\u003c/strong\u003eï¼Œåœ¨ä½ è¿‡ä¸äº†\u003cstrong\u003eæœ¬åœ°æ ·ä¾‹\u003c/strong\u003eçš„æ—¶å€™å¥½å¥½çš„ç”¨éå¯è§†åŒ–çš„æ–¹å¼è¿›è¡Œdebugï¼Œçº¿ä¸Šæ ·ä¾‹è¿‡ä¸äº†å¤§éƒ¨åˆ†åŸå› æ˜¯ç»†èŠ‚å¤„ç†ä¸Šå‡ºé—®é¢˜äº†ã€‚ç”¨å¯è§†åŒ–çš„æ–¹å¼ä¼šæ›´åŠ çš„ç›´è§‚ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eè¯·ä¸è¦å…¬å¼€ä»£ç ï¼Œå°Šé‡AndyåŠ³åŠ¨æˆæœ\u003c/em\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"æ¦‚è§ˆ\"\u003eæ¦‚è§ˆ\u003c/h2\u003e\n\u003cp\u003eProject2æ˜¯å®ç°B+æ ‘ç´¢å¼•ï¼Œæ•´ä¸ªprojectå¤§è‡´è¢«åˆ†ä¸ºäº†ä¸¤ä¸ªéƒ¨åˆ†\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003echeckpoint1ï¼šå®ç°ä¸€ä¸ªå•çº¿ç¨‹çš„b+æ ‘ã€‚\u003c/li\u003e\n\u003cli\u003echeckpoint2ï¼šå®ç°ä¸€ä¸ªå¤šçº¿ç¨‹çš„b+æ ‘ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå®éªŒä»£ç ä¸­ç»™å‡ºçš„è‡ªç”±å‘æŒ¥çš„ç©ºé—´éå¸¸çš„å¤§ï¼Œåªç»™å‡ºäº†\u003ccode\u003eGetvalue()\u003c/code\u003e,\u003ccode\u003eInsert()\u003c/code\u003e,\u003ccode\u003eRemove()\u003c/code\u003eè¿™ä¸‰ä¸ªå‡½æ•°çš„æ¥å£ï¼Œå‰©ä¸‹çš„æ‰€æœ‰çš„å®ç°éƒ½éå¸¸çš„è‡ªç”±ï¼Œæ•´ä¸ªå®éªŒå®ç°çš„è¿‡ç¨‹å°±åƒä¸€ä¸ªé»‘ç›’ä¸€æ ·ï¼Œåªåœ¨ä¹è¾“å…¥å’Œè¾“å‡ºã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240202220853.png\"\u003e\u003c/p\u003e\n\u003cp\u003eæœ¬å®éªŒéœ€è¦å®Œæˆb+ indexéƒ¨åˆ†ï¼Œb+æ ‘ä¸­çš„é¡µï¼ˆpageï¼‰éƒ½éœ€è¦ä»ä¸Šä¸€ä¸ªå®éªŒä¸­å®ç°çš„buffer poolä¸­å–ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"checkpoint-1\"\u003eCheckpoint-1\u003c/h2\u003e\n\u003ch3 id=\"task-1---btree-pages\"\u003eTask #1 - B+Tree Pages\u003c/h3\u003e\n\u003cp\u003eéœ€è¦å®Œæˆä»¥ä¸‹ä¸‰ä¸ªpageï¼Œä¸»è¦éƒ½æ˜¯ä¸€äº›getterå’Œsetterçš„å‡½æ•°ï¼Œé‡åœ¨ç†è§£å„éƒ¨åˆ†çš„ç»„æˆã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://15445.courses.cs.cmu.edu/fall2022/project2/#b\u0026#43;tree-page\"\u003e\u003cstrong\u003eB+Tree Parent Page\u003c/strong\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://15445.courses.cs.cmu.edu/fall2022/project2/#b\u0026#43;tree-internal-page\"\u003e\u003cstrong\u003eB+Tree Internal Page\u003c/strong\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://15445.courses.cs.cmu.edu/fall2022/project2/#b\u0026#43;tree-leaf-page\"\u003e\u003cstrong\u003eB+Tree Leaf Page\u003c/strong\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eå…¶ä¸­parentPageæ˜¯internal pageå’Œleaf pageçš„çˆ¶ç±»ã€‚æˆ‘æ›´\u003cstrong\u003eå€¾å‘äº\u003c/strong\u003eæŠŠè¿™å‡ ä¸ªpageç±»å‹ç†è§£ä¸º ä»buffer poolä¸­å–å›æ¥çš„Pageçš„\u003cstrong\u003eä¸åŒè§£é‡Šå½¢å¼\u003c/strong\u003eã€‚Pageè¿˜æ˜¯é‚£ä¸ªPageã€‚ä¸»è¦å°±æ˜¯åœ¨äºä½ å¦‚ä½•å»è§£é‡Šå®ƒçš„ç»„æˆéƒ¨åˆ†ã€‚\u003c/p\u003e","title":"CMU15-445-Project #2 - B+ Tree Index Checkpoint 1"},{"content":"æ•°å€¼ç±»å‹ æ•´æ•°ç±»å‹ æ•´æ•°å°±æ˜¯æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚ä¹‹å‰ä½¿ç”¨è¿‡çš„Â i32Â ç±»å‹ï¼Œè¡¨ç¤ºæœ‰ç¬¦å·çš„ 32 ä½æ•´æ•°ï¼ˆÂ iÂ æ˜¯è‹±æ–‡å•è¯Â integerÂ çš„é¦–å­—æ¯ï¼Œä¸ä¹‹ç›¸åçš„æ˜¯Â uï¼Œä»£è¡¨æ— ç¬¦å·Â unsignedÂ ç±»å‹ï¼‰ã€‚ä¸‹è¡¨æ˜¾ç¤ºäº† Rust ä¸­çš„å†…ç½®çš„æ•´æ•°ç±»å‹ï¼š æ•´å‹æº¢å‡º åœ¨ä½¿ç”¨ç¼–ç¨‹çš„è¿‡ç¨‹ä¸­éš¾å…ä¼šå‘ç”Ÿæ•°çš„èŒƒå›´è¶…è¿‡äº†ç±»å‹èŒƒå›´è¿™æ—¶å€™å°±ä¼šå‘ç”Ÿæº¢å‡ºçš„ç°è±¡ã€‚\næœ‰è¶£çš„æ˜¯ï¼šåœ¨debugæ¨¡å¼ä¸‹ç¼–è¯‘å™¨ä¼šæ£€æµ‹æœ‰æ²¡æœ‰å‘ç”Ÿæ•´å½¢æº¢å‡ºçš„ç°è±¡ï¼Œå¦‚æœæœ‰å‘ç”Ÿæ•´æ•°æº¢å‡ºçš„ç°è±¡ç¼–è¯‘å°±ä¼šå‘ç”Ÿpanic.\nä½†æ˜¯åœ¨releaseæ¨¡å¼ä¸‹ï¼Œç¼–è¯‘å™¨ä¸ä¼šè¿›è¡Œæ•´æ•°æº¢å‡ºçš„çš„æ£€æµ‹ã€‚å½“å‘ç”Ÿæ•´æ•°æº¢å‡ºçš„æ—¶å€™ä¼šæŒ‰ç…§è¡¥ç å¾ªç¯æº¢å‡ºè¿›è¡Œå¤„ç†ã€‚ç®€å•æ¥è®²å°±æ˜¯å–ä½™ã€‚\nè¦æ˜¾å¼çš„å¤„ç†å¯èƒ½çš„æº¢å‡ºï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“æä¾›çš„ç±»å‹ã€‚\nä½¿ç”¨warpping_*çš„æ–¹æ³•åœ¨æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½æŒ‰ç…§è¡¥ç å¾ªç¯æº¢å‡ºçš„è§„åˆ™è¿›è¡Œå¤„ç† ä½¿ç”¨check_*æ–¹æ³•å‘ç”Ÿæº¢å‡ºçš„æ—¶å€™è¿”å›Noneå€¼ã€‚ ä½¿ç”¨overflowing_*æ–¹æ³•è¿”å›è¯¥å€¼å’Œæ˜¯å¦æº¢å‡ºçš„ä¸€ä¸ªboolå€¼ ä½¿ç”¨saturating_*çš„æ–¹æ³•è¿”å›æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼ ä¸‹é¢æ˜¯ä¸€ä¸ªæ¼”ç¤ºwarpping_*çš„ä¸€ä¸ªç¤ºä¾‹ä»£ç \nfn main() { let a : u8 = 255; let b = a.wrapping_add(20); println!(\u0026#34;{}\u0026#34;, b); // 19 } æœ€åè¿™ä¸ªè¾“å‡ºç»“æœä¹Ÿæ²¡æœ‰å‡ºä¹æ„æ–™ã€‚\næµ®ç‚¹ç±»å‹ æµ®ç‚¹ç±»å‹æ˜¯å¸¦æœ‰å°æ•°ç‚¹çš„æ•°å­—ã€‚åœ¨Rustä¸­æµ®ç‚¹æ•°ç±»å‹ä¹Ÿæœ‰ä¸¤ç§è¡¨ç¤ºf32,f64. åˆ†åˆ«è¡¨ç¤º32ä½å’Œ64ä½ã€‚åœ¨ç°ä»£CPUä¸­32ä½çš„è¿ç®—é€Ÿåº¦å‡ ä¹å’Œ64ä½æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥é»˜è®¤æ˜¯f64.\næµ®ç‚¹æ•°é™·é˜± æµ®ç‚¹æ•°åœ¨å…¶åº•å±‚è¡¨ç¤ºä¸Šæœ‰å¾ˆå¤§çš„ç‰¹æ®Šæ€§ï¼Œè¿™å°±å¯¼è‡´äº†å¦‚æœåœ¨ä½¿ç”¨çš„æ—¶å€™ä¸å¤Ÿè°¨æ…å°±ä¼šé€ æˆå±é™©ã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ã€‚\næµ®ç‚¹æ•°æ˜¯ä¸€ç§è¿‘ä¼¼çš„è¡¨è¾¾ã€‚ç”±äºæ‰€æœ‰çš„ç”Ÿæ´»ä¸­çš„æ•°å­—æˆ‘ä»¬éƒ½æ˜¯ç”¨åè¿›åˆ¶è¿›è¡Œæ ‡è¯†ä½†æ˜¯è®¡ç®—æœºç”¨äºŒè¿›åˆ¶åœ¨åº•å±‚è¿›è¡Œè¡¨ç¤ºï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆéš¾éå¸¸å‡†ç¡®çš„è¡¨ç¤ºåè¿›åˆ¶çš„å°æ•°ã€‚ æµ®ç‚¹æ•°åœ¨æŸä¸€äº›äº‹æƒ…ä¸Šæ˜¯åç›´è§‰çš„ã€‚ä¾‹å¦‚å¾ˆå¤šäººéƒ½è§‰å¾—æµ®ç‚¹æ•°æ˜¯å¯ä»¥è¿›è¡Œæ¯”è¾ƒçš„å¯¹å§ã€‚ä½†æ˜¯å®é™…ä¸Šå¦‚æœæˆ‘ä»¬ç¼–å†™å¦‚ä¸‹çš„ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ fn main(){ assert!(0.1+0.2==0.3); } ç¨‹åºå°†ä¼španicï¼Œå› ä¸ºäºŒè¿›åˆ¶ç²¾åº¦ çš„é—®é¢˜ï¼Œ0.1+0.2å°†ä¼šåœ¨Nä½ä¹‹åä¸0.3å‘ç”Ÿåå·®ã€‚\nä¸ºäº†é¿å…æ‰å…¥é™·é˜±å½“ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ã€‚\né¿å…åœ¨æµ®ç‚¹æ•°ä¸Šæµ‹è¯•ç›¸ç­‰æ€§ å½“ç»“æœåœ¨æ•°å­¦ä¸Šå­˜åœ¨æœªå®šä¹‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ ¼å¤–çš„å°å¿ƒ ä½†æ˜¯å¦‚æœéè¦è¿›è¡Œæ¯”è¾ƒå‘¢ï¼Ÿ å¯ä»¥è€ƒè™‘ç”¨è¿™ç§æ–¹å¼Â (0.1_f64 + 0.2 - 0.3).abs() \u0026lt; 0.00001Â ï¼Œå…·ä½“å°äºå¤šå°‘ï¼Œå–å†³äºä½ å¯¹ç²¾åº¦çš„éœ€æ±‚ã€‚\nä½†æ˜¯äº‹æƒ…åˆ°è¿™è¿˜æ²¡å®Œã€‚\næˆ‘ä»¬å¯¹0.1+0.2çš„f32å’Œf64ä¸¤ç§å½¢å¼è¿›è¡Œæ¯”è¾ƒã€‚\nfn main() { let abc: (f32, f32, f32) = (0.1, 0.2, 0.3); let xyz: (f64, f64, f64) = (0.1, 0.2, 0.3); println!(\u0026#34;abc (f32)\u0026#34;); println!(\u0026#34; 0.1 + 0.2: {:x}\u0026#34;, (abc.0 + abc.1).to_bits()); println!(\u0026#34; 0.3: {:x}\u0026#34;, (abc.2).to_bits()); println!(); println!(\u0026#34;xyz (f64)\u0026#34;); println!(\u0026#34; 0.1 + 0.2: {:x}\u0026#34;, (xyz.0 + xyz.1).to_bits()); println!(\u0026#34; 0.3: {:x}\u0026#34;, (xyz.2).to_bits()); println!(); assert!(abc.0 + abc.1 == abc.2); assert!(xyz.0 + xyz.1 == xyz.2); } æˆ‘ä»¬ä¼šå‘ç°åœ¨32ä½çš„æƒ…å†µä¸‹æ˜¯å¯ä»¥é€šè¿‡çš„ä½†æ˜¯åœ¨64ä½çš„æƒ…å†µä¸‹æ˜¯ä¼španicçš„ã€‚\nNaN NaN:(not a number) ä¸æ˜¯ä¸€ä¸ªåˆæ³•çš„æ•°ã€‚å°±ä¼šå‡ºç°è¿™ä¸ªæ ‡è¯†ã€‚æ‰€æœ‰å’ŒNaNçš„äº¤äº’æ“ä½œéƒ½ä¼šè¿”å›NaNã€‚\nNaNä¸èƒ½ç”¨äºæ¯”è¾ƒ ä½†æ˜¯NaNå¯ä»¥ç”¨äºåˆ¤æ–­æ˜¯å¦æ˜¯NaNã€‚ æ•°å­—è¿ç®— å°±æ˜¯ä¸€èˆ¬çš„å››åˆ™è¿ç®—ç­‰ç­‰ã€‚\nåºåˆ—ï¼ˆRangeï¼‰ ..=è¿™ä¸ªç¬¦å·è¡¨ç¤ºåºåˆ—ï¼Œä¸‹é¢ä¸¾ä¸ªä¾‹å­ã€‚\nfor i in 1..=5{ println!(\u0026#34;{}\u0026#34;,i); } ä½¿ç”¨Asè¿›è¡Œç±»å‹è½¬æ¢ è¿™é‡Œå…ˆæŒ‰ä¸‹ä¸è¡¨ï¼Œåœ¨åç»­çš„è¿›é˜¶è¿‡ç¨‹ä¸­ä¼šè¿›è¡Œè¯¦ç»†çš„äº†è§£ã€‚\næœ‰ç†æ•°å’Œå¤æ•° Rust çš„æ ‡å‡†åº“ç›¸æ¯”å…¶å®ƒè¯­è¨€ï¼Œå‡†å…¥é—¨æ§›è¾ƒé«˜ï¼Œå› æ­¤æœ‰ç†æ•°å’Œå¤æ•°å¹¶æœªåŒ…å«åœ¨æ ‡å‡†åº“ä¸­ï¼š\næœ‰ç†æ•°å’Œå¤æ•° ä»»æ„å¤§å°çš„æ•´æ•°å’Œä»»æ„ç²¾åº¦çš„æµ®ç‚¹æ•° å›ºå®šç²¾åº¦çš„åè¿›åˆ¶å°æ•°ï¼Œå¸¸ç”¨äºè´§å¸ç›¸å…³çš„åœºæ™¯ å¥½åœ¨ç¤¾åŒºå·²ç»å¼€å‘å‡ºé«˜è´¨é‡çš„ Rust æ•°å€¼åº“ï¼šnumã€‚\næŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ¥å¼•å…¥Â numÂ åº“ï¼š\nåˆ›å»ºæ–°å·¥ç¨‹Â cargo new complex-num \u0026amp;\u0026amp; cd complex-num åœ¨Â Cargo.tomlÂ ä¸­çš„Â [dependencies]Â ä¸‹æ·»åŠ ä¸€è¡ŒÂ num = \u0026quot;0.4.0\u0026quot; å°†Â src/main.rsÂ æ–‡ä»¶ä¸­çš„Â mainÂ å‡½æ•°æ›¿æ¢ä¸ºä¸‹é¢çš„ä»£ç  è¿è¡ŒÂ cargo runã€‚ use num::complex::Complex; fn main() { let a = Complex { re: 2.1, im: -1.2 }; let b = Complex::new(11.1, 22.2); let result = a + b; println!(\u0026#34;{} + {}i\u0026#34;, result.re, result.im) } æˆ‘è§‰å¾—è¿™ä¸ªä¾‹å­ä¸»è¦è®©æˆ‘å­¦ä¹ äº†å¯¼åŒ…çš„è¿‡ç¨‹ã€‚\næ•°å€¼ç±»å‹çš„æ€»ç»“ ä¹‹å‰æåˆ°äº†è¿‡ Rust çš„æ•°å€¼ç±»å‹å’Œè¿ç®—è·Ÿå…¶ä»–è¯­è¨€è¾ƒä¸ºç›¸ä¼¼ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œé™¤äº†è¯­æ³•ä¸Šçš„ä¸åŒä¹‹å¤–ï¼Œè¿˜æ˜¯å­˜åœ¨ä¸€äº›å·®å¼‚ç‚¹ï¼š\nRust æ‹¥æœ‰ç›¸å½“å¤šçš„æ•°å€¼ç±»å‹. å› æ­¤ä½ éœ€è¦ç†Ÿæ‚‰è¿™äº›ç±»å‹æ‰€å ç”¨çš„å­—èŠ‚æ•°ï¼Œè¿™æ ·å°±çŸ¥é“è¯¥ç±»å‹å…è®¸çš„å¤§å°èŒƒå›´ä»¥åŠä½ é€‰æ‹©çš„ç±»å‹æ˜¯å¦èƒ½è¡¨è¾¾è´Ÿæ•° ç±»å‹è½¬æ¢å¿…é¡»æ˜¯æ˜¾å¼çš„. Rust æ°¸è¿œä¹Ÿä¸ä¼šå·å·æŠŠä½ çš„ 16bit æ•´æ•°è½¬æ¢æˆ 32bit æ•´æ•° Rust çš„æ•°å€¼ä¸Šå¯ä»¥ä½¿ç”¨æ–¹æ³•. ä¾‹å¦‚ä½ å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•æ¥å°†Â 13.14Â å–æ•´ï¼š13.14_f32.round()ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ç±»å‹åç¼€ï¼Œå› ä¸ºç¼–è¯‘å™¨éœ€è¦çŸ¥é“Â 13.14Â çš„å…·ä½“ç±»å‹ æ•°å€¼ç±»å‹çš„è®²è§£å·²ç»åŸºæœ¬ç»“æŸï¼Œæ¥ä¸‹æ¥ï¼Œæ¥çœ‹çœ‹å­—ç¬¦å’Œå¸ƒå°”ç±»å‹ã€‚\nå¸ƒå°”ç±»å‹ ","permalink":"https://jialog.top/posts/rust/%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B/","summary":"\u003ch2 id=\"æ•°å€¼ç±»å‹\"\u003eæ•°å€¼ç±»å‹\u003c/h2\u003e\n\u003ch3 id=\"æ•´æ•°ç±»å‹\"\u003eæ•´æ•°ç±»å‹\u003c/h3\u003e\n\u003cp\u003e\u003cem\u003eæ•´æ•°\u003c/em\u003eå°±æ˜¯æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚ä¹‹å‰ä½¿ç”¨è¿‡çš„Â \u003ccode\u003ei32\u003c/code\u003eÂ ç±»å‹ï¼Œè¡¨ç¤ºæœ‰ç¬¦å·çš„ 32 ä½æ•´æ•°ï¼ˆÂ \u003ccode\u003ei\u003c/code\u003eÂ æ˜¯è‹±æ–‡å•è¯Â \u003cem\u003einteger\u003c/em\u003eÂ çš„é¦–å­—æ¯ï¼Œä¸ä¹‹ç›¸åçš„æ˜¯Â \u003ccode\u003eu\u003c/code\u003eï¼Œä»£è¡¨æ— ç¬¦å·Â \u003ccode\u003eunsigned\u003c/code\u003eÂ ç±»å‹ï¼‰ã€‚ä¸‹è¡¨æ˜¾ç¤ºäº† Rust ä¸­çš„å†…ç½®çš„æ•´æ•°ç±»å‹ï¼š\n\u003cimg alt=\"image.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240107164516.png\"\u003e\u003c/p\u003e\n\u003ch4 id=\"æ•´å‹æº¢å‡º\"\u003eæ•´å‹æº¢å‡º\u003c/h4\u003e\n\u003cp\u003eåœ¨ä½¿ç”¨ç¼–ç¨‹çš„è¿‡ç¨‹ä¸­éš¾å…ä¼šå‘ç”Ÿæ•°çš„èŒƒå›´è¶…è¿‡äº†\u003cstrong\u003eç±»å‹èŒƒå›´\u003c/strong\u003eè¿™æ—¶å€™å°±ä¼šå‘ç”Ÿæº¢å‡ºçš„ç°è±¡ã€‚\u003c/p\u003e\n\u003cp\u003eæœ‰è¶£çš„æ˜¯ï¼šåœ¨\u003ccode\u003edebug\u003c/code\u003eæ¨¡å¼ä¸‹ç¼–è¯‘å™¨ä¼šæ£€æµ‹æœ‰æ²¡æœ‰å‘ç”Ÿæ•´å½¢æº¢å‡ºçš„ç°è±¡ï¼Œå¦‚æœæœ‰å‘ç”Ÿæ•´æ•°æº¢å‡ºçš„ç°è±¡ç¼–è¯‘å°±ä¼šå‘ç”Ÿ\u003ccode\u003epanic\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯åœ¨\u003ccode\u003erelease\u003c/code\u003eæ¨¡å¼ä¸‹ï¼Œç¼–è¯‘å™¨\u003cstrong\u003eä¸ä¼š\u003c/strong\u003eè¿›è¡Œæ•´æ•°æº¢å‡ºçš„çš„æ£€æµ‹ã€‚å½“å‘ç”Ÿæ•´æ•°æº¢å‡ºçš„æ—¶å€™ä¼šæŒ‰ç…§\u003cem\u003eè¡¥ç å¾ªç¯æº¢å‡º\u003c/em\u003eè¿›è¡Œå¤„ç†ã€‚ç®€å•æ¥è®²å°±æ˜¯\u003cstrong\u003eå–ä½™\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003eè¦æ˜¾å¼çš„å¤„ç†å¯èƒ½çš„æº¢å‡ºï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“æä¾›çš„ç±»å‹ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä½¿ç”¨\u003ccode\u003ewarpping_*\u003c/code\u003eçš„æ–¹æ³•åœ¨æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½æŒ‰ç…§è¡¥ç å¾ªç¯æº¢å‡ºçš„è§„åˆ™è¿›è¡Œå¤„ç†\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨\u003ccode\u003echeck_*\u003c/code\u003eæ–¹æ³•å‘ç”Ÿæº¢å‡ºçš„æ—¶å€™è¿”å›\u003ccode\u003eNone\u003c/code\u003eå€¼ã€‚\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨\u003ccode\u003eoverflowing_*\u003c/code\u003eæ–¹æ³•è¿”å›è¯¥å€¼å’Œæ˜¯å¦æº¢å‡ºçš„ä¸€ä¸ªboolå€¼\u003c/li\u003e\n\u003cli\u003eä½¿ç”¨\u003ccode\u003esaturating_*\u003c/code\u003eçš„æ–¹æ³•è¿”å›æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä¸‹é¢æ˜¯ä¸€ä¸ªæ¼”ç¤º\u003ccode\u003ewarpping_*\u003c/code\u003eçš„ä¸€ä¸ªç¤ºä¾‹ä»£ç \u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-rust\" data-lang=\"rust\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003efn\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e: \u003cspan class=\"kt\"\u003eu8\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"mi\"\u003e255\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewrapping_add\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e    \u003c/span\u003e\u003cspan class=\"fm\"\u003eprintln!\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e{}\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"w\"\u003e \u003c/span\u003e\u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e  \u003c/span\u003e\u003cspan class=\"c1\"\u003e// 19\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eæœ€åè¿™ä¸ªè¾“å‡ºç»“æœä¹Ÿæ²¡æœ‰å‡ºä¹æ„æ–™ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240107183105.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"æµ®ç‚¹ç±»å‹\"\u003eæµ®ç‚¹ç±»å‹\u003c/h3\u003e\n\u003cp\u003e\u003cstrong\u003eæµ®ç‚¹ç±»å‹\u003c/strong\u003eæ˜¯å¸¦æœ‰å°æ•°ç‚¹çš„æ•°å­—ã€‚åœ¨Rustä¸­æµ®ç‚¹æ•°ç±»å‹ä¹Ÿæœ‰ä¸¤ç§è¡¨ç¤º\u003ccode\u003ef32\u003c/code\u003e,\u003ccode\u003ef64\u003c/code\u003e.\nåˆ†åˆ«è¡¨ç¤º32ä½å’Œ64ä½ã€‚åœ¨ç°ä»£CPUä¸­32ä½çš„è¿ç®—é€Ÿåº¦å‡ ä¹å’Œ64ä½æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥é»˜è®¤æ˜¯\u003ccode\u003ef64\u003c/code\u003e.\u003c/p\u003e\n\u003ch4 id=\"æµ®ç‚¹æ•°é™·é˜±\"\u003eæµ®ç‚¹æ•°é™·é˜±\u003c/h4\u003e\n\u003cp\u003eæµ®ç‚¹æ•°åœ¨å…¶åº•å±‚è¡¨ç¤ºä¸Šæœ‰å¾ˆå¤§çš„ç‰¹æ®Šæ€§ï¼Œè¿™å°±å¯¼è‡´äº†å¦‚æœåœ¨ä½¿ç”¨çš„æ—¶å€™ä¸å¤Ÿè°¨æ…å°±ä¼šé€ æˆå±é™©ã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŸå› ã€‚\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cstrong\u003eæµ®ç‚¹æ•°æ˜¯ä¸€ç§è¿‘ä¼¼çš„è¡¨è¾¾\u003c/strong\u003eã€‚ç”±äºæ‰€æœ‰çš„ç”Ÿæ´»ä¸­çš„æ•°å­—æˆ‘ä»¬éƒ½æ˜¯ç”¨åè¿›åˆ¶è¿›è¡Œæ ‡è¯†ä½†æ˜¯è®¡ç®—æœºç”¨äºŒè¿›åˆ¶åœ¨åº•å±‚è¿›è¡Œè¡¨ç¤ºï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆéš¾éå¸¸å‡†ç¡®çš„è¡¨ç¤ºåè¿›åˆ¶çš„å°æ•°ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eæµ®ç‚¹æ•°åœ¨æŸä¸€äº›äº‹æƒ…ä¸Šæ˜¯åç›´è§‰çš„\u003c/strong\u003eã€‚ä¾‹å¦‚å¾ˆå¤šäººéƒ½è§‰å¾—æµ®ç‚¹æ•°æ˜¯å¯ä»¥è¿›è¡Œæ¯”è¾ƒçš„å¯¹å§ã€‚ä½†æ˜¯å®é™…ä¸Šå¦‚æœæˆ‘ä»¬ç¼–å†™å¦‚ä¸‹çš„ä»£ç ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-rust\" data-lang=\"rust\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003efn\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e(){\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"fm\"\u003eassert!\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.1\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.2\u003c/span\u003e\u003cspan class=\"o\"\u003e==\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"w\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"w\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eç¨‹åºå°†ä¼španicï¼Œå› ä¸ºäºŒè¿›åˆ¶ç²¾åº¦ çš„é—®é¢˜ï¼Œ0.1+0.2å°†ä¼šåœ¨Nä½ä¹‹åä¸0.3å‘ç”Ÿåå·®ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20240107190957.png\"\u003e\u003c/p\u003e\n\u003cp\u003eä¸ºäº†é¿å…æ‰å…¥é™·é˜±å½“ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eé¿å…åœ¨æµ®ç‚¹æ•°ä¸Šæµ‹è¯•ç›¸ç­‰æ€§\u003c/li\u003e\n\u003cli\u003eå½“ç»“æœåœ¨æ•°å­¦ä¸Šå­˜åœ¨æœªå®šä¹‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ ¼å¤–çš„å°å¿ƒ\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eä½†æ˜¯å¦‚æœ\u003cstrong\u003eéè¦\u003c/strong\u003eè¿›è¡Œæ¯”è¾ƒå‘¢ï¼Ÿ\nå¯ä»¥è€ƒè™‘ç”¨è¿™ç§æ–¹å¼Â \u003ccode\u003e(0.1_f64 + 0.2 - 0.3).abs() \u0026lt; 0.00001\u003c/code\u003eÂ ï¼Œå…·ä½“å°äºå¤šå°‘ï¼Œå–å†³äºä½ å¯¹ç²¾åº¦çš„éœ€æ±‚ã€‚\u003c/p\u003e","title":"åŸºæœ¬ç±»å‹"},{"content":"ä¸€äº›å…³äºä¸ºä»€ä¹ˆè¦å­¦rustçš„æƒ³æ³• å…¶å®åœ¨å¤§ä¸€çš„æ—¶å€™æˆ‘å°±æœ‰äº†è§£è¿‡rustè¯­è¨€ï¼Œå½“æ—¶ç”šè‡³è¿˜çœ‹äº†ä¸€å‘¨bç«™çš„è§†é¢‘ï¼Œåœ¨æˆ‘æœ€è¿‘å‡†å¤‡å†çœ‹rustçš„æ—¶å€™å‘ç°æˆ‘å¤§ä¸€è£…çš„ç¯å¢ƒè¿˜åœ¨ï¼Œæˆ‘ç”šè‡³è‡ªå·±éƒ½ä¸è®°å¾—æœ‰è¿™ä»¶äº‹äº†ã€‚\nrustè¯­è¨€æ®è¯´æœ‰éå¸¸å¥½çš„å†…å­˜ç®¡ç†æœºåˆ¶å’Œå®‰å…¨æªæ–½ï¼Œä»¥åŠæé«˜çš„æ‰§è¡Œæ•ˆç‡ï¼Œæ‰€ä»¥è¿‘äº›å¹´è¢«ç”¨ä½œå¼€å‘åº•å±‚éå¸¸çš„å¤šï¼Œè€Œæˆ‘å¯¹è¿™æ–¹é¢ä¹Ÿæ˜¯éå¸¸çš„æ„Ÿå…´è¶£ï¼Œä¹Ÿç®—æ˜¯å…´è¶£é©±åŠ¨å§ã€‚å¸Œæœ›èƒ½æœ‰åŠ©äºæé«˜ä¸€ä¸‹è‡ªå·±çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œè®©è‡ªå·±ä¹Ÿå¤šäº†è§£ä¸€ä¸‹rustè¯­è¨€ã€‚\n","permalink":"https://jialog.top/posts/rust/some-ideas/","summary":"\u003ch2 id=\"ä¸€äº›å…³äºä¸ºä»€ä¹ˆè¦å­¦rustçš„æƒ³æ³•\"\u003eä¸€äº›å…³äºä¸ºä»€ä¹ˆè¦å­¦rustçš„æƒ³æ³•\u003c/h2\u003e\n\u003cp\u003eå…¶å®åœ¨å¤§ä¸€çš„æ—¶å€™æˆ‘å°±æœ‰äº†è§£è¿‡rustè¯­è¨€ï¼Œå½“æ—¶ç”šè‡³è¿˜çœ‹äº†ä¸€å‘¨bç«™çš„è§†é¢‘ï¼Œåœ¨æˆ‘æœ€è¿‘å‡†å¤‡å†çœ‹rustçš„æ—¶å€™å‘ç°æˆ‘å¤§ä¸€è£…çš„ç¯å¢ƒè¿˜åœ¨ï¼Œæˆ‘ç”šè‡³è‡ªå·±éƒ½ä¸è®°å¾—æœ‰è¿™ä»¶äº‹äº†ã€‚\u003c/p\u003e\n\u003cp\u003erustè¯­è¨€æ®è¯´æœ‰éå¸¸å¥½çš„å†…å­˜ç®¡ç†æœºåˆ¶å’Œå®‰å…¨æªæ–½ï¼Œä»¥åŠæé«˜çš„æ‰§è¡Œæ•ˆç‡ï¼Œæ‰€ä»¥è¿‘äº›å¹´è¢«ç”¨ä½œå¼€å‘åº•å±‚éå¸¸çš„å¤šï¼Œè€Œæˆ‘å¯¹è¿™æ–¹é¢ä¹Ÿæ˜¯éå¸¸çš„æ„Ÿå…´è¶£ï¼Œä¹Ÿç®—æ˜¯å…´è¶£é©±åŠ¨å§ã€‚å¸Œæœ›èƒ½æœ‰åŠ©äºæé«˜ä¸€ä¸‹è‡ªå·±çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œè®©è‡ªå·±ä¹Ÿå¤šäº†è§£ä¸€ä¸‹rustè¯­è¨€ã€‚\u003c/p\u003e","title":"some ideas"},{"content":"auto åœ¨æ¦‚å¿µä¸Šautoå·²ç»æç®€äº†ï¼Œä½†æ˜¯å®é™…ä¸Šä»ç„¶è¦å¾®å¦™è®¸å¤šã€‚å®ƒå¯ä»¥èŠ‚çº¦å£°æ˜ç±»å‹ï¼Œä¹Ÿå¯ä»¥é¿å…è®¸å¤šæ‰‹åŠ¨ç±»å‹çš„æ­£ç¡®æ€§å’Œå£°æ˜é—®é¢˜ã€‚ä½†æ˜¯ä»ç»“æœçš„è§’åº¦æ¥è¯´ï¼Œå°½ç®¡autoå¾ˆåŠªåŠ›åœ¨åšäº‹äº†ï¼Œä½†æ˜¯ä»ç„¶å¯èƒ½æ˜¯é”™è¯¯çš„ã€‚å¦‚æœå‡ºç°è¿™ç§æƒ…å†µæˆ‘ä»¬è¦çŸ¥é“å¦‚ä½•å»å¼•å¯¼autoè®©ä»–æˆä¸ºæ­£ç¡®çš„ç±»å‹ï¼Œå› ä¸ºé€€å›ä½¿ç”¨æ‰‹åŠ¨å£°æ˜ç±»å‹ä»ç„¶æ˜¯ä¸‹ä¸‹ç­–ã€‚\næ¥ä¸‹æ¥çš„å†…å®¹ä¼šæ¶µç›–autoçš„æ‰€æœ‰ç»†èŠ‚\nItem 5: Prefer auto to explicit type declarations. ä¸ä»…å¯ä»¥é¿å…å‡ºç°ä¸ºåˆå§‹åŒ–çš„å˜é‡ï¼Œé¿å…å•°å—¦åˆç¹æ‚çš„ç±»å‹å£°æ˜ï¼Œèƒ½ç›´æ¥æŒæœ‰é—­åŒ…ï¼Œè¿˜å¯ä»¥é¿å…ä¸€äº›å› ä¸ºâ€œç±»å‹æ·å¾„â€å‡ºç°çš„é—®é¢˜ã€‚ eg1.\næœ‰ä¸€äº›ç¨‹åºå‘˜ä¼šå¯¹ç±»å‹å‘ç”Ÿè¯¯åˆ¤ï¼Œåˆ°æ—¶ç”¨èŒƒå›´è¾ƒå°çš„ç±»å‹åœ¨32ä½æœºå™¨ä¸Šèƒ½å¤Ÿè¿è¡Œä½†æ˜¯åœ¨64ä½æœºå™¨ä¸Šå‘ç”Ÿäº†æ”¹å˜ï¼Œå¯¼è‡´ç¨‹åºåœ¨ç§»æ¤çš„æ—¶å€™å‡ºç°é—®é¢˜ã€‚ eg2. ä¸Šè¿°ä»£ç çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å½“å®é™…è¿è¡Œä¹‹åå¹¶æ²¡æœ‰å¯¹å“ˆå¸Œè¡¨mè¿›è¡Œæ“ä½œã€‚åŸå› åœ¨äºå“ˆå¸Œè¡¨ä¸­çš„kayå€¼æ˜¯constç±»å‹çš„ï¼Œæ‰‹åŠ¨å£°æ˜çš„ç±»å‹ä¸ä¸€æ ·çš„è¯ç¼–è¯‘å™¨ä¼šè¿›è¡Œä¸€ä¸ªç¥å¥‡çš„æ“ä½œï¼Œå®ƒä¼šè®²mä¸­çš„å†…å®¹å¤åˆ¶æˆä¸ºä¸´æ—¶å˜é‡å°†keyçš„ç±»å‹æ”¹ä¸ºå’Œå£°æ˜ä¸€è‡´çš„ï¼Œå†å°†pç»‘å®šåˆ°ä¸´æ—¶å˜é‡ä¸Šã€‚\nSummary autoè¯´åˆ°åº•åªæ˜¯ä¸€ä¸ªå¯é€‰é¡¹ç½¢äº†ï¼Œä¸æ˜¯å¿…é€‰é¡¹ï¼Œå¦‚æœä½ è§‰å¾—ä½ çš„é¡¹ç›®ä½¿ç”¨æ˜¾å¼çš„å£°æ˜èƒ½å¤Ÿä½¿å¾—é¡¹ç›®å˜å¾—æ›´åŠ çš„å¯è¯»å’Œé«˜æ•ˆï¼Œå½“ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚ä½†æ˜¯c++å¼•å…¥autoå¹¶ä¸æ˜¯ä¸€ä¸ªå¤šæ–°é²œçš„ä¸œè¥¿ï¼Œåªæ˜¯ä¸€ä¸ªåœ¨å…¶ä»–è¯­è¨€ä¸­è¢«ç§°ä¸ºâ€œç±»å‹æ¨å¯¼â€çš„ä¸œè¥¿ç½¢äº†ã€‚åœ¨å…¶ä»–çš„é™æ€ç±»å‹è¯­è¨€ä¸­ç±»å‹æ¨å¯¼éƒ½æˆ–å¤šæˆ–å°‘å­˜åœ¨ã€‚è€Œä¸”åŠ¨æ€è¯­è¨€è¿˜ä¸ºç±»å‹æ¨å¯¼ç§¯ç´¯äº†å¤§é‡çš„ç»éªŒã€‚è€Œä¸”æ­¤ç±»æŠ€æœ¯å¹¶ä¸ä¼šäºå¤§å‹çš„å·¥ç¨‹é¡¹ç›®äº§ç”Ÿå†²çªã€‚\nä¸€äº›äººè§‰å¾—ç”¨å®Œautoä¹‹åä¼šè®©å˜é‡çš„ç±»å‹å˜å¾—ä¸æ˜¯ä¸€çœ¼å¯ä»¥è¯†åˆ«ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜éšç€ideçš„ä¼˜åŒ–å’Œé€‚é…å·²ç»è¢«è§£å†³çš„ç›¸å½“å®Œç¾äº†ã€‚\näº‹å®ä¸Šæ‰‹åŠ¨å£°æ˜å˜é‡ç»å¸¸æ˜¯åœ¨ç”»è›‡æ·»è¶³ï¼Œæ— è®ºæ˜¯æ­£ç¡®ç‡è¿˜æ˜¯æ•ˆç‡ä¸Šã€‚\nItem 6: Use the explicitly typed initializer idiom when auto deduces undesired types. çºµä½¿autoæœ‰ä¸‡èˆ¬å¥½ï¼Œä½†æ˜¯autoä¹Ÿä¼šå‡ºç°æ¨æ–­çš„ç±»å‹å’Œä½ å¿ƒç›®ä¸­æœŸå¾…çš„ä¸ä¸€æ ·çš„æƒ…å†µï¼ˆå½“ç„¶ä¹Ÿä¸å®Œå…¨æ˜¯autoé”™äº†å“¦ğŸ˜€ï¼‰ ä¸‹é¢ä¸¾ä¸€ä¸ªautoæ¨æ–­ä¸ç¬¦åˆé¢„æœŸçš„ä¾‹å­ã€‚\nä¸Šè¿°å£°æ˜äº†ä¸€ä¸ªè¿”å›vector\u0026lt; bool \u0026gt;ç±»å‹çš„å‡½æ•°ï¼Œä½¿ç”¨äº†autoä¹‹åè™½ç„¶ä»ç„¶èƒ½å¤Ÿç›´æ¥è¿›è¡Œç¼–è¯‘å’Œè¿è¡Œä½†æ˜¯ç»“æœå´ä¸æ˜¯æ‰€æƒ³è¦çš„ã€‚\nè€Œå‘ç”Ÿè¿™æ ·é”™è¯¯çš„åŸå› æ˜¯ï¼Œåœ¨c++çš„è®¾è®¡å½“ä¸­å›é¿äº†bitçš„å¼•ç”¨æ‰€ä»¥è¿”å›çš„ä¸æ˜¯bool\u0026amp;ï¼Œå®é™…ä¸Šc++ä¸­è®¾è®¡äº†ä¸€ä¸ªä»£ç†ç±»æ¥å®Œæˆå‘boolçš„è½¬æ¢æ“ä½œï¼Œè¿™å°±ä¸å±•å¼€ç»†è¯´äº†ï¼Œä½†æ˜¯ä»£ç†ç±»å¹¶ä¸å°‘è§ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆå°±æ˜¯ä¸€ç§ä»£ç†ç±»ã€‚\nä»£ç†ç±»çš„è®¾è®¡åœ¨ä½¿ç”¨çš„æ—¶å€™å°½é‡å°‘çš„å¯¹ç¨‹åºå‘˜æš´éœ²å†…éƒ¨ç»†èŠ‚ï¼Œè¿™äº›ä»£ç†ç±»çš„ä½¿ç”¨å¾€å¾€ä¼šåœ¨æ–‡æ¡£ä¸­æ ‡è¯†å‡ºæ¥ï¼Œå¦‚æœåœ¨æ–‡æ¡£ä¸­æ²¡æœ‰ä½“ç°çš„è¯ï¼Œä¹Ÿé¿å…ä¸äº†åœ¨å¤´æ–‡ä»¶ä¸­æ¼å‡ºä¸€äº›ç ´ç»½ï¼Œæœ€ä¸æµåœ¨debugçš„æ—¶å€™å¯èƒ½ä¹Ÿä¼šå‘è§‰æ˜¯ä½¿ç”¨äº†ä»£ç†ç±»ã€‚\nä½†æ˜¯è¿™äº›éƒ½ä¸é‡è¦äº†ï¼Œç°åœ¨é‡è¦çš„äº‹æ€ä¹ˆæŠŠautoå¼•å¯¼åˆ°æ­£ç¡®çš„é“è·¯ä¸ŠğŸ™ƒã€‚\nå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå¼ºåˆ¶çš„ç±»å‹è½¬æ¢ï¼Œè®©å®ƒå»åˆ°è¯¥å»çš„ä½ç½®ï¼Œè™½ç„¶çœ‹èµ·æ¥æœ‰ç‚¹æ»‘ç¨½ï¼Œç»™äººä¸€ç§å¤´ç—›åŒ»è„šçš„æ„Ÿè§‰ğŸ¤£ã€‚è™½ç„¶åœ¨è¿™äº›æ—¶å€™ä½ ä¹Ÿå¯ä»¥æ”¾å¼ƒä½¿ç”¨autoï¼Œä½†æ˜¯åœ¨è¿™ä¸ªè¸©å‘çš„è¿‡ç¨‹ä¸­ä¸æ˜¯ä¹Ÿæ”¶è·äº†æ–°çš„çŸ¥è¯†ä¹ˆ?ğŸ˜\næ€»ä¹‹è®°ä½ä»¥ä¸‹ä¸¤ç‚¹ éšå½¢çš„ä»£ç†ç±»å¯èƒ½ä¼šè®©autoæ¨æ–­å‡ºé”™è¯¯çš„ç±»å‹ã€‚ æ˜¾å¼çš„ç±»å‹è½¬æ¢å¯ä»¥è®©autoèµ°å‘æ­£ç¡®é“è·¯ã€‚ Moving to Modern C++ æ¥ä¸‹æ¥è¿™ä¸€ç« ä¼šè¯¦ç»†ä»‹ç»ç°ä»£c++çš„ä¸€äº›ç»†èŠ‚ç‰¹æ€§ã€‚æˆ‘è‡ªå·±ä¼šè®°å½•å‡ ä¸ªæˆ‘è®¤ä¸ºæ¯”è¾ƒå®ç”¨çš„ã€‚å¹¶ä¸æ˜¯å…¨éƒ¨ã€‚\nItem 8: Prefer nullptr to 0 and NULL. éå¸¸æ˜¾ç„¶çš„æ˜¯0çš„ç±»å‹æ˜¯intï¼Œä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä½†æ˜¯åœ¨ä¸€ä¸ªæœ¬åº”è¯¥å‡ºç°æŒ‡é’ˆç±»å‹çš„åœ°æ–¹å‡ºç°äº†0ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šå‹‰å¼ºå§0è§£é‡Šä¸ºç©ºæŒ‡é’ˆï¼Œä½†è¿™æ¯•ç«Ÿæ˜¯ä¸å¾—å·²è€Œä¸ºä¹‹çš„è¡Œä¸ºğŸ™‰ï¼Œ æ€»ä¹‹0æ˜¯intï¼Œä¸æ˜¯æŒ‡é’ˆã€‚\nnullptrâ€™s advantage is that it doesnâ€™t have an integral type. To be honest, it doesnâ€™t have a pointer type, either, but you can think of it as a pointer of all types. nullptrâ€™s actual type is std::nullptr_t, and, in a wonderfully circular definition, std::nullptr_t is defined to be the type of nullptr. The type std::nullptr_t implicitly converts to all raw pointer types, and thatâ€™s what makes nullptr act as if it were a pointer of all types.\næ‰€ä»¥ç”¨nullptræ€»ä¼šçš„åˆ°æ­£ç¡®ç±»å‹çš„ç©ºæŒ‡é’ˆï¼Œè€Œä¸ç”¨ç¼–è¯‘å™¨è¿›è¡Œä¸æƒ…æ„¿çš„è½¬æ¢ã€‚ä¸ä»…å¦‚æ­¤ï¼Œä½¿ç”¨nullptrè¿˜ä¼šæé«˜ä»£ç çš„å¯è¯»æ€§ã€‚\né€šè¿‡ä»¥ä¸Šä¸¤æ®µä»£ç çš„å¯¹æ¯”æˆ‘ç›¸ä¿¡å¾ˆå¿«å°±èƒ½æ„Ÿè§‰åˆ°å·®è·æ‰€åœ¨ã€‚å…¶å®æœ€é‡è¦çš„æ˜¯åœ¨ä½¿ç”¨autoçš„æ—¶å€™0å’Œnullå¯èƒ½ä¼šè¿›è¡Œé”™è¯¯çš„æ¨å¯¼ã€‚\nå°½é‡é‡‡ç”¨nullptrè€Œä¸æ˜¯0æˆ–è€…null é¿å…åœ¨æ•´å½¢å’ŒæŒ‡é’ˆç±»å‹ä¹‹é—´çš„é‡è½½ã€‚ Item 12: Declare overriding functions override. åœ¨éœ€è¦é‡å†™çš„å‡½æ•°ä¸­æ·»åŠ overrideå£°æ˜ï¼Œå¥½å¤„å°±æ˜¯èƒ½å‡å°‘å‡ºé”™çš„å‡ ç‡å§ï¼Œç®—æ˜¯ä¸€ä¸ªç¼–ç¨‹çš„å¥½ä¹ æƒ¯ã€‚\nItem 13: Prefer const_iterators to iterators. åœ¨c++11ä¹‹å‰ä¸­æ ‡å‡†åº“ä¸­ç¼ºå°‘cbeginå’Œcendè¿™æ ·å¸¦æœ‰cè¯­è¨€é£æ ¼çš„å‡½æ•°ï¼Œä½†æ˜¯å®é™…ä¸Šconstçš„beginï¼ˆï¼‰å’Œcbeginï¼ˆï¼‰å‡ ä¹æ˜¯æ²¡æœ‰ä»»ä½•åŒºåˆ«çš„ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Œæ®è¯´æ˜¯æˆå‘˜å‡½æ•°è®¾è®¡ä¸è‡ªç”±å‡½æ•°è®¾è®¡ä¹‹äº‰ğŸ™ƒï¼Ÿä¸æ˜¯å¾ˆæ‡‚ã€‚\næ€»ä¹‹ä½¿ç”¨const_iteratorsæ˜¯æœ‰å¥½å¤„çš„ï¼Œèµ·ç ä½ çš„ä»£ç å˜å¾—æ ‡å‡†èµ·æ¥äº†ä¸æ˜¯ä¹ˆï¼Ÿ\nItem 16: Make const member functions thread safe. å½“æˆ‘ä»¬ç”¨ä¸€ä¸ªç±»è¡¨ç¤ºå¤šé¡¹å¼ä¼šéå¸¸çš„æ–¹ä¾¿ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªè®¡ç®—å¤šé¡¹å¼æ ¹çš„å‡½æ•°ï¼Œè¿™ä¸ªå¤šé¡¹å¼ä¸€èˆ¬ä¸ä¼šé€ æˆå¤šé¡¹å¼å€¼çš„æ”¹åŠ¨ï¼Œæ‰€ä»¥æŠŠè¿™ä¸ªå‡½æ•°å£°æ˜ä¸ºconstæˆå‘˜å‡½æ•°æ˜¯ä¸€ä»¶éå¸¸æ­£å¸¸çš„äº‹æƒ…ã€‚\nï¼ˆitem9æ˜¯è¯´ä¼˜å…ˆä½¿ç”¨åˆ«åè€Œä¸æ˜¯typedefsï¼‰\nç”±äºè®¡ç®—æœºè®¡ç®—å¤šé¡¹å¼è§£çš„è¿‡ç¨‹å¼€é”€æ˜¯éå¸¸å¤§çš„ï¼Œæ‰€ä»¥å³ä½¿æ˜¯è®¡ç®—ä¹Ÿä¼šæŠŠç»“æœç¼“å­˜èµ·æ¥ï¼Œå‡å°å¼€é”€ï¼Œä»¥ä¸‹æ˜¯ä¸€ç§åŸºæœ¬çš„åšæ³•ï¼š\nåœ¨ä¸€èˆ¬çš„constå‡½æ•°ä¸­ä¸ä¼šæ”¹å˜ä»»ä½•å€¼ï¼Œä½†æ˜¯åœ¨æœ¬ä¾‹ä¸­ï¼Œç”±äºæ ¹çš„ç»„æˆéƒ¨åˆ†ä¸åªæ˜¯å€¼è¿˜æœ‰ä¸€äº›æ ‡å¿—ä½ï¼Œåœ¨æ±‚å€¼çš„è¿‡ç¨‹ä¸­æ ‡å¿—ä½ä¼šå‘ç”Ÿæ”¹å˜ã€‚\nè¿™ä¸¤ä¸ªçº¿ç¨‹å°±ä¼šäº§ç”Ÿä¸å®‰å…¨çš„è¡Œä¸ºã€‚æœ€å¸¸è§çš„è§£å†³åŠæ³•å°±æ˜¯åŠ å…¥äº’æ–¥å˜é‡ã€‚\nä½†æ˜¯ç”¨latchä¼¼ä¹æœ‰ç‚¹æ€é¸¡ç”¨ç‰›åˆ€äº†ã€‚\nå¦‚æœåªæ˜¯è®°å½•å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°å¹¶ä¸”ä¿è¯å…¶ä»–å‡½æ•°èƒ½å¤Ÿè§‚æµ‹åˆ°è¿™ä¸€è¡Œä¸ºå¯ä»¥ä½¿ç”¨ std::atomic counterï¼Œä¸‹é¢å°†æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨è¿™ä¸ªåŸå­çš„è®¡æ•°å™¨ã€‚ ä½†æ˜¯éœ€è¦è°¨æ…çš„ä½¿ç”¨è¿™ä¸ªåŸå­çš„è®¡æ•°å™¨ï¼Œä»¥ä¸‹æ˜¯ä¸¤ä¸ªåä¾‹ã€‚\nåœ¨è¿™ä¸ªä¾‹å­ä¸­å‡å¦‚ç¬¬ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œåˆ°=trueçš„éƒ¨åˆ†ï¼Œè¿™æ—¶ç¬¬äºŒä¸ªçº¿ç¨‹è¿›å…¥å‘ç°æ ‡è¯†ä½ä¸ºtrueäºæ˜¯è¿”å›äº†ä¸€ä¸ªä¸æ˜¯ç»è¿‡è®¡ç®—çš„å€¼ã€‚\nå¦‚æœå°†è¿™ä¸¤ä¸ªå¥å­çš„é¡ºåºé¢ å€’ä¼šå‘ç”Ÿä¸€äº›ä¸ä¸€æ ·çš„ä¸œè¥¿ä¹ˆï¼Ÿ ç­”æ¡ˆæ˜¯ä¸ä¼šã€‚è¿™ä¸ªå‡½æ•°ä»ç„¶æ˜¯ä¸å®Œç¾çš„\nå› ä¸ºå»¶è¿Ÿä¿®æ”¹æ ‡å¿—ä½ï¼Œæ‰€ä»¥æœ‰å¯èƒ½ä¼šå‡ºç°é‡å¤çš„è®¡ç®—ã€‚\nå¯¹äºæ‹¥æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„éœ€è¦åŒæ­¥çš„å˜é‡å°½é‡é‡‡ç”¨mutexå§ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªå¥½çš„ç¤ºèŒƒã€‚\nä¿è¯constæˆå‘˜å‡½æ•°çš„çº¿ç¨‹å®‰å…¨ ä½¿ç”¨åŸå­çš„è®¡æ•°å™¨ï¼Œä½†æ˜¯éœ€è¦è°¨æ…ã€‚ Smart Pointers åŸå§‹æŒ‡é’ˆè™½ç„¶éå¸¸çš„å¼ºå¤§ï¼Œä½†æ˜¯å¾€å¾€ä¼´éšç€ä»¥ä¸‹å‡ ç‚¹é—®é¢˜ï¼š\næŒ‡é’ˆçš„å£°æ˜å¹¶ä¸èƒ½ç›´è§‚çœ‹å‡ºæ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡æˆ–è€…ä¸€ä¸ªæ•°ç»„ã€‚eg.ä¸€ä¸ªintå’Œä¸€ä¸ªintæ•°ç»„çš„æŒ‡é’ˆéƒ½æ˜¯int*ã€‚ ä¸çŸ¥é“åœ¨ä½¿ç”¨ä¹‹åæ˜¯å¦åº”è¯¥é”€æ¯æŒ‡é’ˆæ‰€æŒ‡çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸çŸ¥é“æŒ‡é’ˆæ˜¯å¦æ‹¥æœ‰æ‰€æŒ‡å¯¹è±¡ã€‚ å³ä½¿çŸ¥é“äº†æ‰€æŒ‡çš„å¯¹è±¡ä¹Ÿä¸ç¡®å®šå…·ä½“çš„é”€æ¯æ–¹æ³•ï¼Œæ˜¯ç”¨deleteè¿˜æ˜¯å…¶ä»–ç‰¹æ®Šçš„ææ„å‡½æ•°ã€‚ å¦‚æœçŸ¥é“äº†ç”¨deleteæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯ç”±äºåŸå› 1ï¼Œæ‰€ä»¥ä¸çŸ¥é“deleteä¸€ä¸ªå¯¹è±¡è¿˜æ˜¯delete[]ä¸€ä¸ªæ•°ç»„ã€‚ æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½å¯é çš„æ£€æµ‹æ‚¬ç©ºçš„æŒ‡é’ˆã€‚ æ™ºèƒ½æŒ‡é’ˆæ˜¯è§£å†³è¿™ç§é—®é¢˜çš„ä¸€ç§æ–¹æ³•ï¼Œæ™ºèƒ½æŒ‡é’ˆæ˜¯å¯¹åŸå§‹æŒ‡é’ˆçš„ä¸€ç§åŒ…è£…ã€‚è¡Œä¸ºå¾ˆç±»ä¼¼ï¼Œå´èƒ½é¿å…å¾ˆå¤šå‘ï¼Œæ‰€ä»¥åœ¨æ—¥å¸¸çš„ä»£ç ä¸­åº”è¯¥ä¼˜å…ˆé€‰ç”¨æ™ºèƒ½æŒ‡é’ˆè€Œéè£¸æŒ‡é’ˆã€‚\nåœ¨æˆ‘æ¥è§¦åˆ°çš„ä»£ç ä¸­æ™ºèƒ½æŒ‡é’ˆåŸºæœ¬ä¸Šå°±ä¼šç”¨ä¸¤ä¸ªï¼šstd::unique_ptrå’Œstd::shared_ptrã€‚\nItem 18: Use std::unique_ptr for exclusive-ownership resource management. å½“ä½ éœ€è¦ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆçš„æ—¶å€™std::unique_ptrå‡ ä¹å°±æ˜¯é¦–é€‰ï¼Œå®ƒæ‹¥æœ‰å’Œè£¸æŒ‡é’ˆå·®ä¸å¤šçš„å¤§å°ï¼Œå„ç§æ“ä½œçš„æ•ˆç‡ä¹Ÿå·®ä¸å¤šã€‚å¦‚æœè£¸æŒ‡é’ˆèƒ½å¤Ÿæ»¡è¶³è¦æ±‚çš„è¯ï¼Œé‚£ä¹ˆstd::unique_pträ¹Ÿä¸€å®šå¯ä»¥çš„ã€‚\nstd::unique_ptrå®ç°çš„æ˜¯ä¸“å±æ‰€æœ‰æƒè¯­ä¹‰ã€‚ä¸€ä¸ªéç©ºçš„std::unique_ptræ€»æ˜¯æ‹¥æœ‰å…¶å¯¹å¯¹è±¡çš„æ‰€æœ‰æƒï¼Œé™¤éç”¨std::move()å‡½æ•°æŠŠæ‰€æœ‰æƒä»åŸæŒ‡é’ˆâ€œç§»åŠ¨åˆ°â€ç›®æ ‡æŒ‡é’ˆï¼ŒåŸæŒ‡é’ˆåˆ™ä¼šè¢«ç½®ä¸ºç©ºã€‚ä½†æ˜¯std::unique_ptrç»å¯¹ä¸å…è®¸è¿›è¡Œå¤åˆ¶ã€‚\nåŒæ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨getï¼ˆï¼‰å‡½æ•°è¿”å›è£¸æŒ‡é’ˆ\nstd::unique_ptrå¯ä»¥éå¸¸æ–¹ä¾¿çš„è½¬æ¢ä¸ºstd::shared_ptr è¿™å°±ä¸ºä»£ç çš„è§„èŒƒåŒ–ç¼–å†™æä¾›äº†å¾ˆå¤šçš„æ–¹ä¾¿ã€‚\nstd::unique_ptræ˜¯ä¸€ç§é«˜é€Ÿï¼Œå°å·§ï¼Œåªå…·æœ‰ç§»åŠ¨è¯­ä¹‰çš„å¯¹å¯¹è±¡æƒ³æœ‰ä¸“å±æ‰€æœ‰æƒçš„æ™ºèƒ½æŒ‡é’ˆã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œææ„å‡½æ•°æ˜¯deleteï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šææ„å‡½æ•°ã€‚ å°†å…¶è½¬åŒ–ä¸ºstd::shared_ptræ˜¯éå¸¸å®¹æ˜“çš„ ","permalink":"https://jialog.top/posts/c++/effective-modern-c++/","summary":"\u003ch2 id=\"auto\"\u003eauto\u003c/h2\u003e\n\u003cp\u003eåœ¨æ¦‚å¿µä¸Šautoå·²ç»æç®€äº†ï¼Œä½†æ˜¯å®é™…ä¸Šä»ç„¶è¦å¾®å¦™è®¸å¤šã€‚å®ƒå¯ä»¥èŠ‚çº¦å£°æ˜ç±»å‹ï¼Œä¹Ÿå¯ä»¥é¿å…è®¸å¤šæ‰‹åŠ¨ç±»å‹çš„æ­£ç¡®æ€§å’Œå£°æ˜é—®é¢˜ã€‚ä½†æ˜¯ä»ç»“æœçš„è§’åº¦æ¥è¯´ï¼Œå°½ç®¡autoå¾ˆåŠªåŠ›åœ¨åšäº‹äº†ï¼Œä½†æ˜¯ä»ç„¶å¯èƒ½æ˜¯é”™è¯¯çš„ã€‚å¦‚æœå‡ºç°è¿™ç§æƒ…å†µæˆ‘ä»¬è¦çŸ¥é“å¦‚ä½•å»å¼•å¯¼autoè®©ä»–æˆä¸ºæ­£ç¡®çš„ç±»å‹ï¼Œå› ä¸ºé€€å›ä½¿ç”¨æ‰‹åŠ¨å£°æ˜ç±»å‹ä»ç„¶æ˜¯ä¸‹ä¸‹ç­–ã€‚\u003c/p\u003e\n\u003cp\u003eæ¥ä¸‹æ¥çš„å†…å®¹ä¼šæ¶µç›–\u003ccode\u003eauto\u003c/code\u003eçš„æ‰€æœ‰ç»†èŠ‚\u003c/p\u003e\n\u003ch3 id=\"item-5-prefer-auto-to-explicit-type-declarations\"\u003eItem 5: Prefer auto to explicit type declarations.\u003c/h3\u003e\n\u003cp\u003eä¸ä»…å¯ä»¥é¿å…å‡ºç°ä¸ºåˆå§‹åŒ–çš„å˜é‡ï¼Œé¿å…å•°å—¦åˆç¹æ‚çš„ç±»å‹å£°æ˜ï¼Œèƒ½ç›´æ¥æŒæœ‰é—­åŒ…ï¼Œè¿˜å¯ä»¥é¿å…ä¸€äº›å› ä¸ºâ€œç±»å‹æ·å¾„â€å‡ºç°çš„é—®é¢˜ã€‚\neg1.\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231210204514.png\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eæœ‰ä¸€äº›ç¨‹åºå‘˜ä¼šå¯¹ç±»å‹å‘ç”Ÿè¯¯åˆ¤ï¼Œåˆ°æ—¶ç”¨èŒƒå›´è¾ƒå°çš„ç±»å‹åœ¨32ä½æœºå™¨ä¸Šèƒ½å¤Ÿè¿è¡Œä½†æ˜¯åœ¨64ä½æœºå™¨ä¸Šå‘ç”Ÿäº†æ”¹å˜ï¼Œå¯¼è‡´ç¨‹åºåœ¨ç§»æ¤çš„æ—¶å€™å‡ºç°é—®é¢˜ã€‚\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eeg2.\n\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231210205424.png\"\u003e\u003c/p\u003e\n\u003cp\u003eä¸Šè¿°ä»£ç çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å½“å®é™…è¿è¡Œä¹‹åå¹¶æ²¡æœ‰å¯¹å“ˆå¸Œè¡¨mè¿›è¡Œæ“ä½œã€‚åŸå› åœ¨äºå“ˆå¸Œè¡¨ä¸­çš„kayå€¼æ˜¯constç±»å‹çš„ï¼Œæ‰‹åŠ¨å£°æ˜çš„ç±»å‹ä¸ä¸€æ ·çš„è¯ç¼–è¯‘å™¨ä¼šè¿›è¡Œä¸€ä¸ªç¥å¥‡çš„æ“ä½œï¼Œå®ƒä¼šè®²mä¸­çš„å†…å®¹å¤åˆ¶æˆä¸ºä¸´æ—¶å˜é‡å°†keyçš„ç±»å‹æ”¹ä¸ºå’Œå£°æ˜ä¸€è‡´çš„ï¼Œå†å°†pç»‘å®šåˆ°ä¸´æ—¶å˜é‡ä¸Šã€‚\u003c/p\u003e\n\u003ch4 id=\"summary\"\u003eSummary\u003c/h4\u003e\n\u003cp\u003eautoè¯´åˆ°åº•åªæ˜¯ä¸€ä¸ªå¯é€‰é¡¹ç½¢äº†ï¼Œä¸æ˜¯å¿…é€‰é¡¹ï¼Œå¦‚æœä½ è§‰å¾—ä½ çš„é¡¹ç›®ä½¿ç”¨æ˜¾å¼çš„å£°æ˜èƒ½å¤Ÿä½¿å¾—é¡¹ç›®å˜å¾—æ›´åŠ çš„å¯è¯»å’Œé«˜æ•ˆï¼Œå½“ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨ã€‚ä½†æ˜¯c++å¼•å…¥autoå¹¶ä¸æ˜¯ä¸€ä¸ªå¤šæ–°é²œçš„ä¸œè¥¿ï¼Œåªæ˜¯ä¸€ä¸ªåœ¨å…¶ä»–è¯­è¨€ä¸­è¢«ç§°ä¸ºâ€œç±»å‹æ¨å¯¼â€çš„ä¸œè¥¿ç½¢äº†ã€‚åœ¨å…¶ä»–çš„é™æ€ç±»å‹è¯­è¨€ä¸­ç±»å‹æ¨å¯¼éƒ½æˆ–å¤šæˆ–å°‘å­˜åœ¨ã€‚è€Œä¸”åŠ¨æ€è¯­è¨€è¿˜ä¸ºç±»å‹æ¨å¯¼ç§¯ç´¯äº†å¤§é‡çš„ç»éªŒã€‚è€Œä¸”æ­¤ç±»æŠ€æœ¯å¹¶ä¸ä¼šäºå¤§å‹çš„å·¥ç¨‹é¡¹ç›®äº§ç”Ÿå†²çªã€‚\u003c/p\u003e\n\u003cp\u003eä¸€äº›äººè§‰å¾—ç”¨å®Œautoä¹‹åä¼šè®©å˜é‡çš„ç±»å‹å˜å¾—ä¸æ˜¯ä¸€çœ¼å¯ä»¥è¯†åˆ«ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜éšç€ideçš„ä¼˜åŒ–å’Œé€‚é…å·²ç»è¢«è§£å†³çš„ç›¸å½“å®Œç¾äº†ã€‚\u003c/p\u003e\n\u003cp\u003eäº‹å®ä¸Šæ‰‹åŠ¨å£°æ˜å˜é‡ç»å¸¸æ˜¯åœ¨ç”»è›‡æ·»è¶³ï¼Œæ— è®ºæ˜¯æ­£ç¡®ç‡è¿˜æ˜¯æ•ˆç‡ä¸Šã€‚\u003c/p\u003e\n\u003ch3 id=\"item-6-use-the-explicitly-typed-initializer-idiom-when-auto-deduces-undesired-types\"\u003eItem 6: Use the explicitly typed initializer idiom when auto deduces undesired types.\u003c/h3\u003e\n\u003cp\u003eçºµä½¿autoæœ‰ä¸‡èˆ¬å¥½ï¼Œä½†æ˜¯autoä¹Ÿä¼šå‡ºç°æ¨æ–­çš„ç±»å‹å’Œä½ å¿ƒç›®ä¸­æœŸå¾…çš„ä¸ä¸€æ ·çš„æƒ…å†µï¼ˆå½“ç„¶ä¹Ÿä¸å®Œå…¨æ˜¯autoé”™äº†å“¦ğŸ˜€ï¼‰\nä¸‹é¢ä¸¾ä¸€ä¸ªautoæ¨æ–­ä¸ç¬¦åˆé¢„æœŸçš„ä¾‹å­ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|650\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231210214843.png\"\u003e\u003c/p\u003e\n\u003cp\u003eä¸Šè¿°å£°æ˜äº†ä¸€ä¸ªè¿”å›vector\u0026lt; bool \u0026gt;ç±»å‹çš„å‡½æ•°ï¼Œä½¿ç”¨äº†autoä¹‹åè™½ç„¶ä»ç„¶èƒ½å¤Ÿç›´æ¥è¿›è¡Œç¼–è¯‘å’Œè¿è¡Œä½†æ˜¯ç»“æœå´ä¸æ˜¯æ‰€æƒ³è¦çš„ã€‚\u003c/p\u003e\n\u003cp\u003eè€Œå‘ç”Ÿè¿™æ ·é”™è¯¯çš„åŸå› æ˜¯ï¼Œåœ¨c++çš„è®¾è®¡å½“ä¸­å›é¿äº†bitçš„å¼•ç”¨æ‰€ä»¥è¿”å›çš„ä¸æ˜¯bool\u0026amp;ï¼Œå®é™…ä¸Šc++ä¸­è®¾è®¡äº†ä¸€ä¸ª\u003cstrong\u003eä»£ç†ç±»\u003c/strong\u003eæ¥å®Œæˆå‘boolçš„è½¬æ¢æ“ä½œï¼Œè¿™å°±ä¸å±•å¼€ç»†è¯´äº†ï¼Œä½†æ˜¯ä»£ç†ç±»å¹¶ä¸å°‘è§ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ä¸¤ä¸ªæ™ºèƒ½æŒ‡é’ˆå°±æ˜¯ä¸€ç§ä»£ç†ç±»ã€‚\u003c/p\u003e\n\u003cp\u003eä»£ç†ç±»çš„è®¾è®¡åœ¨ä½¿ç”¨çš„æ—¶å€™å°½é‡å°‘çš„å¯¹ç¨‹åºå‘˜æš´éœ²å†…éƒ¨ç»†èŠ‚ï¼Œè¿™äº›ä»£ç†ç±»çš„ä½¿ç”¨å¾€å¾€ä¼šåœ¨æ–‡æ¡£ä¸­æ ‡è¯†å‡ºæ¥ï¼Œå¦‚æœåœ¨æ–‡æ¡£ä¸­æ²¡æœ‰ä½“ç°çš„è¯ï¼Œä¹Ÿé¿å…ä¸äº†åœ¨å¤´æ–‡ä»¶ä¸­æ¼å‡ºä¸€äº›ç ´ç»½ï¼Œæœ€ä¸æµåœ¨debugçš„æ—¶å€™å¯èƒ½ä¹Ÿä¼šå‘è§‰æ˜¯ä½¿ç”¨äº†ä»£ç†ç±»ã€‚\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯è¿™äº›éƒ½ä¸é‡è¦äº†ï¼Œç°åœ¨é‡è¦çš„äº‹æ€ä¹ˆæŠŠautoå¼•å¯¼åˆ°æ­£ç¡®çš„é“è·¯ä¸ŠğŸ™ƒã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|700\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231210220544.png\"\u003e\u003c/p\u003e\n\u003cp\u003eå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå¼ºåˆ¶çš„ç±»å‹è½¬æ¢ï¼Œè®©å®ƒå»åˆ°è¯¥å»çš„ä½ç½®ï¼Œè™½ç„¶çœ‹èµ·æ¥æœ‰ç‚¹æ»‘ç¨½ï¼Œç»™äººä¸€ç§å¤´ç—›åŒ»è„šçš„æ„Ÿè§‰ğŸ¤£ã€‚è™½ç„¶åœ¨è¿™äº›æ—¶å€™ä½ ä¹Ÿå¯ä»¥æ”¾å¼ƒä½¿ç”¨autoï¼Œä½†æ˜¯åœ¨è¿™ä¸ªè¸©å‘çš„è¿‡ç¨‹ä¸­ä¸æ˜¯ä¹Ÿæ”¶è·äº†æ–°çš„çŸ¥è¯†ä¹ˆ?ğŸ˜\u003c/p\u003e\n\u003cp\u003eæ€»ä¹‹è®°ä½ä»¥ä¸‹ä¸¤ç‚¹\n\u003cimg alt=\"image.png|700\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231210220919.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eéšå½¢çš„ä»£ç†ç±»å¯èƒ½ä¼šè®©autoæ¨æ–­å‡ºé”™è¯¯çš„ç±»å‹ã€‚\u003c/li\u003e\n\u003cli\u003eæ˜¾å¼çš„ç±»å‹è½¬æ¢å¯ä»¥è®©autoèµ°å‘æ­£ç¡®é“è·¯ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"moving-to-modern-c\"\u003eMoving to Modern C++\u003c/h2\u003e\n\u003cp\u003eæ¥ä¸‹æ¥è¿™ä¸€ç« ä¼šè¯¦ç»†ä»‹ç»ç°ä»£c++çš„ä¸€äº›ç»†èŠ‚ç‰¹æ€§ã€‚æˆ‘è‡ªå·±ä¼šè®°å½•å‡ ä¸ªæˆ‘è®¤ä¸ºæ¯”è¾ƒå®ç”¨çš„ã€‚å¹¶ä¸æ˜¯å…¨éƒ¨ã€‚\u003c/p\u003e\n\u003ch3 id=\"item-8-prefer-nullptr-to-0-and-null\"\u003eItem 8: Prefer nullptr to 0 and NULL.\u003c/h3\u003e\n\u003cp\u003eéå¸¸æ˜¾ç„¶çš„æ˜¯0çš„ç±»å‹æ˜¯\u003cstrong\u003eint\u003c/strong\u003eï¼Œä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä½†æ˜¯åœ¨ä¸€ä¸ªæœ¬åº”è¯¥å‡ºç°æŒ‡é’ˆç±»å‹çš„åœ°æ–¹å‡ºç°äº†0ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šå‹‰å¼ºå§0è§£é‡Šä¸ºç©ºæŒ‡é’ˆï¼Œä½†è¿™æ¯•ç«Ÿæ˜¯ä¸å¾—å·²è€Œä¸ºä¹‹çš„è¡Œä¸ºğŸ™‰ï¼Œ æ€»ä¹‹0æ˜¯intï¼Œä¸æ˜¯æŒ‡é’ˆã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003enullptrâ€™s advantage is that it doesnâ€™t have an integral type. To be honest, it doesnâ€™t have a pointer type, either, but you can think of it as a pointer of all types. nullptrâ€™s actual type is std::nullptr_t, and, in a wonderfully circular definition, std::nullptr_t is defined to be the type of nullptr. The type std::nullptr_t implicitly converts to all raw pointer types, and thatâ€™s what makes nullptr act as if it were a pointer of all types.\u003c/p\u003e","title":"Effective Modern C++ ç¬”è®°"},{"content":"ç¯å¢ƒæ­å»º æŒ‰ç…§P0çš„æŒ‡å¯¼ä¸­è¿›è¡Œç¯å¢ƒçš„æ­å»ºï¼Œç”±äºæˆ‘æœ¬äººç°åœ¨æ—¶WINå¹³å°ï¼Œè¯¾ç¨‹æ²¡æœ‰æä¾›ä¸€é”®é…ç½®ç¯å¢ƒçš„è„šæœ¬ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº‘æœåŠ¡å™¨è¿›è¡Œç¯å¢ƒçš„æ„å»ºï¼Œå¾ˆç¨³ã€‚\nä½†æ˜¯æˆ‘çš„äº‘æœåŠ¡å™¨é…ç½®åªæœ‰2æ ¸2Gåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šçˆ†å†…å­˜ã€‚è¿™é‡Œè¿˜æœ‰ä¸ªæ•…äº‹ï¼Œåœ¨çˆ†å†…å­˜ä¹‹åæˆ‘å·²ç»æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ç»™é˜¿é‡Œäº‘å®¢æœæäº†ä¸ªå·¥å•è¯•å›¾èƒ½ç™½å«–ä¸€äº›é…ç½®ï¼Œå®¢æœè¿˜æ˜¯å¾ˆæœ‰æ°´å¹³çš„ï¼Œç›´æ¥å°±åˆ†æå‡ºæ¥æˆ‘æ˜¯å†…å­˜çˆ†äº†å¯¼è‡´çš„ï¼Œä½†æ˜¯ç›´æ¥å»ºè®®æˆ‘åŠ é’±å‡çº§é…ç½®ï¼Œä¸å‘Šè¯‰æˆ‘è®¾ç½®swapåˆ†åŒºï¼Œæœ‰ç‚¹ä¸åšé“äº†ã€‚\nè¯è¯´å›æ¥ï¼Œè®¾ç½®å®Œswapåˆ†åŒºä¹‹åå°±æ²¡æœ‰å†å‡ºç°è¿‡çˆ†å†…å­˜çš„ç°è±¡ã€‚ç”¨VScodeçš„è¿œç¨‹å¼€å‘ï¼Œä½“éªŒè¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚\nOverview p1ä¸»è¦æ˜¯å†…å­˜ç®¡ç†éƒ¨åˆ†çš„å†…å®¹ï¼Œè¿™é—¨è¯¾ç¨‹çš„è¯¾æœ¬å’Œå½•åˆ¶è§†é¢‘è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çœ‹ä¸€ä¸‹çš„ã€‚\nä¸»è¦çš„ä»»åŠ¡æ˜¯ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ï¼š\nå¯æ‰©å±•çš„å“ˆå¸Œè¡¨ LRU-Kçš„æ·˜æ±°ç­–ç•¥çš„è§†çº¿ Buffer Poolçš„ä¸€ä¸ªå®ä¾‹ åœ¨å¼€å§‹æ¢³ç†é¡¹ç›®ä¹‹å‰æˆ‘æƒ³è¦å…ˆè§£é‡Šæ¸…æ¥šä¸€ä¸‹ä¸‰ä¸ªä»»åŠ¡ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠå„ä¸ªéƒ¨åˆ†çš„è´Ÿè´£ã€‚\nframeæ›´åƒæ˜¯ä¸€ä¸ªè½½ä½“ï¼Œè€Œpageæ˜¯å…¶ä¸­çš„å†…å®¹ã€‚æ‰“ä¸ªæ¯”æ–¹æ¥è¯´ï¼Œä¸€ä¸ªä»“åº“ï¼ˆbuffer poolï¼‰åªæœ‰100è¾†è´§è½¦ï¼ˆframeï¼‰ï¼Œè€Œè´§ç‰©ï¼ˆpageï¼‰æˆåƒä¸Šä¸‡ç§ï¼Œæ¯æ¬¡éƒ½æ˜¯ä»“åº“å‘Šè¯‰è´§è½¦éœ€è¦ä»€ä¹ˆè´§ç‰©ç„¶åç”±è´§è½¦å¸¦ç€è´§ç‰©æ¥åˆ°ä»“åº“ï¼Œè€Œå¯æ‰©å±•çš„å“ˆå¸Œè¡¨å°±æ˜¯ç™»è®°è´§è½¦å’Œè´§ç‰©çš„å¯¹åº”å…³ç³»ã€‚å› ä¸ºåªæœ‰100è¾†è´§è½¦ï¼Œå½“æ¯è¾†è½¦éƒ½æ˜¯æ»¡çš„æ—¶å€™ï¼ˆæ²¡æœ‰é—²ç½®çš„è½¦è¾†free_listä¸ä¸ºç©ºï¼‰å°±éœ€è¦æ ¹æ®task2çš„LRU-Kç®—æ³•æŒ‘é€‰å‡ºä¸€ä¸ªç¬¦åˆè¦æ±‚çš„è´§è½¦æ¸…ç©ºåå»è£…è½½æŒ‡å®šçš„è´§ç‰©ã€‚ è€Œtask3å°±æ˜¯è´Ÿè´£æ•´ä¸ªçš„ç®¡ç†å’Œäº¤äº’ã€‚\nå¤§æ¦‚è§£é‡Šäº†ä¸€ä¸‹ï¼Œå¯èƒ½æ¯”æ–¹ä¸æ˜¯å¾ˆæ°å½“ï¼Œåšçš„æ—¶å€™ä¸€å®šè¦å¤šçœ‹æ–‡æ¡£å’Œæ³¨é‡Šï¼Œå› ä¸ºæ¼çœ‹æ³¨é‡Šç»™æˆ‘å¸¦æ¥äº†æå¤§çš„ç—›è‹¦ã€‚\nTask #1 -ExtendibleHashTable ç›¸å…³å‡½æ•° Find(K,V): æŸ¥è¯¢ä¸€ä¸ªKeyæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™å°†å…¶VæŒ‡é’ˆæŒ‡å‘ç›¸å…³çš„å€¼ï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false Insert(K,V): æ’å…¥ä¸€ä¸ªï¼ˆKï¼ŒVï¼‰ï¼Œå¦‚æœæ’å…¥å¤±è´¥éœ€è¦è¿›è¡Œä¸€ä¸‹æ­¥éª¤çš„é‡è¯•ï¼š æ’å…¥å¤±è´¥è‚¯å®šæ˜¯æ¡¶æ»¡äº†ï¼Œä½†æ˜¯æ¡¶æ»¡äº†åˆ†ä¸ºä¸¤ç§ä¸åŒçš„æƒ…å†µã€‚ ä¸€ç§æ˜¯globalæ·±åº¦å’Œæ¡¶çš„localæ·±åº¦ä¸ç›¸åŒçš„æ—¶å€™ï¼Œéœ€è¦å¯¹æ¡¶è¿›è¡Œé‡æ–°çš„åˆ†é…ã€‚ å½“ä¸¤ä¸ªæ·±åº¦ç›¸åŒçš„æ—¶å€™è¯´æ˜æ¡¶æ˜¯çœŸçš„æ»¡äº†ï¼Œéœ€è¦å¯¹å“ˆå¸Œè¡¨è¿›è¡Œæ‰©å±• Remove(K): åœ¨å“ˆå¸Œè¡¨ä¸­ç§»é™¤å¯¹åº”çš„ï¼ˆKï¼ŒVï¼‰å¯¹ï¼Œä½†æ˜¯éœ€è¦è¿›è¡Œå“ˆå¸Œè¡¨ç¼©å°çš„æ“ä½œã€‚ IndexOf(K): å½“å‰globalæ·±åº¦ä¸‹çš„æ˜ å°„è§„åˆ™ã€‚ é¡¹ç›®æ¶æ„ é¦–å…ˆè¦æ¸…æ¥šè¿™ä¸ªæ˜¯è‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ªå¯æ‰©å±•å“ˆå¸Œè¡¨ç”¨äºä¿å­˜frameå’Œpageçš„æ˜ å°„å…³ç³»çš„ã€‚æˆ‘è§‰å¾—é¦–å…ˆè¦æ˜ç™½frameå’Œpageä¹‹é—´çš„å…³ç³»ã€‚ä¸æ¸…æ¥šçš„å¯ä»¥å›çœ‹ä¸Šæ–‡çš„è§£é‡Šã€‚\nBucket å­˜å‚¨æ¡¶ åœ¨å¯å¯ä»¥æ‰©å±•çš„å“ˆå¸Œè¡¨ç§å¼•å…¥å’ŒBucketçš„æ¦‚å¿µï¼Œç”¨äºè§£å†³å“ˆå¸Œå†²çªçš„é—®é¢˜ï¼Œæ¯ä¸€ä¸ªBucketçš„å¤§å°éƒ½æ˜¯å›ºå®šçš„ï¼Œå½“ä¸€ä¸ªBucketæ»¡äº†çš„æ—¶å€™å°±éœ€è¦è¿›è¡Œå“ˆå¸Œè¡¨çš„æ‰©å±•ã€‚\nBucketçš„ç»„æˆ depth_ï¼šè¡¨ç¤ºæœ¬åœ°æ·±åº¦çš„ä¸€ä¸ªæ ‡è¯†ï¼Œç”¨äºè¯†åˆ«å½“å‰çš„æ·±åº¦æ˜¯å¦å’Œå…¨å±€æ·±åº¦ç›¸åŒã€‚è¦ç‰¹åˆ«æ³¨æ„è¿™ä¸ªå˜é‡ã€‚ list_ï¼šå‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ä¿å­˜å¤šä¸ªï¼ˆKï¼ŒVï¼‰æ˜ å°„çš„åŒå‘é“¾è¡¨ã€‚ sizeï¼šä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œlistçš„é•¿åº¦ä¸èƒ½æ— é™å»¶ä¼¸ï¼Œæ‰€ä»¥è¾¾åˆ°ä¸€å®šé•¿åº¦çš„æ—¶å€™è¦è¿›è¡Œå“ˆå¸Œè¡¨çš„æ‰©å±•ã€‚ å¯æ‰©å±•çš„å“ˆå¸Œè¡¨ç»“æ„ Bucket_size:ç”¨äºé™åˆ¶æ¯ä¸ªbucketçš„listçš„é•¿åº¦ dir_:ç”¨äºå“ˆè¥¿è¿ç®—åä¿å­˜æ˜ å°„å…³ç³»ã€‚ global_depth_:å…¨å±€æ·±åº¦ï¼Œåœ¨æ’å…¥çš„æ—¶å€™æ ¹æ®å…¨å±€æ·±åº¦å’Œå±€éƒ¨æ·±åº¦æ¥ç¡®å®šè¿™ä¸ªæ¡¶æ˜¯å¦è¦è¿›è¡Œé‡æ–°çš„åˆ†é…ã€‚ num_buckets:ç”¨äºç»Ÿè®¡ç°åœ¨ä¸€å…±æœ‰å¤šå°‘bucketã€‚ ReHashçš„è¿‡ç¨‹è¯¦è§£ 1.hashçš„è§„åˆ™æ˜¯ä»€ä¹ˆæ ·çš„\ntemplate \u0026lt;typename K, typename V\u0026gt; auto ExtendibleHashTable\u0026lt;K, V\u0026gt;::IndexOf(const K \u0026amp;key) -\u0026gt; size_t { int mask = (1 \u0026lt;\u0026lt; global_depth_) - 1; return std::hash\u0026lt;K\u0026gt;()(key) \u0026amp; mask; } ä¸Šè¿°å‡½æ•°å°±æ˜¯è¯¥å“ˆå¸Œè¡¨çš„æ˜ å°„è§„åˆ™ï¼Œæ€»çš„æ¥è¯´å°±æ˜¯å–hashå‡½æ•°å€¼çš„ä½global_depthä½\nå‡å¦‚ç°åœ¨global_depth_çš„å€¼ä¸º3ã€‚ é‚£ä¹ˆ 1 \u0026lt;\u0026lt; global_depth_çš„å€¼å°±æ˜¯8è½¬æ¢ä¸ºäºŒè¿›åˆ¶å°±æ˜¯ 1000 ã€‚mask=8-1=7ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶å°±æ˜¯ 111.\nmask çš„ä½œç”¨å°±æ˜¯å–ä¸€ä¸ªä½æ•°å’Œglobal_depth_ä¸€æ ·çš„å…¨1çš„äºŒè¿›åˆ¶æ•°ï¼Œä¸ºäº†å–ä½global_depth_ä½åšé“ºå«ã€‚\nç°åœ¨å‡å¦‚keyçš„å€¼è¿›è¡Œå®Œhashä¹‹åæ˜¯ 10110100011010 å’Œ maskè¿›è¡Œè¿›è¡Œ \u0026amp; çš„æ“ä½œä¹‹åå°±å˜æˆäº† 010 ï¼ˆä½3ä½ï¼‰\nåˆšå¼€å§‹çš„æ—¶å€™æˆ‘çœ‹è¿™ä¸ªå‡½æ•°è®¾è®¡å·¦ç§»æ“ä½œå’Œ\u0026amp;æ“ä½œå¾ˆå¤æ‚çš„æ ·å­ï¼Œæˆ‘å°±æ²¡æ€ä¹ˆåœ¨æ„ï¼Œä¸æ˜¯å¾ˆæ‡‚è¿™ä¸ªå‡½æ•°åœ¨å¹²ä»€ä¹ˆã€‚ä½†æ˜¯ç°åœ¨æƒ³æ¥ mask åº”è¯¥æ˜¯æ©ç çš„æ„æ€ï¼Œæ‰€ä»¥å’Œè®¡ç½‘é‡Œæ©ç çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯å–äºŒè¿›åˆ¶æ•°ä½çš„ä½œç”¨ã€‚\nè¿™ä¸ªå‡½æ•°æ²¡ææ‡‚çœŸçš„ç»™æˆ‘å¸¦æ¥å¾ˆå¤§çš„å›°æ‰°ï¼Œä¸€ç›´æä¸æ‡‚åˆ°åº•æ˜¯æ€ä¹ˆæ˜ å°„çš„ã€‚\n2.ä»€ä¹ˆæ—¶å€™è¿›è¡ŒReHashï¼Œä»¥åŠè¯¦ç»†è¿‡ç¨‹ã€‚\nå½“ä¸€ä¸ªæ¡¶å†…çš„listé•¿åº¦è¾¾åˆ°è§„å®šä¸Šé™çš„æ—¶å€™è¿›è¡ŒRehashã€‚\nä½†ä¸æ˜¯ç«‹åˆ»å°†æ‰€æœ‰æ¡¶å†…çš„æ˜ å°„å…³ç³»éƒ½ç«‹åˆ»è¿›è¡Œé‡æ–°åˆ†é…ã€‚å› ä¸ºå½“å“ˆå¸Œè¡¨æ¯”è¾ƒå¤§çš„æ—¶å€™è¿™æ ·ä¼šå¸¦æ¥ç¬æ—¶çš„é«˜è´Ÿè½½ï¼Œç»™æœºå™¨å¸¦æ¥ä¸å¿…è¦çš„è´Ÿæ‹…ã€‚\né‚£ä¹ˆä»€ä¹ˆæ—¶å€™å¯¹æ‰©å±•å“ˆå¸Œè¡¨åçš„æ¡¶å†…çš„ï¼ˆk,vï¼‰è¿›è¡Œé‡æ–°çš„æ˜ å°„å‘¢ï¼Ÿ\nå¯ä»¥è®¤ä¸ºæ˜¯ä»€ä¹ˆæ—¶å€™ç”¨ä¸Šäº†ä»€ä¹ˆæ—¶å€™å†è¿›è¡Œé‡æ–°çš„æ˜ å°„ã€‚è¿™é‡Œå°±æç°äº†å±€éƒ¨æ·±åº¦å’Œå…¨å±€æ·±åº¦çš„ä½œç”¨ã€‚å¦‚æœæˆ‘ä»¬å°†æ¯ä¸€æ¬¡å“ˆå¸Œè¡¨çš„æ‰©å±•éƒ½ç«‹å³ä¸ºä¸€æ¬¡ç‰ˆæœ¬çš„è¿­ä»£çš„è¯ã€‚é‚£ä¹ˆå±€éƒ¨æ·±åº¦å’Œå…¨å±€æ·±åº¦å°±åˆ†åˆ«ä»£è¡¨äº†æ¡¶æ‰€å¤„çš„ç‰ˆæœ¬å’Œç°åœ¨çš„æœ€è¿‘ç‰ˆæœ¬ã€‚è¿™æ ·å°±èƒ½å®ç°å¯¹å“ˆå¸Œè¡¨çš„çº¿æ€§æ—¶é—´æ‰©å±•ã€‚\næˆ‘ä»¬å¯ä»¥æƒ³è±¡è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼Œç°åœ¨å…¨å±€ç‰ˆæœ¬ä¸ºV3ï¼ˆglobal_depth_=3ï¼‰è€ŒæŸä¸ªæ¡¶çš„å±€éƒ¨ç‰ˆæœ¬ä¸ºV2ï¼ˆlocal_depth_=2ï¼‰. è¿™æ—¶å€™æˆ‘ä»¬åˆšå¥½éœ€è¦å‘è¿™ä¸ªæ¡¶ä¸­æ’å…¥ä¸€ä¸ªæ•°æ®ï¼Œè¿™æ—¶å€™å‘ç°ä¸ä»…è¿™ä¸ªæ¡¶æ»¡äº†è€Œä¸”è¿˜è½åç‰ˆæœ¬ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åšçš„å°±æ˜¯æ›´æ–°æ¡¶çš„ç‰ˆæœ¬ï¼ŒæŠŠæ¡¶é‡Œé¢ä¸ç¬¦åˆæ–°çš„æ˜ å°„è§„åˆ™ï¼ˆæ¯”åŸæ¥å¤šä¸€ä½ï¼‰çš„ç»™é€åˆ°æ–°æ¡¶é‡Œã€‚\nè¿™é‡Œæœ‰ä¸€ä¸ªå°å‘ï¼šå“ˆå¸Œè¡¨æ‰©å±•åï¼Œå–å“ˆå¸Œçš„è§„åˆ™éšä¹‹è€Œæ”¹å˜ï¼Œæ‰€ä»¥å½“è¦Findä¸€ä¸ªpageçš„æ—¶å€™å°±æœ‰å¯èƒ½ä¼šæ˜ å°„åˆ°æ–°çš„ä½ç½®ä¸Šï¼Œä½†æ˜¯åŸæ¥çš„æ¡¶å†…åœ¨æ²¡æ’æ»¡ä¹‹å‰æ˜¯ä¸ä¼šè¿›è¡Œé‡æ–°åˆ†é…çš„è¿™æ—¶è¯¥å¦‚ä½•ä¿è¯èƒ½æ‰¾åˆ°è¿™ä¸ªæ•°æ®å‘¢ï¼Ÿ\nä¸‹é¢ç”¨ä¸€ä¸ªä¾‹å­è§£é‡Šä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚ å‡è®¾ç°åœ¨å–ä½ 1 ä½ ä¹Ÿå°±æ˜¯global=1ï¼Œå‡è®¾ç°åœ¨æ¥äº†ä¸€ä¸ª101éœ€è¦æ’å…¥è€Œåˆšå¥½æ»¡äº†éœ€è¦è¿›è¡Œæ‰©å®¹æ“ä½œã€‚ è¿™é‡Œä¹Ÿç»™äº†ä¸Šè¾¹é‚£ä¸ªå°å‘çš„ç­”æ¡ˆï¼Œå°±æ˜¯åœ¨æ‰©å±•å“ˆå¸Œè¡¨çš„æ—¶å€™åé¢æ–°æ‰©å±•å‡ºæ¥çš„ä»ç„¶æŒ‡å‘åŸæ¥çš„æ¡¶ã€‚\næ’å…¥101ä¹‹ååŸæ¥ 1 å¯¹åº”çš„æ¡¶è¢«é‡æ–°åˆ†é… åˆ†åˆ«å¯¹åº”01 å’Œ 11è€ŒåŸæ¥çš„ 0 å¯¹åº”çš„æ¡¶å› ä¸ºè¿˜æ²¡æœ‰éœ€è¦æ’å…¥çš„æ•°æ®æ‰€ä»¥ä¸è¿›è¡Œé‡æ–°åˆ†é…ã€‚å½“éœ€è¦çš„æ—¶å€™å†è¿›è¡Œé‡æ–°çš„åˆ†é…ã€‚\nè¿™æ ·å°±ä¿è¯äº†æ‰©å±•æ˜¯çº¿æ€§çš„ï¼Œä¸ä¼šæ¯ä¸€æ¬¡æ‰©å±•çš„æ—¶å€™è´Ÿè½½æ¿€å¢ã€‚ å¯ä»¥ç†è§£ä¸ºâ€œæ‡’æ‰©å±•â€ã€‚\nå…·ä½“ä»£ç å®ç° å› ä¸ºæ•™æˆçš„è¦æ±‚ä¸èƒ½æ”¾å‡ºå…¨éƒ¨çš„æºä»£ç æ‰€ä»¥æˆ‘åªç»™å‡ºå…³é”®éƒ¨åˆ†\ntemplate \u0026lt;typename K, typename V\u0026gt; auto ExtendibleHashTable\u0026lt;K, V\u0026gt;::RedistributeBucket(std::shared_ptr\u0026lt;Bucket\u0026gt; bucket) -\u0026gt; void { bucket-\u0026gt;IncrementDepth(); size_t deepth = bucket-\u0026gt;GetDepth(); num_buckets_++; std::shared_ptr\u0026lt;Bucket\u0026gt; new_bucket = std::make_shared\u0026lt;Bucket\u0026gt;(bucket_size_, deepth); size_t pre_hash_sign = std::hash\u0026lt;K\u0026gt;()((bucket-\u0026gt;GetItems().begin())-\u0026gt;first) \u0026amp; ((1 \u0026lt;\u0026lt; (deepth - 1)) - 1); // éå†åŸæ¥çš„bucketè¿›è¡Œç¬¦åˆè¦æ±‚å°±æ˜¯æ–°è€å“ˆå¸Œå€¼ä¸ä¸€æ ·çš„å°±æ”¾è¿›æ–°æ¡¶é‡Œ for (auto i = bucket-\u0026gt;GetItems().begin(); i != bucket-\u0026gt;GetItems().end();) { size_t temp_hash_sign = std::hash\u0026lt;K\u0026gt;()(i-\u0026gt;first) \u0026amp; ((1 \u0026lt;\u0026lt; (deepth)) - 1); if (pre_hash_sign != temp_hash_sign) { new_bucket-\u0026gt;Insert(i-\u0026gt;first, i-\u0026gt;second); bucket-\u0026gt;GetItems().erase(i++); } else { i++; } } // å°±è¯¥æŠŠæ–°æ¡¶æ”¾åœ¨åè¾¹é‚£æ–°ä½ç½® // size_t new_hash_sign= std::hash\u0026lt;K\u0026gt;()((new_bucket-\u0026gt;GetItems().begin())-\u0026gt;first) \u0026amp; ((1 \u0026lt;\u0026lt; (deepth)) -1 ); for (size_t i = 0; i \u0026lt; dir_.size(); i++) { if ((i \u0026amp; ((1 \u0026lt;\u0026lt; (deepth)) - 1)) != pre_hash_sign \u0026amp;\u0026amp; (i \u0026amp; ((1 \u0026lt;\u0026lt; (deepth - 1)) - 1)) == pre_hash_sign) { dir_[i] = new_bucket; } } } template \u0026lt;typename K, typename V\u0026gt; void ExtendibleHashTable\u0026lt;K, V\u0026gt;::Insert(const K \u0026amp;key, const V \u0026amp;value) { // UNREACHABLE(\u0026#34;not implemented\u0026#34;); std::scoped_lock\u0026lt;std::mutex\u0026gt; lock(latch_); while (true) { size_t index = IndexOf(key); if (dir_[index]-\u0026gt;Insert(key, value)) { break; } // åˆ¤æ–­å½“å‰bucketçš„depthå’Œå…¨å±€depth å¦‚æœç›¸åŒå°±è¿›è¡Œå“ˆå¸Œè¡¨çš„æ‰©å®¹æ“ä½œï¼Œå¦‚æœä¸ç›¸åŒå°±è¿›è¡Œæ¡¶çš„é‡æ–°åˆ†é… // è¿™æ ·åšçš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯æ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çš„ï¼Œä¸ä¼šé‡åˆ°æ¡¶æ»¡çš„æ—¶å€™å°±è´Ÿè½½æ¿€å¢ï¼Œå¯¼è‡´æ•ˆç‡ä¸‹é™ã€‚ if (GetLocalDepthInternal(index) != GetGlobalDepthInternal()) { RedistributeBucket(dir_[index]); } else { global_depth_++; size_t size = dir_.size(); // è¿™é‡Œå°±æ˜¯åœ¨æ‰©å±•åå°†æŒ‡é’ˆæŒ‡å‘å¯¹åº”çš„è€æ¡¶å°±æ˜¯æ‰©å±•å‰çš„æ¡¶ã€‚ for (size_t i = 0; i \u0026lt; size; i++) { dir_.emplace_back(dir_[i]); } } } } Task #2 LRU-K LRU-K Replacer Design LRU-K Replacer ç”¨äºå­˜å‚¨ buffer pool ä¸­ page è¢«å¼•ç”¨çš„è®°å½•ï¼Œå¹¶æ ¹æ®å¼•ç”¨è®°å½•æ¥é€‰å‡ºåœ¨ buffer pool æ»¡æ—¶éœ€è¦è¢«é©±é€çš„ pageã€‚\nLRU åº”è¯¥éƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼ŒLRU-K åˆ™æ˜¯ä¸€ä¸ªå°å°çš„å˜ç§,å‡ºç°çš„ç›®çš„æ˜¯ä¸ºäº†åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³ç¼“å­˜æ±¡æŸ“çš„é—®é¢˜ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è¯»ä¸€ä¸‹æœ‰å…³è®ºæ–‡ï¼Œæœ‰å¾ˆè¯¦ç»†çš„ä»‹ç»ã€‚ cs.cmu.edu/~natassa/courses/15-721/papers/p297-o_neil.pdf\nåœ¨æ™®é€šçš„ LRU ä¸­ï¼Œæˆ‘ä»¬ä»…éœ€è®°å½• page æœ€è¿‘ä¸€æ¬¡è¢«å¼•ç”¨çš„æ—¶é—´ï¼Œåœ¨é©±é€æ—¶ï¼Œé€‰æ‹©æœ€è¿‘ä¸€æ¬¡å¼•ç”¨æ—¶é—´æœ€æ—©çš„ pageã€‚\nåœ¨ LRU-K ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®°å½• page æœ€è¿‘ K æ¬¡è¢«å¼•ç”¨çš„æ—¶é—´ã€‚å‡å¦‚ list ä¸­æ‰€æœ‰ page éƒ½è¢«å¼•ç”¨äº†å¤§äºç­‰äº K æ¬¡ï¼Œåˆ™æ¯”è¾ƒæœ€è¿‘ç¬¬ K æ¬¡è¢«å¼•ç”¨çš„æ—¶é—´ï¼Œé©±é€æœ€æ—©çš„ã€‚å‡å¦‚ list ä¸­å­˜åœ¨å¼•ç”¨æ¬¡æ•°å°‘äº K æ¬¡çš„ pageï¼Œåˆ™å°†è¿™äº› page æŒ‘é€‰å‡ºæ¥ï¼Œç”¨æ™®é€šçš„ LRU æ¥æ¯”è¾ƒè¿™äº› page ç¬¬ä¸€æ¬¡è¢«å¼•ç”¨çš„æ—¶é—´ï¼Œé©±é€æœ€æ—©çš„ã€‚\næ‰€æœ‰çš„pageå¤§æ¦‚èƒ½å¤Ÿåˆ†ä¸ºä¸¤ç±»ï¼š\nè¾¾åˆ°kæ¬¡çš„ï¼Œé‚£ä¹ˆåˆ™é€‰æ‹©distanceæœ€å¤§çš„è¿›è¡Œæ·˜æ±° æ²¡æœ‰è¾¾åˆ°kæ¬¡çš„ï¼Œå°±æ ¹æ®æ™®é€šçš„LRUè¿›è¡Œæ·˜æ±° å…·ä½“å®ç°ä¸æ˜¯å¾ˆéš¾ï¼ŒæŒ‰ç…§ç»™çš„æ³¨é‡Šä¸€æ­¥æ­¥å†™å°±å¥½äº† åˆšå¼€å§‹æˆ‘å»ºè®®å…ˆå»åŠ›æ‰£ï¼ˆLeetCodeï¼‰å®˜ç½‘ - å…¨çƒæå®¢æŒšçˆ±çš„æŠ€æœ¯æˆé•¿å¹³å°å†™ä¸€ä¸‹è¿™ä¸ªLRUï¼Œå®ç°çš„æ€è·¯ä¸èƒ½è¯´å·®ä¸å¤šä¹Ÿèƒ½è¯´æ˜¯å·®ä¸å¤šã€‚\nå¯¹äºæ•°æ®ç»“æ„çš„ç»„ç»‡æˆ‘æ¨è2023fallå°è£…å¥½çš„è¿™ä¸ªï¼Œæˆ‘è‡ªå·±åšçš„æ˜¯2022fallæ²¡æœ‰è¿™ä¸ªå°è£…ï¼Œéœ€è¦è‡ªå·±è®¾è®¡ï¼Œç»™å‡ºäº†ä¸€ä¸ªæ¨èçš„æ–¹æ¡ˆï¼Œå¯¹äºä¸€ä¸ªé¡¹ç›®çš„èµ·æ­¥è¿˜æ˜¯éå¸¸å‹å¥½çš„ã€‚\nclass LRUKNode { private: std::list\u0026lt;size_t\u0026gt; history_; size_t k_; frame_id_t fid_; bool is_evictable_{false}; }; std::unordered_map\u0026lt;frame_id_t, LRUKNode\u0026gt; node_store_; åªæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼šåœ¨SetEvictable è¿™ä¸ªå‡½æ•°ä¸­åªæœ‰å‘ç”Ÿæ”¹å˜æ‰ä¿®æ”¹curr_size_ï¼ˆå¯é©±é€çš„ä¸ªæ•°ï¼‰è¿™ä¸ªå˜é‡ã€‚\nTask# 3-Buffer Pool Manager è¿™ä¸ªæˆ‘è®¤ä¸ºæœ€ä¸»è¦çš„å°±æ˜¯è¦å˜æ¸…å„ä¸ªå‡½æ•°ä¹‹é—´çš„å…³ç³»\n/** Array of buffer pool pages. */ Page *pages_; /** Page table for keeping track of buffer pool pages. */ ExtendibleHashTable\u0026lt;page_id_t, frame_id_t\u0026gt; *page_table_; /** Replacer to find unpinned pages for replacement. */ LRUKReplacer *replacer_; /** List of free frames that don\u0026#39;t have any pages on them. */ std::list\u0026lt;frame_id_t\u0026gt; free_list_; ä¸Šè¿°çš„å®šä¹‰è¦å’Œåˆå§‹åŒ–å‡½æ•°ç»“åˆåœ¨ä¸€èµ·çœ‹\n// we allocate a consecutive memory space for the buffer pool pages_ = new Page[pool_size_]; page_table_ = new ExtendibleHashTable\u0026lt;page_id_t, frame_id_t\u0026gt;(bucket_size_); replacer_ = new LRUKReplacer(pool_size, replacer_k); // Initially, every page is in the free list. for (size_t i = 0; i \u0026lt; pool_size_; ++i) { free_list_.emplace_back(static_cast\u0026lt;int\u0026gt;(i)); } ç»“åˆæ³¨é‡Šä¸éš¾å‘ç°ä»–ä»¬ä¹‹é—´çš„å…³ç³»\npages_:Array of buffer pool pages ã€‚buffer poolçš„ä¸€ä¸ªæ•°ç»„ã€‚ä»–çš„ä¸‹æ ‡å°±æ˜¯frame_idã€‚ page_table_:è®°å½•pageå’Œframeä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚ replacer_: è®°å½•è®¿é—®å†å²ï¼Œåœ¨free_listä¸­æ²¡æœ‰ç©ºé—²frameå¯ä»¥æ‰¿è½½pageçš„æ—¶å€™è¿›è¡Œé©±é€ã€‚ free_list:è¡¨ç¤ºæœ‰æ— ç©ºé—²çš„frameå¯ä¾›ä½¿ç”¨ ä¸Šå›¾å¼•ç”¨è‡ªï¼šBusTub Lab1 Buffer Pool Manager | Fischer.space\nè¿™ä¸ªå›¾å¾ˆå¥½çš„è§£é‡Šäº†ä¸‰è€…ä¹‹é—´çš„å…³ç³»ä»¥åŠå„éƒ¨åˆ†æ‰€è´Ÿè´£çš„ä¸œè¥¿ã€‚\næ¥ä¸‹æ¥æ¢³ç†ä¸€ä¸‹task3ä¸­æ¯”è¾ƒé‡è¦çš„éƒ¨åˆ†\nNewPgImp()å’ŒFetchPgImp() ä¸¤ä¸ªå‡½æ•°æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†éƒ½æ˜¯ç›¸åŒçš„ é‡ç‚¹ä¹Ÿæ˜¯è¿™ç›¸åŒçš„ä¸€éƒ¨åˆ†\nå…ˆæ¥çœ‹NewPgImp() çš„è¦æ±‚ï¼š\nCreate a new page in the buffer pool. Set page_id to the new page\u0026rsquo;s id, or nullptr if all frames are currently in use and not evictable (in another word, pinned)\nå°±æ˜¯æ–°å»ºä¸€ä¸ªé¡µï¼Œä½†æ˜¯æ–°å»ºé¡µçš„è¿‡ç¨‹éå¸¸çš„æœ‰è®²ç©¶ï¼š\né¦–å…ˆéœ€è¦æ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„frame_æ‰¿è½½è¿™ä¸ªpageï¼Œä¼˜å…ˆä»free_listä¸­æ‰¾frame å¦‚æœfree_listä¸­ä¸å­˜åœ¨çš„è¯ï¼Œå°±éœ€è¦åœ¨replacer_ä¸­ç”¨é©±é€å‡½æ•°å°†ä¸€ä¸ªframeä¸Šçš„pageæ•°æ®æ¸…ç©ºï¼Œæ¸…ç©ºåœ¨tableé‡Œçš„æ˜ å°„å…³ç³»ã€‚ç”¨æ¥æ‰¿è½½æ–°å»ºçš„pageã€‚ åœ¨é©±é€çš„æ—¶å€™å¦‚æœåŸæ¥çš„é¡µæ˜¯è„çš„è¦å…ˆå§è„é¡µå†™å›ç£ç›˜ï¼Œé˜²æ­¢æ•°æ®çš„ä¸¢å¤± ä¹‹åå°±æ˜¯é¡µçš„åˆå§‹åŒ–æ“ä½œï¼Œæ³¨æ„è¦é¡¾åŠåˆ°æ¯ä¸€ä¸ªå˜é‡ã€‚ å°†æ–°çš„æ˜ å°„å…³ç³»å†™å…¥tableï¼Œæ–°çš„è®¿é—®å†å²æ”¾å…¥replacer\nFetchPgImp() çš„æµç¨‹å¤§è‡´ç›¸åŒï¼š\nåªæ˜¯ç¬¬ä¸€æ­¥å…ˆå»tableé‡Œæ‰¾æœ‰æ— è¿™ä¸ªpageå­˜åœ¨ï¼Œå¦‚æœæ²¡æœ‰å°±ç±»ä¼¼äºNewPgImp() å…ˆæ‰¾ä¸€ä¸ªframeï¼Œç„¶åé€šè¿‡disk_manager_å°†ç£ç›˜çš„æ•°æ®è¯»å…¥æ–°é¡µã€‚ä¹‹åå»ºç«‹æ–°çš„å…³ç³»ã€‚\nUnpinPgImpï¼ˆpage_id_t page_id, bool is_dirtyï¼‰ å½“ä¸Šå±‚æœ‰ä¸€ä¸ªè¿›ç¨‹åœ¨è¯»å–è¿™ä¸ªé¡µçš„æ—¶å€™è¿™ä¸ªé¡µéƒ½è¦è¢«pinä½ä¸èƒ½è¢«æ·˜æ±°ï¼Œåœ¨ä½¿ç”¨ç»“æŸçš„æ—¶å€™ä¼šå¯¹è¯¥é¡µè¿›è¡Œä¸€æ¬¡unpinçš„æ“ä½œï¼Œè¿™ä¼šä½¿å¾—pin_count_\u0026ndash;ï¼Œå½“è¿™ä¸ªæ•°å€¼ä¸º0çš„æ—¶å€™è¯¥é¡µå°±å¯è¢«SetEvictable()å‡½æ•°å°†å…¶åœ¨replacerä¸­æ ‡è®°ä¸ºå¯æ·˜æ±°ã€‚\néšç€page_idä¸€åŒä¼ è¿›æ¥çš„è¿˜æœ‰ä¸€ä¸ªboolå˜é‡is_dirtyè¿™ä¸ªå˜é‡ç”¨æ¥è¡¨ç¤ºä½¿ç”¨è¿™ä¸ªé¡µçš„è¿›ç¨‹å¯¹è¿™ä¸ªé¡µå¹²äº†ä»€ä¹ˆï¼Œå¦‚æœä»…ä»…åªæ˜¯è¯»çš„è¯is_dirtyçš„å€¼å°±ä¸ºfalseï¼Œä½†æ˜¯è¿›è¡Œçš„æ”¹åŠ¨çš„è¯is_dirtyçš„å€¼å°±ä¸ºtrueã€‚ éœ€è¦æ³¨æ„çš„ä¸€å®šï¼Œåªæœ‰å½“åŸæ¥è¿™ä¸ªé¡µæ˜¯å¹²å‡€çš„æ—¶å€™æ‰èƒ½è¿›è¡ŒçŠ¶æ€çš„ä¿®æ”¹ã€‚\nSummary \u0026amp;\u0026amp; è¸©å‘è®°å½• åœ¨task1çš„æ—¶å€™æ²¡æœ‰ææ‡‚IndexOfï¼ˆï¼‰å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œçœ‹åˆ°è¿›è¡Œä½æ“ä½œæœ¬èƒ½çš„è¿›è¡Œå›é¿ï¼Œå¯¼è‡´è¢«å¡äº†å¥½é•¿æ—¶é—´ï¼Œæ¯«æ— å¤´ç»ªï¼Œåœ¨å†™çš„æ—¶å€™è¿˜æ˜¯è¦ææ‡‚ç»†èŠ‚ï¼Œå¤šçœ‹å®˜æ–¹çš„æ³¨é‡Šã€‚ SetEvictableï¼ˆï¼‰è¿™ä¸ªå‡½æ•°ä¸­æ˜ç™½curr_size_ä»€ä¹ˆæ—¶å€™èƒ½æ”¹ï¼Œä»€ä¹ˆæ—¶å€™ä¸èƒ½æ”¹ã€‚ åœ¨FlushAllPgsImp()ä¸­å¤ç”¨äº†FlushPgImp()å‡½æ•°ï¼Œå¯¼è‡´åœ¨çº¿è¯„æµ‹è™½ç„¶æ ·ä¾‹éƒ½è¿‡äº†ä½†æ˜¯ä¸€ç›´è¶…æ—¶ï¼Œæœ€åè¿˜æ˜¯åœ¨BusTub Lab1 Buffer Pool Manager | Fischer.spaceè¿™ç¯‡æ–‡ç« ä¸­å¾—åˆ°å¯å‘ã€‚æ€»çš„æ¥è¯´è¿˜æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹å­¦çš„ä¸æ˜¯å¾ˆå¥½ã€‚ ä»¥ä¸Šä¸‰ä¸ªéƒ½æ˜¯å¡æˆ‘æ—¶é—´æ¯”è¾ƒé•¿è€Œä¸”å¤„ç†èµ·æ¥æ¯«æ— å¤´ç»ªçš„ã€‚ä¸è¿‡å¹¸å¥½é¡¹ç›®ç”¨cmakeæ„å»ºï¼Œdebugèµ·æ¥ç®—æ˜¯æ¯”è¾ƒæ–¹ä¾¿ï¼Œå¸®æˆ‘èŠ‚çº¦äº†å¾ˆå¤šçš„æ—¶é—´ã€‚\næˆ‘è®¤ä¸ºæ¯”è¾ƒæœ‰æŒ‘æˆ˜çš„å°±æ˜¯task1ï¼Œå¤§çš„æ¡†æ¶å»ºå¥½ä¹‹åè¿™ç§ä¿®ä¿®è¡¥è¡¥çš„ç¼–ç¨‹å¾ˆæœ‰æ„æ€ã€‚ç›¸æ¯”äºæœ‰äº›è¯¾ç¨‹çš„å…¨é¢é“ºå¼€å®Œå…¨ä»0å¼€å§‹å®ç°ï¼Œè¿™ç§ç›´å…¥ä¸»é¢˜ï¼Œå­¦ä¹ æ ¸å¿ƒæ€æƒ³çš„è¿‡ç¨‹è®©æˆ‘å—ç›ŠåŒªæµ…ã€‚\næœ€åé™„ä¸Šé€šè¿‡æˆªå›¾ï¼Œrankæ¯”è¾ƒé åå°±ä¸æ”¾äº†ï¼Œå› ä¸ºå…¨å±€ä¸€æŠŠå¤§é”ï¼Œèƒ½è·‘ä¸‹æ¥æˆ‘å·²ç»å¾ˆå¼€å¿ƒäº†ã€‚\n","permalink":"https://jialog.top/posts/database/project/cmu15-445-project1-buffer-pool-manager/","summary":"\u003ch2 id=\"ç¯å¢ƒæ­å»º\"\u003eç¯å¢ƒæ­å»º\u003c/h2\u003e\n\u003cp\u003eæŒ‰ç…§P0çš„æŒ‡å¯¼ä¸­è¿›è¡Œç¯å¢ƒçš„æ­å»ºï¼Œç”±äºæˆ‘æœ¬äººç°åœ¨æ—¶WINå¹³å°ï¼Œè¯¾ç¨‹æ²¡æœ‰æä¾›ä¸€é”®é…ç½®ç¯å¢ƒçš„è„šæœ¬ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº‘æœåŠ¡å™¨è¿›è¡Œç¯å¢ƒçš„æ„å»ºï¼Œå¾ˆç¨³ã€‚\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯æˆ‘çš„äº‘æœåŠ¡å™¨é…ç½®åªæœ‰2æ ¸2Gåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šçˆ†å†…å­˜ã€‚è¿™é‡Œè¿˜æœ‰ä¸ªæ•…äº‹ï¼Œåœ¨çˆ†å†…å­˜ä¹‹åæˆ‘å·²ç»æ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ç»™é˜¿é‡Œäº‘å®¢æœæäº†ä¸ªå·¥å•è¯•å›¾èƒ½ç™½å«–ä¸€äº›é…ç½®ï¼Œå®¢æœè¿˜æ˜¯å¾ˆæœ‰æ°´å¹³çš„ï¼Œç›´æ¥å°±åˆ†æå‡ºæ¥æˆ‘æ˜¯å†…å­˜çˆ†äº†å¯¼è‡´çš„ï¼Œä½†æ˜¯ç›´æ¥å»ºè®®æˆ‘åŠ é’±å‡çº§é…ç½®ï¼Œä¸å‘Šè¯‰æˆ‘è®¾ç½®swapåˆ†åŒºï¼Œæœ‰ç‚¹ä¸åšé“äº†ã€‚\u003c/p\u003e\n\u003cp\u003eè¯è¯´å›æ¥ï¼Œè®¾ç½®å®Œswapåˆ†åŒºä¹‹åå°±æ²¡æœ‰å†å‡ºç°è¿‡çˆ†å†…å­˜çš„ç°è±¡ã€‚ç”¨VScodeçš„è¿œç¨‹å¼€å‘ï¼Œä½“éªŒè¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚\u003c/p\u003e\n\u003ch2 id=\"overview\"\u003eOverview\u003c/h2\u003e\n\u003cp\u003ep1ä¸»è¦æ˜¯å†…å­˜ç®¡ç†éƒ¨åˆ†çš„å†…å®¹ï¼Œè¿™é—¨è¯¾ç¨‹çš„è¯¾æœ¬å’Œå½•åˆ¶è§†é¢‘è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çœ‹ä¸€ä¸‹çš„ã€‚\u003c/p\u003e\n\u003cp\u003eä¸»è¦çš„ä»»åŠ¡æ˜¯ä»¥ä¸‹ä¸‰ä¸ªéƒ¨åˆ†ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eå¯æ‰©å±•çš„å“ˆå¸Œè¡¨\u003c/li\u003e\n\u003cli\u003eLRU-Kçš„æ·˜æ±°ç­–ç•¥çš„è§†çº¿\u003c/li\u003e\n\u003cli\u003eBuffer Poolçš„ä¸€ä¸ªå®ä¾‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eåœ¨å¼€å§‹æ¢³ç†é¡¹ç›®ä¹‹å‰æˆ‘æƒ³è¦å…ˆè§£é‡Šæ¸…æ¥šä¸€ä¸‹ä¸‰ä¸ªä»»åŠ¡ä¹‹é—´çš„å…³ç³»ï¼Œä»¥åŠå„ä¸ªéƒ¨åˆ†çš„è´Ÿè´£ã€‚\u003c/p\u003e\n\u003cp\u003eframeæ›´åƒæ˜¯ä¸€ä¸ª\u003cstrong\u003eè½½ä½“\u003c/strong\u003eï¼Œè€Œpageæ˜¯å…¶ä¸­çš„å†…å®¹ã€‚æ‰“ä¸ªæ¯”æ–¹æ¥è¯´ï¼Œä¸€ä¸ªä»“åº“ï¼ˆbuffer poolï¼‰åªæœ‰100è¾†è´§è½¦ï¼ˆframeï¼‰ï¼Œè€Œè´§ç‰©ï¼ˆpageï¼‰æˆåƒä¸Šä¸‡ç§ï¼Œæ¯æ¬¡éƒ½æ˜¯ä»“åº“å‘Šè¯‰è´§è½¦éœ€è¦ä»€ä¹ˆè´§ç‰©ç„¶åç”±è´§è½¦å¸¦ç€è´§ç‰©æ¥åˆ°ä»“åº“ï¼Œè€Œå¯æ‰©å±•çš„å“ˆå¸Œè¡¨å°±æ˜¯ç™»è®°è´§è½¦å’Œè´§ç‰©çš„\u003cstrong\u003eå¯¹åº”å…³ç³»\u003c/strong\u003eã€‚å› ä¸ºåªæœ‰100è¾†è´§è½¦ï¼Œå½“æ¯è¾†è½¦éƒ½æ˜¯æ»¡çš„æ—¶å€™ï¼ˆæ²¡æœ‰é—²ç½®çš„è½¦è¾†free_listä¸ä¸ºç©ºï¼‰å°±éœ€è¦æ ¹æ®task2çš„LRU-Kç®—æ³•æŒ‘é€‰å‡ºä¸€ä¸ªç¬¦åˆè¦æ±‚çš„è´§è½¦æ¸…ç©ºåå»è£…è½½æŒ‡å®šçš„è´§ç‰©ã€‚\nè€Œtask3å°±æ˜¯è´Ÿè´£æ•´ä¸ªçš„ç®¡ç†å’Œäº¤äº’ã€‚\u003c/p\u003e\n\u003cp\u003eå¤§æ¦‚è§£é‡Šäº†ä¸€ä¸‹ï¼Œå¯èƒ½æ¯”æ–¹ä¸æ˜¯å¾ˆæ°å½“ï¼Œåšçš„æ—¶å€™ä¸€å®šè¦å¤šçœ‹æ–‡æ¡£å’Œæ³¨é‡Šï¼Œå› ä¸ºæ¼çœ‹æ³¨é‡Šç»™æˆ‘å¸¦æ¥äº†æå¤§çš„ç—›è‹¦ã€‚\u003c/p\u003e\n\u003ch2 id=\"task-1--extendiblehashtable\"\u003eTask #1 -ExtendibleHashTable\u003c/h2\u003e\n\u003ch3 id=\"ç›¸å…³å‡½æ•°\"\u003eç›¸å…³å‡½æ•°\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eFind(K,V):\u003c/code\u003e æŸ¥è¯¢ä¸€ä¸ªKeyæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™å°†å…¶VæŒ‡é’ˆæŒ‡å‘ç›¸å…³çš„å€¼ï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eInsert(K,V):\u003c/code\u003e æ’å…¥ä¸€ä¸ªï¼ˆKï¼ŒVï¼‰ï¼Œå¦‚æœæ’å…¥å¤±è´¥éœ€è¦è¿›è¡Œä¸€ä¸‹æ­¥éª¤çš„é‡è¯•ï¼š\n\u003col\u003e\n\u003cli\u003eæ’å…¥å¤±è´¥è‚¯å®šæ˜¯æ¡¶æ»¡äº†ï¼Œä½†æ˜¯æ¡¶æ»¡äº†åˆ†ä¸ºä¸¤ç§ä¸åŒçš„æƒ…å†µã€‚\u003c/li\u003e\n\u003cli\u003eä¸€ç§æ˜¯globalæ·±åº¦å’Œæ¡¶çš„localæ·±åº¦ä¸ç›¸åŒçš„æ—¶å€™ï¼Œéœ€è¦å¯¹æ¡¶è¿›è¡Œé‡æ–°çš„åˆ†é…ã€‚\u003c/li\u003e\n\u003cli\u003eå½“ä¸¤ä¸ªæ·±åº¦ç›¸åŒçš„æ—¶å€™è¯´æ˜æ¡¶æ˜¯çœŸçš„æ»¡äº†ï¼Œéœ€è¦å¯¹å“ˆå¸Œè¡¨è¿›è¡Œæ‰©å±•\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRemove(K):\u003c/code\u003e åœ¨å“ˆå¸Œè¡¨ä¸­ç§»é™¤å¯¹åº”çš„ï¼ˆKï¼ŒVï¼‰å¯¹ï¼Œä½†æ˜¯éœ€è¦è¿›è¡Œå“ˆå¸Œè¡¨ç¼©å°çš„æ“ä½œã€‚\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eIndexOf(K):\u003c/code\u003e  å½“å‰globalæ·±åº¦ä¸‹çš„æ˜ å°„è§„åˆ™ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"é¡¹ç›®æ¶æ„\"\u003eé¡¹ç›®æ¶æ„\u003c/h3\u003e\n\u003cp\u003eé¦–å…ˆè¦æ¸…æ¥šè¿™ä¸ªæ˜¯è‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ªå¯æ‰©å±•å“ˆå¸Œè¡¨ç”¨äºä¿å­˜frameå’Œpageçš„\u003cstrong\u003eæ˜ å°„å…³ç³»\u003c/strong\u003eçš„ã€‚æˆ‘è§‰å¾—é¦–å…ˆè¦æ˜ç™½frameå’Œpageä¹‹é—´çš„å…³ç³»ã€‚ä¸æ¸…æ¥šçš„å¯ä»¥å›çœ‹ä¸Šæ–‡çš„è§£é‡Šã€‚\u003c/p\u003e\n\u003ch3 id=\"bucket-å­˜å‚¨æ¡¶\"\u003eBucket å­˜å‚¨æ¡¶\u003c/h3\u003e\n\u003cp\u003eåœ¨å¯å¯ä»¥æ‰©å±•çš„å“ˆå¸Œè¡¨ç§å¼•å…¥å’ŒBucketçš„æ¦‚å¿µï¼Œç”¨äºè§£å†³\u003cstrong\u003eå“ˆå¸Œå†²çª\u003c/strong\u003eçš„é—®é¢˜ï¼Œæ¯ä¸€ä¸ªBucketçš„å¤§å°éƒ½æ˜¯å›ºå®šçš„ï¼Œå½“ä¸€ä¸ªBucketæ»¡äº†çš„æ—¶å€™å°±éœ€è¦è¿›è¡Œå“ˆå¸Œè¡¨çš„\u003cstrong\u003eæ‰©å±•\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|200\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231205232548.png\"\u003e\u003c/p\u003e\n\u003ch3 id=\"bucketçš„ç»„æˆ\"\u003eBucketçš„ç»„æˆ\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|325\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231205233054.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003edepth_\u003c/strong\u003eï¼šè¡¨ç¤ºæœ¬åœ°æ·±åº¦çš„ä¸€ä¸ªæ ‡è¯†ï¼Œç”¨äºè¯†åˆ«å½“å‰çš„æ·±åº¦æ˜¯å¦å’Œå…¨å±€æ·±åº¦ç›¸åŒã€‚è¦ç‰¹åˆ«æ³¨æ„è¿™ä¸ªå˜é‡ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003elist_\u003c/strong\u003eï¼šå‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ä¿å­˜å¤šä¸ªï¼ˆKï¼ŒVï¼‰æ˜ å°„çš„åŒå‘é“¾è¡¨ã€‚\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003esize\u003c/strong\u003eï¼šä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œlistçš„é•¿åº¦ä¸èƒ½æ— é™å»¶ä¼¸ï¼Œæ‰€ä»¥è¾¾åˆ°ä¸€å®šé•¿åº¦çš„æ—¶å€™è¦è¿›è¡Œå“ˆå¸Œè¡¨çš„æ‰©å±•ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"å¯æ‰©å±•çš„å“ˆå¸Œè¡¨ç»“æ„\"\u003eå¯æ‰©å±•çš„å“ˆå¸Œè¡¨ç»“æ„\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|325\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231205234304.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eBucket_size:ç”¨äºé™åˆ¶æ¯ä¸ªbucketçš„listçš„é•¿åº¦\u003c/li\u003e\n\u003cli\u003edir_:ç”¨äºå“ˆè¥¿è¿ç®—åä¿å­˜æ˜ å°„å…³ç³»ã€‚\u003c/li\u003e\n\u003cli\u003eglobal_depth_:å…¨å±€æ·±åº¦ï¼Œåœ¨\u003cstrong\u003eæ’å…¥\u003c/strong\u003eçš„æ—¶å€™æ ¹æ®\u003cstrong\u003eå…¨å±€æ·±åº¦\u003c/strong\u003eå’Œ\u003cstrong\u003eå±€éƒ¨æ·±åº¦\u003c/strong\u003eæ¥ç¡®å®šè¿™ä¸ªæ¡¶æ˜¯å¦è¦è¿›è¡Œé‡æ–°çš„åˆ†é…ã€‚\u003c/li\u003e\n\u003cli\u003enum_buckets:ç”¨äºç»Ÿè®¡ç°åœ¨ä¸€å…±æœ‰å¤šå°‘bucketã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"rehashçš„è¿‡ç¨‹è¯¦è§£\"\u003eReHashçš„è¿‡ç¨‹è¯¦è§£\u003c/h3\u003e\n\u003cblockquote\u003e\n\u003cp\u003e1.hashçš„è§„åˆ™æ˜¯ä»€ä¹ˆæ ·çš„\u003c/p\u003e\u003c/blockquote\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-c++\" data-lang=\"c++\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003etemplate\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"k\"\u003etypename\u003c/span\u003e \u003cspan class=\"n\"\u003eK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003etypename\u003c/span\u003e \u003cspan class=\"n\"\u003eV\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003eExtendibleHashTable\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eK\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eV\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;::\u003c/span\u003e\u003cspan class=\"n\"\u003eIndexOf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eK\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esize_t\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ  \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003emask\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eglobal_depth_\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eÂ  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ehash\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eK\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e()(\u003c/span\u003e\u003cspan class=\"n\"\u003ekey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003emask\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eä¸Šè¿°å‡½æ•°å°±æ˜¯è¯¥å“ˆå¸Œè¡¨çš„æ˜ å°„è§„åˆ™ï¼Œæ€»çš„æ¥è¯´å°±æ˜¯å–hashå‡½æ•°å€¼çš„\u003cstrong\u003eä½\u003ccode\u003eglobal_depth\u003c/code\u003eä½\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå‡å¦‚ç°åœ¨global_depth_çš„å€¼ä¸º3ã€‚\né‚£ä¹ˆ \u003ccode\u003e1 \u0026lt;\u0026lt; global_depth_\u003c/code\u003eçš„å€¼å°±æ˜¯8è½¬æ¢ä¸ºäºŒè¿›åˆ¶å°±æ˜¯ 1000 ã€‚mask=8-1=7ï¼Œè½¬æ¢ä¸ºäºŒè¿›åˆ¶å°±æ˜¯ 111.\u003c/p\u003e\n\u003cp\u003emask çš„ä½œç”¨å°±æ˜¯å–ä¸€ä¸ªä½æ•°å’Œglobal_depth_ä¸€æ ·çš„å…¨1çš„äºŒè¿›åˆ¶æ•°ï¼Œä¸ºäº†å–ä½global_depth_ä½åšé“ºå«ã€‚\u003c/p\u003e\n\u003cp\u003eç°åœ¨å‡å¦‚keyçš„å€¼è¿›è¡Œå®Œhashä¹‹åæ˜¯ 10110100011010 å’Œ maskè¿›è¡Œè¿›è¡Œ \u0026amp; çš„æ“ä½œä¹‹åå°±å˜æˆäº† 010 ï¼ˆä½3ä½ï¼‰\u003c/p\u003e","title":"CMU15-445- Project #1 - Buffer Pool Manager"},{"content":"TABLE INDEX A table index is a replica of a subset of a table\u0026rsquo;s attributes that are organized and/or sorted for efficient access using those attributes.The DBMS ensures that the contents of the table and the index are logically synchronized.\nç´¢å¼•è®©æ•°æ®åœ¨æ•°æ®åº“ä¸­çš„æŸ¥è¯¢æ›´åŠ çš„é«˜æ•ˆï¼ŒDBMSè´Ÿè´£ä½¿ç´¢å¼•å’Œå®é™…å†…å®¹åŒæ­¥ã€‚\nDBMSçš„å·¥ä½œæ˜¯é€‰æ‹©æœ€ä¼˜çš„ç´¢å¼•å»æ‰§è¡ŒæŸ¥è¯¢ï¼Œè¿™å°±å¸¦æ¥ä¸€ä¸ªéœ€è¦æƒè¡¡çš„é—®é¢˜â€”â€”ç´¢å¼•è¶Šå¤šæŸ¥è¯¢è¶Šé«˜æ•ˆä½†æ˜¯ç›¸å¯¹çš„ç»´æŠ¤æˆæœ¬ï¼ˆMaintenance Overheadï¼‰å’Œå­˜å‚¨æˆæœ¬ï¼ˆStorage Overheadï¼‰ å°±ä¼šç›¸åº”çš„æé«˜ã€‚\nB-TREE FAMILY B-æ ‘å®¶æ—ã€‚\né‡ç‚¹äº†è§£B+æ ‘ã€‚\nï¼ˆBæ ‘è™½ç„¶æ˜¯ä¸€ä¸ªå¹³è¡¡æ ‘ï¼ˆbalanceï¼‰ï¼Œä½†Bæ ‘çš„Bä¸æ˜¯balanceçš„ç¼©å†™ï¼Œåˆ°åº•ä»£è¡¨ä»€ä¹ˆè¿˜å­˜ç–‘ï¼‰\nB+TREE B+æ ‘æ˜¯ä¸€ä¸ªè‡ªå¹³è¡¡æ ‘çš„æ•°æ®ç»“æ„ï¼Œé¡ºåºçš„å­˜å‚¨æ•°æ®ï¼Œå¹¶ä¸”å°†æŸ¥è¯¢ï¼Œé¡ºåºè®¿é—®ï¼Œæ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦åŸºæœ¬æ§åˆ¶åœ¨O(log n)ã€‚\næ˜¯äºŒå‰æœç´¢æ ‘çš„æ¨å¹¿ï¼Œå› ä¸ºå®ƒå¯ä»¥æœ‰è¶…è¿‡ä¸¤ä¸ªçš„å­©å­èŠ‚ç‚¹ã€‚ å®ƒé’ˆå¯¹ç³»ç»Ÿå’Œå­˜å‚¨ä¹‹é—´çš„å¤§å—æ•°æ®è¯»å†™è¿›è¡Œäº†ç‰¹åˆ«çš„ä¼˜åŒ–ã€‚ B+TREE PROPERTIES B+æ ‘æ˜¯ä¸€ä¸ªå¤šå‰æœç´¢æ ‘ï¼Œæœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\nä»–å®Œç¾å¹³è¡¡ é™¤äº†æ ¹èŠ‚ç‚¹éƒ½è‡³å°‘åŠæ»¡ kä¸ªå€¼ä¼šæŠŠä¸€ä¸ªèŠ‚ç‚¹åˆ†ä¸ºk+1éƒ¨åˆ†ã€‚ B+TREE EXAMPLE ä¸Šå›¾æ˜¯ä¸€ä¸ªå°ä¾‹å­ï¼Œèƒ½å¤Ÿå‘ç°B+æ ‘åº•å±‚æ˜¯èƒ½å¤ŸåŒå‘è®¿é—®çš„ï¼Œè¿™åœ¨å¤šçº¿ç¨‹çš„æ—¶å€™æœ‰å¯èƒ½ä¼šé€ æˆæ­»é”é—®é¢˜ã€‚è¿™åœ¨åé¢è®²è§£B+æ ‘å¤šçº¿ç¨‹çš„ç« èŠ‚ä¹Ÿä¼šå¯¹åŸå› è¿›è¡Œè®²è§£ã€‚\nB+â€˜s CRUD å¯ä»¥è¯´B+æ ‘çš„å¢åˆ æ”¹æŸ¥çš„ç‰¹æ€§å’Œå®ƒçš„ç»„ç»‡å½¢å¼æ˜¯å¯†ä¸å¯åˆ†çš„ã€‚æ¯æ¬¡åšæ”¹åŠ¨ä¹‹åéƒ½è¦ç¬¦åˆä»–çš„ç»“æ„ç‰¹æ€§ï¼Œæ‰€ä»¥ä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚\nB+æ ‘çš„ä¸€äº›åº”ç”¨æ‰©å±• äºŒçº§ç´¢å¼• \u0026amp;\u0026amp; è®°å½•è¿ç§» å¦‚æœäºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ç›´æ¥æŒ‡å‘çš„æ˜¯å¯¹åº”æ•°æ®çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆåœ¨å‘ç”Ÿå¢åˆ çš„æ—¶å€™ç»“æ„å‘ç”Ÿå˜åŒ–äºŒçº§ç´¢å¼•å°±éœ€è¦è¿›è¡Œé‡æ„ï¼Œè¿™ä¸ä»…æ˜¯ä¸€é¡¹å¼€é”€éå¸¸å¤§çš„æ–¹æ³•ï¼Œè€Œä¸”è¿˜éš¾ä»¥ä¿è¯æ•°æ®çš„åŒæ­¥ã€‚\nè§£å†³åŠæ³•: è¾…åŠ©ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜ä¸»é”®çš„å€¼åˆ—è¡¨ï¼Œè¿™ç§å…³ç³»çš„å›ºå®šçš„ä¸ä¼šæ”¹å˜çš„ï¼Œä¸€ä¸¤ä¸ªæ•°æ®çš„å¢åˆ ä¸ä¼šé€ æˆæ•´ä¸ªæ ‘çš„é‡æ„ã€‚\nè¿™å°±é¿å…äº†ç”±äºé‡æ„å¯¼è‡´å˜åŒ–è€ŒäºŒçº§ç´¢å¼•éœ€è¦è·Ÿç€é‡æ„çš„å¸¦æ¥çš„å¼€é”€ã€‚ç°éœ€è¦åœ¨è¾…åŠ©ç´¢å¼•ä¸ŠæŸ¥åˆ°éœ€è¦çš„ä¸»é”®åˆ—è¡¨ç„¶åå†å»ä¸»é”®ç´¢å¼•ä¸Šå»æŸ¥æ‰¾å¯¹åº”çš„æ•°æ®ã€‚\nè¿™æ ·è™½ç„¶é™ä½äº†æŸ¥è¯¢æ—¶å€™çš„ä¸€ç‚¹æ•ˆç‡ï¼Œä½†æ˜¯è·Ÿé¢‘ç¹çš„é‡æ„æ¯”èµ·æ¥è¿˜æ˜¯éš¾ä»¥æ„ŸçŸ¥çš„ğŸ˜ƒã€‚\nå­—ç¬¦ä¸²ç´¢å¼• å°½åŠ›ä¸€ä¸ªB+æ ‘çš„å­—ç¬¦ä¸²ç´¢å¼•æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š\nå­—ç¬¦ä¸²ä¸€èˆ¬éƒ½æ˜¯å˜é•¿çš„ï¼Œè¿™å¾ˆéš¾è§£å†³ å› ä¸ºå­—ç¬¦ä¸²å¯èƒ½ä¼šå¾ˆé•¿ï¼Œæ‰€ä»¥æ‰‡çš„å‡ºåº¦ä¼šé™ä½ï¼Œç›¸åº”çš„æ ‘é«˜ä¼šå˜é«˜ã€‚ å¯¹åº”çš„è§£å†³åŠæ³•æœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š\nçµæ´»çš„å‡ºåº¦ã€‚æ¯ä¸ªæ‰‡çš„å‡ºåº¦å¹¶ä¸æ˜¯ç®€å•å›ºå®šçš„ï¼Œæ ¹æ®è¿™ä¸ªæ‰‡çš„å­—ç¬¦ä¸²æ‰€ç”¨çš„ç©ºé—´è¿›è¡Œçµæ´»çš„è°ƒæ•´ã€‚ å‰ç¼€å‹ç¼©ã€‚åªç”¨å­˜å‚¨åˆ°ä¸ä¸€æ ·çš„ç¬¬ä¸€ä½ï¼Œèƒ½å¤Ÿåˆ†è¾¨å°±å¤Ÿäº†ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªåç§°ç´¢å¼•ï¼Œé‚£ä¹ˆéå¶èŠ‚ç‚¹ä¸Šçš„é”®å€¼å¯ä»¥æ˜¯åç§°çš„å‰ç¼€ï¼›å¦‚æœå®ƒåˆ†ç¦»çš„ä¸¤ä¸ªå­æ ‘ä¸­æœ€æ¥è¿‘çš„å€¼åˆ†åˆ«æ˜¯â€œSilasâ€å’Œâ€œSilverâ€ï¼Œé‚£ä¹ˆåœ¨éå¶èŠ‚ç‚¹å­˜å‚¨â€œSilbâ€è€Œä¸æ˜¯å®Œæ•´çš„â€œSilberschatzâ€å°±è¶³å¤Ÿäº†ã€‚è¿™å°±æ˜¯å‰ç¼€å‹ç¼©\næ‰¹é‡åŠ è½½B+æ ‘ç´¢å¼• å‰é¢æˆ‘ä»¬çŸ¥é“B+æ ‘çš„æ’å…¥æ“ä½œå¼€é”€éå¸¸çš„å¤§ï¼Œä¸€å®šç¨‹åº¦ä¸Šè¿™ä¸ªæ’å…¥çš„å¼€é”€å’Œæ ‘çš„é«˜åº¦æ˜¯æˆæ­£æ¯”çš„ã€‚æ‰€ä»¥æ ‘çš„é«˜åº¦ä¸€èˆ¬æœ€å¤šè¢«æ§åˆ¶åœ¨5ï¼Œå¯¹äºå¤§å‹é¡¹ç›®ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚\næ­£å› ä¸ºå¦‚æ­¤ï¼ŒåŠ å…¥ç°åœ¨æœ‰100ä¸‡æ¡æ•°æ®éœ€è¦æ’å…¥ï¼Œæ¯æ¡æ•°æ®å…‰æ˜¯I/Oéƒ½éœ€è¦å¾ˆé•¿çš„æ—¶é—´ï¼Œæ›´ä¸ç”¨è¯´æ’å…¥ä¹‹åB+æ ‘é‡æ„çš„æ—¶é—´ã€‚\nç°åœ¨æœ‰ä¸€ç§ä¼˜åŒ–çš„æ–¹æ³•ï¼Œå°†éœ€è¦æ’å…¥çš„å¤§é‡æ•°æ®è¿›è¡Œæ’åºåæŒ‰ç…§B+æ ‘çš„æ–¹æ³•æ„å»ºç´¢å¼•åå°†è¿™é¢—æ„å»ºçš„æ ‘mergeåˆ°åŸæ¥çš„B+æ ‘ä¸­ï¼Œè¿™æ ·åšæœ‰ä»¥ä¸‹å‡ ä¸ªå¥½å¤„ï¼š\nåœ¨å¤šçº¿ç¨‹æ–¹é¢å…·æœ‰ä¼˜åŠ¿ åœ¨æ„å»ºçš„æ—¶å€™ä¼šäº§ç”Ÿæ›´å°‘çš„I/O. å¶å­èŠ‚ç‚¹ä¼šæŒ‰é¡ºåºè¿›è¡Œæ’åºã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨chatgptå†™å‡ºæ¥çš„ä¸€ä¸ªb+æ ‘çš„å°demoï¼Œç”¨æ¥çª¥æ¢ä¸€ä¸‹å…·ä½“å®ç°æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;algorithm\u0026gt; const int ORDER = 3; // B+æ ‘çš„é˜¶æ•° // B+æ ‘èŠ‚ç‚¹ template \u0026lt;typename Key, typename Value\u0026gt; struct BPlusTreeNode { bool isLeaf; std::vector\u0026lt;Key\u0026gt; keys; std::vector\u0026lt;Value\u0026gt; values; BPlusTreeNode* parent; BPlusTreeNode* next; // ç”¨äºå¶å­èŠ‚ç‚¹çš„è¿æ¥ }; // B+æ ‘ template \u0026lt;typename Key, typename Value\u0026gt; class BPlusTree { public: BPlusTree() : root(nullptr) {} void insert(const Key\u0026amp; key, const Value\u0026amp; value) { if (root == nullptr) { root = new BPlusTreeNode\u0026lt;Key, Value\u0026gt;(); root-\u0026gt;isLeaf = true; root-\u0026gt;keys.push_back(key); root-\u0026gt;values.push_back(value); } else { insertHelper(root, key, value); } } Value search(const Key\u0026amp; key) const { return searchHelper(root, key); } void print() const { printHelper(root, 0); } private: BPlusTreeNode\u0026lt;Key, Value\u0026gt;* root; void insertHelper(BPlusTreeNode\u0026lt;Key, Value\u0026gt;* node, const Key\u0026amp; key, const Value\u0026amp; value) { if (node-\u0026gt;isLeaf) { insertIntoLeaf(node, key, value); } else { int i = 0; while (i \u0026lt; node-\u0026gt;keys.size() \u0026amp;\u0026amp; key \u0026gt; node-\u0026gt;keys[i]) { i++; } insertHelper(node-\u0026gt;children[i], key, value); } } void insertIntoLeaf(BPlusTreeNode\u0026lt;Key, Value\u0026gt;* node, const Key\u0026amp; key, const Value\u0026amp; value) { auto it = std::lower_bound(node-\u0026gt;keys.begin(), node-\u0026gt;keys.end(), key); int index = it - node-\u0026gt;keys.begin(); node-\u0026gt;keys.insert(it, key); node-\u0026gt;values.insert(node-\u0026gt;values.begin() + index, value); if (node-\u0026gt;keys.size() \u0026gt; ORDER - 1) { splitLeaf(node); } } void splitLeaf(BPlusTreeNode\u0026lt;Key, Value\u0026gt;* node) { BPlusTreeNode\u0026lt;Key, Value\u0026gt;* newLeaf = new BPlusTreeNode\u0026lt;Key, Value\u0026gt;(); newLeaf-\u0026gt;isLeaf = true; int splitIndex = (ORDER - 1) / 2; newLeaf-\u0026gt;keys.assign(node-\u0026gt;keys.begin() + splitIndex, node-\u0026gt;keys.end()); newLeaf-\u0026gt;values.assign(node-\u0026gt;values.begin() + splitIndex, node-\u0026gt;values.end()); node-\u0026gt;keys.resize(splitIndex); node-\u0026gt;values.resize(splitIndex); newLeaf-\u0026gt;next = node-\u0026gt;next; node-\u0026gt;next = newLeaf; insertIntoParent(node, newLeaf-\u0026gt;keys[0], newLeaf); } void insertIntoParent(BPlusTreeNode\u0026lt;Key, Value\u0026gt;* left, const Key\u0026amp; key, BPlusTreeNode\u0026lt;Key, Value\u0026gt;* right) { if (root == left) { BPlusTreeNode\u0026lt;Key, Value\u0026gt;* newRoot = new BPlusTreeNode\u0026lt;Key, Value\u0026gt;(); newRoot-\u0026gt;keys.push_back(key); newRoot-\u0026gt;children.push_back(left); newRoot-\u0026gt;children.push_back(right); left-\u0026gt;parent = newRoot; right-\u0026gt;parent = newRoot; root = newRoot; } else { BPlusTreeNode\u0026lt;Key, Value\u0026gt;* parent = left-\u0026gt;parent; auto it = std::lower_bound(parent-\u0026gt;keys.begin(), parent-\u0026gt;keys.end(), key); int index = it - parent-\u0026gt;keys.begin(); parent-\u0026gt;keys.insert(it, key); parent-\u0026gt;children.insert(parent-\u0026gt;children.begin() + index + 1, right); right-\u0026gt;parent = parent; if (parent-\u0026gt;keys.size() \u0026gt; ORDER - 1) { splitInternal(parent); } } } void splitInternal(BPlusTreeNode\u0026lt;Key, Value\u0026gt;* node) { BPlusTreeNode\u0026lt;Key, Value\u0026gt;* newInternal = new BPlusTreeNode\u0026lt;Key, Value\u0026gt;(); int splitIndex = (ORDER - 1) / 2; Key upKey = node-\u0026gt;keys[splitIndex]; newInternal-\u0026gt;keys.assign(node-\u0026gt;keys.begin() + splitIndex + 1, node-\u0026gt;keys.end()); newInternal-\u0026gt;children.assign(node-\u0026gt;children.begin() + splitIndex + 1, node-\u0026gt;children.end()); node-\u0026gt;keys.resize(splitIndex); node-\u0026gt;children.resize(splitIndex + 1); for (auto child : newInternal-\u0026gt;children) { child-\u0026gt;parent = newInternal; } insertIntoParent(node, upKey, newInternal); } Value searchHelper(BPlusTreeNode\u0026lt;Key, Value\u0026gt;* node, const Key\u0026amp; key) const { if (node == nullptr) { return Value(); // è¿”å›é»˜è®¤å€¼è¡¨ç¤ºæœªæ‰¾åˆ° } int i = 0; while (i \u0026lt; node-\u0026gt;keys.size() \u0026amp;\u0026amp; key \u0026gt; node-\u0026gt;keys[i]) { i++; } if (node-\u0026gt;isLeaf) { if (i \u0026lt; node-\u0026gt;keys.size() \u0026amp;\u0026amp; key == node-\u0026gt;keys[i]) { return node-\u0026gt;values[i]; } else { return Value(); // è¿”å›é»˜è®¤å€¼è¡¨ç¤ºæœªæ‰¾åˆ° } } else { return searchHelper(node-\u0026gt;children[i], key); } } void printHelper(BPlusTreeNode\u0026lt;Key, Value\u0026gt;* node, int level) const { if (node != nullptr) { std::cout \u0026lt;\u0026lt; \u0026#34;Level \u0026#34; \u0026lt;\u0026lt; level \u0026lt;\u0026lt; \u0026#34;: \u0026#34;; for (int i = 0; i \u0026lt; node-\u0026gt;keys.size(); ++i) { std::cout \u0026lt;\u0026lt; node-\u0026gt;keys[i] \u0026lt;\u0026lt; \u0026#34; \u0026#34;; } std::cout \u0026lt;\u0026lt; std::endl; if (!node-\u0026gt;isLeaf) { for (auto child : node-\u0026gt;children) { printHelper(child, level + 1); } } } } }; int main() { BPlusTree\u0026lt;int, std::string\u0026gt; bPlusTree; // æ’å…¥ç¤ºä¾‹ bPlusTree.insert(10, \u0026#34;Value10\u0026#34;); bPlusTree.insert(20, \u0026#34;Value20\u0026#34;); bPlusTree.insert(5, \u0026#34;Value5\u0026#34;); bPlusTree.insert(6, \u0026#34;Value6\u0026#34;); bPlusTree.insert(12, \u0026#34;Value12\u0026#34;); bPlusTree.insert(30, \u0026#34;Value30\u0026#34;); bPlusTree.insert(7, \u0026#34;Value7\u0026#34;); bPlusTree.insert(17, \u0026#34;Value17\u0026#34;); bPlusTree.insert(25, \u0026#34;Value25\u0026#34;); // æ‰“å°B+æ ‘ bPlusTree.print(); // æœç´¢ç¤ºä¾‹ int keyToSearch = 12; std:: å¤šçº¿ç¨‹çš„B+æ ‘ Locks\u0026amp;\u0026amp;Latches ==ä¸¤è€…åŒºåˆ«==\nä¸ªäººè®¤ä¸ºæ˜¯å­˜åœ¨çš„ç»´åº¦ä¸å¤ªä¸€æ ·ã€‚locksé€‚ç”¨äºå®è§‚æ–¹é¢çš„ï¼Œlatchesåˆ™æ˜¯ç»†è‡´å…¥å¾®çš„ã€‚ ï¼ˆå‰©ä¸‹çš„è¿˜å¾…æ€»ç»“ã€ã€ã€ä½“ä¼šç¡®å®æ²¡æœ‰é‚£ä¹ˆçš„æ·±åˆ»ğŸ˜€ï¼‰ï¼Œä¸è¿‡å¯ä»¥å‚è€ƒchatgptè¯´çš„ã€‚ ==è¯»æ¨¡å¼å’Œå†™æ¨¡å¼==\nè¯»æ¨¡å¼æ¯”è¾ƒéšæ„ï¼Œå› ä¸ºä¸æ¶‰åŠä¿®æ”¹æ‰€ä»¥è°è¯»éƒ½æ— æ‰€è°“ï¼Œåªæ˜¯åœ¨è¯»çš„æ—¶å€™ä¸èƒ½ä¿®æ”¹ å†™æ¨¡å¼å› ä¸ºæ¶‰åŠåˆ°ä¿®æ”¹ï¼Œæ‰€ä»¥åªæœ‰å”¯ä¸€çš„ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè¿›è¡Œå†™ã€‚ è¿™å¼ å›¾å¯ä»¥è§£é‡Šlatchçš„æ­£å¸¸è¿è¡Œçš„é€»è¾‘ã€‚ Latchesçš„å®ç° ==æ–¹æ³•ä¸€==\nè¿™ä¸‰ç§â€œmutexâ€æœ‰ä½•åŒºåˆ«ã€‚\n==æ–¹æ³•äºŒ==\nå…è®¸å¤šçº¿ç¨‹è¯»ï¼Œè¯»çš„æ—¶å€™å¦‚æœæœ‰å†™ğŸ”’éœ€è¦è®©å†™é”ç­‰å¾…ï¼Œä¹‹åè¦ç”¨å…¬å¹³çš„ç®—æ³•å¹³è¡¡ï¼Œé˜²æ­¢æŸä¸ªçº¿ç¨‹é¥¿æ­»ã€‚ å¯ä»¥åŸºäºè‡ªæ—‹é”å®ç°ã€‚ Latchesçš„åº”ç”¨ ==hash table latches== å› ä¸ºå“ˆå¸Œè¡¨çš„æœç´¢æ–¹å‘æ˜¯æœå‘åŒä¸€ä¸ªæ–¹å‘ï¼Œåœ¨æœç´¢çš„æ—¶å€™åªæ¶‰åŠåˆ°ä¸€ä¸ªæ•°æ®é¡µæˆ–è¡Œ ä¸ä¼šå‘ç”Ÿæœç´¢å†²çªçš„ç°è±¡ï¼Œå› æ­¤ä¸å¯èƒ½å‘ç”Ÿæ­»é” åœ¨resizeå“ˆå¸Œè¡¨çš„æ—¶å€™åœ¨header pageä¸ŠğŸ”’ä¸€ä¸‹ï¼Œå°±èƒ½ä¿è¯æ•´ä¸ªhashè¡¨çš„å†™é”ã€‚ ==å®ç°==\nåœ¨æ¯ä¸ªé¡µæˆ–è€…æ¯ä¸€è¡Œä¸ŠåŠ ä¸Šè¿™ç§ç»†ç²’åº¦çš„é”è‡ªç„¶æ˜¯æœ‰åŠ©äºæ•ˆç‡çš„æå‡ åœ¨æœå¯»åˆ°ä¸‹ä¸€é¡µçš„æ—¶å€™ä¸Šä¸€é¡µå¤„äºä»€ä¹ˆçŠ¶æ€å·²ç»æ²¡æœ‰ä»»ä½•å…³ç³»äº†ï¼Œæ‰€ä»¥å¯ä»¥æ”¾å¿ƒçš„é‡Šæ”¾é” è¿™æ˜¯å¦ä¸€ç§ç²’åº¦æ›´ç»†çš„é”ï¼Œåœ¨æ¯ä¸€è¡Œæ•°æ®ä¸ŠåŠ é”ï¼Œæœç´¢åˆ°ä¸‹ä¸€è¡Œå°±ç»™ä¸Šä¸€è¡Œè§£é”ã€‚ b+ tree latches ==èƒèŸ¹é”==\nåœ¨è¯»çš„æ—¶å€™ï¼šå½“è·å–åˆ°ä¸‹ä¸€ä¸ªpageçš„è¯»é”ä¹‹åå°±å¯ä»¥é‡Šæ”¾å½“å‰pageçš„è¯»é”ã€‚ åœ¨å†™çš„æ—¶å€™ï¼šä¸€ç›´é€’å½’å‘ä¸‹è·å–å†™é”ï¼Œç›´åˆ°ç¢°åˆ°ä¸€ä¸ªpageæ˜¯å¤„äºå®‰å…¨çŠ¶æ€çš„ï¼Œå°±å¯ä»¥é‡Šæ”¾æ‰€æœ‰çˆ¶èŠ‚ç‚¹çš„å†™é”ã€‚ï¼ˆæ‚²è§‚é”ï¼‰ åœ¨å†™çš„æ—¶å€™ï¼šå…ˆå‡è®¾ä¸€è·¯ä¸Šçš„èŠ‚ç‚¹éƒ½æ˜¯å¤„äºå®‰å…¨çŠ¶æ€çš„ï¼Œå¦‚æœå‘ç°æœ‰ä¸å®‰å…¨çš„é‚£ä¹ˆå°±æ¨åˆ°æŒ‰ç…§æ‚²è§‚é”çš„æ–¹æ³•å†æ¥ä¸€éã€‚ ","permalink":"https://jialog.top/posts/database/note/b+-tree-index/","summary":"\u003ch2 id=\"table-index\"\u003eTABLE INDEX\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA table index is a replica of a subset of a table\u0026rsquo;s attributes that are organized and/or sorted for efficient access using those attributes.The DBMS ensures that the contents of the table and the index are logically synchronized.\u003c/p\u003e\u003c/blockquote\u003e\n\u003cp\u003e\u003cstrong\u003eç´¢å¼•\u003c/strong\u003eè®©æ•°æ®åœ¨æ•°æ®åº“ä¸­çš„æŸ¥è¯¢æ›´åŠ çš„é«˜æ•ˆï¼ŒDBMSè´Ÿè´£ä½¿ç´¢å¼•å’Œå®é™…å†…å®¹\u003cstrong\u003eåŒæ­¥\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|575\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231208203437.png\"\u003e\u003c/p\u003e\n\u003cp\u003eDBMSçš„å·¥ä½œæ˜¯é€‰æ‹©æœ€ä¼˜çš„ç´¢å¼•å»æ‰§è¡ŒæŸ¥è¯¢ï¼Œè¿™å°±å¸¦æ¥ä¸€ä¸ªéœ€è¦æƒè¡¡çš„é—®é¢˜â€”â€”ç´¢å¼•è¶Šå¤šæŸ¥è¯¢è¶Šé«˜æ•ˆä½†æ˜¯ç›¸å¯¹çš„\u003cstrong\u003eç»´æŠ¤æˆæœ¬\u003c/strong\u003eï¼ˆMaintenance Overheadï¼‰å’Œ\u003cstrong\u003eå­˜å‚¨æˆæœ¬\u003c/strong\u003eï¼ˆStorage Overheadï¼‰ å°±ä¼šç›¸åº”çš„æé«˜ã€‚\u003c/p\u003e\n\u003ch2 id=\"b-tree-family\"\u003eB-TREE FAMILY\u003c/h2\u003e\n\u003cp\u003eB-æ ‘å®¶æ—ã€‚\u003c/p\u003e\n\u003cp\u003eé‡ç‚¹äº†è§£B+æ ‘ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231208214614.png\"\u003e\u003c/p\u003e\n\u003cp\u003eï¼ˆBæ ‘è™½ç„¶æ˜¯ä¸€ä¸ªå¹³è¡¡æ ‘ï¼ˆbalanceï¼‰ï¼Œä½†Bæ ‘çš„Bä¸æ˜¯balanceçš„ç¼©å†™ï¼Œåˆ°åº•ä»£è¡¨ä»€ä¹ˆè¿˜å­˜ç–‘ï¼‰\u003c/p\u003e\n\u003ch3 id=\"btree\"\u003eB+TREE\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|600\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231208215020.png\"\u003e\u003c/p\u003e\n\u003cp\u003eB+æ ‘æ˜¯ä¸€ä¸ªè‡ªå¹³è¡¡æ ‘çš„æ•°æ®ç»“æ„ï¼Œ\u003cstrong\u003eé¡ºåºçš„\u003c/strong\u003eå­˜å‚¨æ•°æ®ï¼Œå¹¶ä¸”å°†æŸ¥è¯¢ï¼Œé¡ºåºè®¿é—®ï¼Œæ’å…¥å’Œåˆ é™¤çš„æ—¶é—´å¤æ‚åº¦åŸºæœ¬æ§åˆ¶åœ¨\u003cstrong\u003eO(log n)\u003c/strong\u003eã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eæ˜¯äºŒå‰æœç´¢æ ‘çš„æ¨å¹¿ï¼Œå› ä¸ºå®ƒå¯ä»¥æœ‰è¶…è¿‡ä¸¤ä¸ªçš„å­©å­èŠ‚ç‚¹ã€‚\u003c/li\u003e\n\u003cli\u003eå®ƒé’ˆå¯¹ç³»ç»Ÿå’Œå­˜å‚¨ä¹‹é—´çš„å¤§å—æ•°æ®è¯»å†™è¿›è¡Œäº†ç‰¹åˆ«çš„ä¼˜åŒ–ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"btree-properties\"\u003eB+TREE PROPERTIES\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231208220751.png\"\u003e\u003c/p\u003e\n\u003cp\u003eB+æ ‘æ˜¯ä¸€ä¸ªå¤šå‰æœç´¢æ ‘ï¼Œæœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä»–å®Œç¾å¹³è¡¡\u003c/li\u003e\n\u003cli\u003eé™¤äº†æ ¹èŠ‚ç‚¹éƒ½è‡³å°‘åŠæ»¡\u003c/li\u003e\n\u003cli\u003ekä¸ªå€¼ä¼šæŠŠä¸€ä¸ªèŠ‚ç‚¹åˆ†ä¸ºk+1éƒ¨åˆ†ã€‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"btree-example\"\u003eB+TREE EXAMPLE\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|675\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231208223923.png\"\u003e\u003c/p\u003e\n\u003cp\u003eä¸Šå›¾æ˜¯ä¸€ä¸ªå°ä¾‹å­ï¼Œèƒ½å¤Ÿå‘ç°B+æ ‘åº•å±‚æ˜¯èƒ½å¤ŸåŒå‘è®¿é—®çš„ï¼Œè¿™åœ¨\u003cstrong\u003eå¤šçº¿ç¨‹\u003c/strong\u003eçš„æ—¶å€™æœ‰å¯èƒ½ä¼šé€ æˆ\u003cstrong\u003eæ­»é”\u003c/strong\u003eé—®é¢˜ã€‚è¿™åœ¨åé¢è®²è§£B+æ ‘å¤šçº¿ç¨‹çš„ç« èŠ‚ä¹Ÿä¼šå¯¹åŸå› è¿›è¡Œè®²è§£ã€‚\u003c/p\u003e","title":"B+ Tree Index"},{"content":"CMU15-445 ä½œä¸º CMU æ•°æ®åº“çš„å…¥é—¨è¯¾ï¼Œè¿™é—¨è¯¾ç”±æ•°æ®åº“é¢†åŸŸçš„å¤§ç‰› Andy Pavlo è®²æˆï¼ˆâ€œè¿™ä¸ªä¸–ç•Œä¸Šæˆ‘åªåœ¨ä¹ä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯æˆ‘çš„è€å©†ï¼ŒäºŒå°±æ˜¯æ•°æ®åº“â€ï¼‰ã€‚\nè¿™æ˜¯ä¸€é—¨è´¨é‡æé«˜ï¼Œèµ„æºæé½å…¨çš„ Database å…¥é—¨è¯¾ï¼Œè¿™é—¨è¯¾çš„ Faculty å’ŒèƒŒåçš„ CMU Database Group å°†è¯¾ç¨‹å¯¹åº”çš„åŸºç¡€è®¾æ–½ (Autograder, Discord) å’Œè¯¾ç¨‹èµ„æ–™ (Lectures, Notes, Homework) å®Œå…¨å¼€æºï¼Œè®©æ¯ä¸€ä¸ªæ„¿æ„å­¦ä¹ æ•°æ®åº“çš„åŒå­¦éƒ½å¯ä»¥äº«å—åˆ°å‡ ä¹ç­‰åŒäº CMU æœ¬æ ¡å­¦ç”Ÿçš„è¯¾ç¨‹ä½“éªŒã€‚\näº®ç‚¹åœ¨äºè¿™é—¨è¯¾ç¨‹å®ç°äº†ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“çš„Demo\u0026ndash;bustubï¼Œå¹¶å¯¹ç»„æˆéƒ¨åˆ†è¿›è¡Œä¿®æ”¹ï¼Œæœ€åè¾¾åˆ°å®Œæˆæ•´ä¸ªæ•°æ®åº“çš„ç›®çš„ï¼Œéå¸¸çš„æœ‰æ„æ€ã€‚\nè¿‘å¹´æ¥ç”±äºCMU15-445è¿™é—¨è¯¾çš„çƒ­åº¦å¤§å¢ï¼Œæ— è®ºæ˜¯æ‰¾å·¥ä½œè¿˜æ˜¯ä¿ç ”çš„ç®€å†ä¸Šéƒ½å°‘ä¸äº†è¿™ä¸ªè¯¾ç¨‹ã€‚åˆ°äº†å¯ä»¥è¯´æ˜¯äººæ‰‹ä¸€ä¸ªçš„åœ°æ­¥ï¼ˆè¿˜æœ‰MIT6.824ï¼‰ï¼Œä½†æ˜¯æœ€åçš„æ’è¡Œæ¦œä¸ŠçœŸæ­£å®Œæˆ4ä¸ªé¡¹ç›®å¹¶ä¸”æœ‰æˆç»©çš„ä¸è¿‡100ä½™äººã€‚åœ¨è¿™ç§èƒŒæ™¯ä¸‹ä¹Ÿå‚¬ç”Ÿå‡ºäº†å¾ˆå¤šå–è¯¾çš„æœºæ„å’Œä¸ªäººã€‚è¿˜æœ‰ç§ç§ä¹±è±¡ã€‚æš‚ä¸”æŒ‰ä¸‹ä¸è¡¨ï¼Œè¿›å…¥ä¸»é¢˜ã€‚\nå‰è¨€ å…ˆé™„ä¸Š è¯¾ç¨‹é“¾æ¥æˆ‘åŸæœ¬æ˜¯æƒ³è¦å®Œæˆæœ€æ–°çš„è¯¾ç¨‹å³2023fallçš„ï¼Œä½†æ˜¯2023fallçš„P0ç›´æ¥å°±æŠŠæˆ‘åŠé€€äº†ï¼Œç›¸è¾ƒäº2022fallçš„P0æˆ‘è®¤ä¸ºéš¾åº¦ä¸Šå‡äº†ä¸æ­¢ä¸€ç‚¹ã€‚ä½†æ˜¯å…¶ä»–çš„Projectçš„å®ç°å·®åˆ«å¹¶ä¸æ˜¯å¤ªå¤§ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†è¾ƒä¸ºå®¹æ˜“ä¸‹æ‰‹çš„2022fallçš„è¯¾ç¨‹è¿›è¡Œå­¦ä¹ ã€‚\nProject0-C++ Primer è¿˜æ˜¯å…ˆæ”¾ä¸Šé¡¹ç›®Project#0-C++primeré“¾æ¥\næ¦‚è¿° è¿™æ˜¯ä¸€ä¸ªç›¸å½“äºå…ˆå¯¼è¯¾ç¨‹çš„é¡¹ç›®ï¼Œæ—¨åœ¨åŸ¹å…»å’Œæ£€éªŒå­¦ç”Ÿçš„ç°ä»£C++ç¼–ç¨‹èƒ½åŠ› ï¼ŒBusTubå¤§é‡ä½¿ç”¨C++17ï¼Œå½“ä½ ä¸Šæ‰‹ä¹‹åå¯èƒ½å°±ä¼šå‘ç°å’Œä½ å°è±¡ä¸­çš„C++ä¸ä¸€æ ·ã€‚\nåœ¨CMUå¦‚æœä½ æ²¡èƒ½æ»¡åˆ†é€šè¿‡P0ï¼Œé‚£ä¹ˆä½ ä¼šè¢«è¦æ±‚é€€è¯¾ã€‚ æ‰€éœ€å‰ç½®çŸ¥è¯† æˆ‘è®¤ä¸ºéœ€è¦çš„å‰ç½®çŸ¥è¯†ä¸»è¦åŒ…æ‹¬C++11çš„æ–°ç‰¹æ€§ è¿™æ˜¯åœ¨2023fallè¯¾ç¨‹çš„ä¸€ä¸ªå¯èƒ½æ˜¯åŠ©æ•™å†™çš„ä¸€ä¸ªå°demoåŒ…å«äº†å‡ ä¸ªä¾‹å­èƒ½å¤Ÿå¸®åŠ©ä½ å¿«é€Ÿçš„ä¸Šæ‰‹c++11çš„æ–°ç‰¹æ€§ã€‚\nç†Ÿæ‚‰å­—å…¸æ ‘èƒ½å¤Ÿç†è§£å­—å…¸æ ‘åŸç†èƒ½å¤Ÿå®Œæˆä¸€ä¸ªå­—å…¸æ ‘çš„å°demoLeetCode.208å®ç°å‰ç¼€å­—å…¸æ ‘ å¯ä»¥å…ˆæŠŠè¿™ä¸ªåšäº†ï¼Œäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯å­—å…¸æ ‘ã€‚\nä¸Šå›¾å°±æ˜¯ä¸€ä¸ªå­—å…¸æ ‘çš„ç®€å•ç¤ºæ„å›¾\næ–‡ä»¶ç»“æ„ åœ¨æ–‡ä»¶ä¸­ä½œä¸ºå­—å…¸æ ‘çš„æ¶å­æ–‡ä»¶ä¸­åŒ…å«äº†ä¸‰ä¸ªç±»ã€‚\nTrieNode TrieNodeWithValue Trie Task#1 å­—å…¸æ ‘ å…ˆå®Œæˆä¸€ä¸ªå•çº¿ç¨‹ç‰ˆæœ¬çš„å­—å…¸æ ‘ï¼ŒåæœŸå†è€ƒè™‘å¹¶å‘ã€‚\nTrieNode TrieNodeå®šä¹‰äº†ä¸€ä¸ªTrieæ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ä¸€ä¸ªåŒ…å«å…³é”®å­—çš„charç±»å‹`key_char_ã€‚ ä¸€ä¸ªboolç±»å‹is_nodeçš„æ ‡å¿—æ¥æ ‡è®°è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯å€¼èŠ‚ç‚¹ åŒ…å«ä¸€ä¸ªå­˜å‚¨ç±»å‹ä¸ºÂ charÂ toÂ unique_ptr\u0026lt;TrieNode\u0026gt;æ˜ å°„çš„å“ˆå¸Œè¡¨ éœ€è¦æ³¨æ„çš„ç‚¹ï¼š C++ä¸­æ™ºèƒ½æŒ‡é’ˆstd::unique_ptrçš„ç‰¹æ€§æ‰€å¸¦æ¥çš„ï¼š TheÂ InsertChildNodeÂ andÂ GetChildNodeÂ both return a pointer toÂ unique_ptr è¿™ä¸ªç‹¬äº«ç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆä¹Ÿä¸æ”¯æŒè¢«å¤åˆ¶ï¼Œæ‰€ä»¥è¦ä¹ˆä½¿ç”¨std::move()æŠŠæ‰€æœ‰æƒäº¤å‡ºå»ï¼Œè¦ä¹ˆå°±ç”¨get()å‡½æ•°æŠŠè£¸æŒ‡é’ˆäº¤å‡ºå»ã€‚ the move constructorÂ TrieNode(TrieNode \u0026amp;\u0026amp;other_trie_node)Â is used to transfer old TrieNode\u0026rsquo;s unique pointers to a new TrieNodeã€‚å› ä¸ºæ˜¯unique_ptræ‰€ä»¥åœ¨ä¼ é€’çš„æ—¶å€™ä¸èƒ½å¯¹æŒ‡é’ˆè¿›è¡Œå¤åˆ¶ã€‚ï¼ˆè§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨move()å‡½æ•°ï¼‰ã€‚ TrieNodeWithValue è¿™ä¸ªæ˜¯[[CMU15-445 Project 0 - C++ Primer#TrieNode]]ç±»çš„å­ç±»ï¼Œå¤šäº†ä¸€ä¸ªèƒ½ä¿å­˜ä»»æ„ç±»å‹çš„å€¼Tã€‚è€Œä¸”is_endè¢«è®¾å®šä¸ºTrueã€‚ æ ¹æ®ä¸åŒçš„æƒ…å†µè°ƒç”¨ä¸åŒçš„æ„é€ å‡½æ•°ã€‚å¦‚æœåŸæœ¬æ˜¯ä¸€ä¸ªæ™®é€šèŠ‚ç‚¹å°±è°ƒç”¨å‚æ•°ä¸ºï¼ˆTrieNode\u0026amp;\u0026amp;ï¼ŒTï¼‰ï¼Œå¦‚æœæ˜¯åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„èŠ‚ç‚¹åˆ™è°ƒç”¨å‚æ•°ä¸º(char,T). Trie Class æœ‰ä¸€ä¸ªroot_èŠ‚ç‚¹ï¼Œæ˜¯æ•´ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œè€Œä¸”ä¸å­˜å‚¨ä»»ä½•çš„å€¼ã€‚ Insert è¦æ’å…¥åˆ°trieä¸­ï¼Œæ‚¨éœ€è¦é¦–å…ˆä½¿ç”¨ç»™å®šçš„é”®éå†trieï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥TrieNodeã€‚è¯·æ³¨æ„ï¼Œä¸å…è®¸æ’å…¥é‡å¤çš„é”®ï¼Œå¹¶ä¸”åº”è¯¥è¿”å›falseã€‚ä¸€æ—¦åˆ°è¾¾é”®çš„ç»“æŸå­—ç¬¦ï¼Œæœ‰ä¸‰ç§å¯èƒ½æ€§ï¼š\nåˆ°è¾¾çš„èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œéœ€è¦è°ƒç”¨å‚æ•°ä¸º(char,T)çš„æ„é€ å‡½æ•°æ„é€ ä¸€ä¸ªå…¨æ–°çš„å€¼èŠ‚ç‚¹ã€‚åˆ©ç”¨â€œMake use of the fact that aÂ unique_ptrÂ toÂ TrieNodeÂ can also store aÂ unique_ptrÂ toÂ TrieNodeWithValueâ€è¿™ä¸€ç‰¹æ€§å¯ä»¥ä»¥æœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸ºæ¨¡æ¿ï¼ˆæ— è®ºæ˜¯ä¸æ˜¯å€¼èŠ‚ç‚¹éƒ½èƒ½å¤ŸæˆåŠŸåˆ›å»ºï¼‰åˆ›å»ºä¸€ä¸ªæ–°çš„å€¼èŠ‚ç‚¹ã€‚ åˆ°è¾¾çš„èŠ‚ç‚¹å­˜åœ¨ä½†ä¸æ˜¯å€¼èŠ‚ç‚¹ï¼Œè°ƒç”¨ï¼ˆTrieNode\u0026amp;\u0026amp;ï¼ŒTï¼‰ä¸ºå‚æ•°çš„è¿™æ ·ä¸€ä¸ªè½¬æ¢çš„æ„é€ å‡½æ•°ï¼ŒæŠŠæ™®é€šèŠ‚ç‚¹è½¬æ¢ä¸ºå€¼èŠ‚ç‚¹ã€‚ å­˜åœ¨ä¸”æ˜¯å€¼èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›falseã€‚ Remove æˆ‘è®¤ä¸ºRemove()æ˜¯è¿™å‡ ä¸ªå‡½æ•°ä¸­ç›¸å¯¹æ¥è¯´æ¯”è¾ƒéš¾çš„ï¼Œå› ä¸ºæ¶‰åŠåˆ°é€’å½’åˆ é™¤ã€‚\nç›®çš„å°±æ˜¯åˆ é™¤ç»™å®šè·¯å¾„çš„èŠ‚ç‚¹çš„å€¼ã€‚\nkeyä¸å­˜åœ¨ç›´æ¥è¿”å› æŠŠç»ˆç«¯èŠ‚ç‚¹çš„is_end_çš„å€¼æŒ‡å®šä¸ºfalseã€‚ å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ²¡æœ‰ä»»ä½•å­©å­é‚£å°±åº”è¯¥æŠŠä»–åˆ é™¤ éå†trieå¹¶é€’å½’åˆ é™¤æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚é‡åˆ°åŒ…å«å­èŠ‚ç‚¹çš„èŠ‚ç‚¹æ—¶åœæ­¢ã€‚ GetValue æ²¡æ‰¾åˆ°æˆ–è€…ç±»å‹ä¸åŒ¹é…å°†successçš„å€¼è®¾ç½®ä¸ºfalseã€‚ ä¸ªäººè®¤ä¸ºè¿™ä¸ªçš„å…³é”®ç‚¹åœ¨äºèŠ‚ç‚¹ç±»å‹çš„è½¬æ¢ä»è€Œè·å–åˆ°èŠ‚ç‚¹çš„å€¼ï¼Œåˆå› ä¸ºcurrentæ˜¯unique_ptrç±»å‹æ‰€ä»¥åªèƒ½ç”¨get()å…ˆè·å–è£¸æŒ‡é’ˆå†è¿›è¡Œè½¬æ¢ã€‚\nTask #2 - å¤šçº¿ç¨‹å­—å…¸æ ‘ ç®€å•æ¦‚æ‹¬å°±æ˜¯æ¶‰åŠè¯»çš„æ“ä½œå°±ä¸Šè¯»é”ï¼Œæ¶‰åŠå†™çš„æ“ä½œå°±ä¸Šå†™é”ï¼Œæ¶‰åŠè¯»å†™çš„æ“ä½œå°±ä¸Šè¯»å†™é” åƒä¸‡åˆ«å¿˜è®°è¿”å›ç›´æ¥è§£é”ï¼Œä»¥å…é€ æˆæ­»é”ã€‚ æœ€åé™„ä¸Šé€šè¿‡æˆªå›¾ã€‚\n","permalink":"https://jialog.top/posts/database/project/cmu15-445-project-0---c++-primer/","summary":"\u003ch1 id=\"cmu15-445\"\u003eCMU15-445\u003c/h1\u003e\n\u003cp\u003eä½œä¸º CMU æ•°æ®åº“çš„å…¥é—¨è¯¾ï¼Œè¿™é—¨è¯¾ç”±æ•°æ®åº“é¢†åŸŸçš„å¤§ç‰› Andy Pavlo è®²æˆï¼ˆâ€œè¿™ä¸ªä¸–ç•Œä¸Šæˆ‘åªåœ¨ä¹ä¸¤ä»¶äº‹ï¼Œä¸€æ˜¯æˆ‘çš„è€å©†ï¼ŒäºŒå°±æ˜¯æ•°æ®åº“â€ï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003eè¿™æ˜¯ä¸€é—¨è´¨é‡æé«˜ï¼Œèµ„æºæé½å…¨çš„ Database å…¥é—¨è¯¾ï¼Œè¿™é—¨è¯¾çš„ Faculty å’ŒèƒŒåçš„ CMU Database Group å°†è¯¾ç¨‹å¯¹åº”çš„åŸºç¡€è®¾æ–½ (Autograder, Discord) å’Œè¯¾ç¨‹èµ„æ–™ (Lectures, Notes, Homework) å®Œå…¨å¼€æºï¼Œè®©æ¯ä¸€ä¸ªæ„¿æ„å­¦ä¹ æ•°æ®åº“çš„åŒå­¦éƒ½å¯ä»¥äº«å—åˆ°å‡ ä¹ç­‰åŒäº CMU æœ¬æ ¡å­¦ç”Ÿçš„è¯¾ç¨‹ä½“éªŒã€‚\u003c/p\u003e\n\u003cp\u003eäº®ç‚¹åœ¨äºè¿™é—¨è¯¾ç¨‹å®ç°äº†ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“çš„Demo\u0026ndash;bustubï¼Œå¹¶å¯¹ç»„æˆéƒ¨åˆ†è¿›è¡Œä¿®æ”¹ï¼Œæœ€åè¾¾åˆ°å®Œæˆæ•´ä¸ªæ•°æ®åº“çš„ç›®çš„ï¼Œéå¸¸çš„æœ‰æ„æ€ã€‚\u003c/p\u003e\n\u003cp\u003eè¿‘å¹´æ¥ç”±äºCMU15-445è¿™é—¨è¯¾çš„çƒ­åº¦å¤§å¢ï¼Œæ— è®ºæ˜¯æ‰¾å·¥ä½œè¿˜æ˜¯ä¿ç ”çš„ç®€å†ä¸Šéƒ½å°‘ä¸äº†è¿™ä¸ªè¯¾ç¨‹ã€‚åˆ°äº†å¯ä»¥è¯´æ˜¯äººæ‰‹ä¸€ä¸ªçš„åœ°æ­¥ï¼ˆè¿˜æœ‰MIT6.824ï¼‰ï¼Œä½†æ˜¯æœ€åçš„æ’è¡Œæ¦œä¸ŠçœŸæ­£å®Œæˆ4ä¸ªé¡¹ç›®å¹¶ä¸”æœ‰æˆç»©çš„ä¸è¿‡100ä½™äººã€‚åœ¨è¿™ç§èƒŒæ™¯ä¸‹ä¹Ÿå‚¬ç”Ÿå‡ºäº†å¾ˆå¤šå–è¯¾çš„æœºæ„å’Œä¸ªäººã€‚è¿˜æœ‰ç§ç§ä¹±è±¡ã€‚æš‚ä¸”æŒ‰ä¸‹ä¸è¡¨ï¼Œè¿›å…¥ä¸»é¢˜ã€‚\u003c/p\u003e\n\u003ch2 id=\"å‰è¨€\"\u003eå‰è¨€\u003c/h2\u003e\n\u003cp\u003eå…ˆé™„ä¸Š \u003ca href=\"https://15445.courses.cs.cmu.edu/fall2022\"\u003eè¯¾ç¨‹é“¾æ¥\u003c/a\u003eæˆ‘åŸæœ¬æ˜¯æƒ³è¦å®Œæˆæœ€æ–°çš„è¯¾ç¨‹å³2023fallçš„ï¼Œä½†æ˜¯2023fallçš„P0ç›´æ¥å°±æŠŠæˆ‘åŠé€€äº†ï¼Œç›¸è¾ƒäº2022fallçš„P0æˆ‘è®¤ä¸ºéš¾åº¦ä¸Šå‡äº†ä¸æ­¢ä¸€ç‚¹ã€‚ä½†æ˜¯å…¶ä»–çš„Projectçš„å®ç°å·®åˆ«å¹¶ä¸æ˜¯å¤ªå¤§ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†è¾ƒä¸ºå®¹æ˜“ä¸‹æ‰‹çš„2022fallçš„è¯¾ç¨‹è¿›è¡Œå­¦ä¹ ã€‚\u003c/p\u003e\n\u003ch1 id=\"project0-c-primer\"\u003eProject0-C++ Primer\u003c/h1\u003e\n\u003cp\u003eè¿˜æ˜¯å…ˆæ”¾ä¸Š\u003ca href=\"https://15445.courses.cs.cmu.edu/fall2022/project0/\"\u003eé¡¹ç›®Project#0-C++primeré“¾æ¥\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"æ¦‚è¿°\"\u003eæ¦‚è¿°\u003c/h2\u003e\n\u003cp\u003eè¿™æ˜¯ä¸€ä¸ªç›¸å½“äºå…ˆå¯¼è¯¾ç¨‹çš„é¡¹ç›®ï¼Œ\u003cstrong\u003eæ—¨åœ¨åŸ¹å…»å’Œæ£€éªŒå­¦ç”Ÿçš„ç°ä»£C++ç¼–ç¨‹èƒ½åŠ›\u003c/strong\u003e ï¼ŒBusTubå¤§é‡ä½¿ç”¨C++17ï¼Œå½“ä½ ä¸Šæ‰‹ä¹‹å\u003cstrong\u003eå¯èƒ½\u003c/strong\u003eå°±ä¼šå‘ç°å’Œä½ å°è±¡ä¸­çš„C++ä¸ä¸€æ ·ã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨CMUå¦‚æœä½ æ²¡èƒ½æ»¡åˆ†é€šè¿‡P0ï¼Œé‚£ä¹ˆä½ ä¼šè¢«è¦æ±‚é€€è¯¾ã€‚\n\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231129141237.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"æ‰€éœ€å‰ç½®çŸ¥è¯†\"\u003eæ‰€éœ€å‰ç½®çŸ¥è¯†\u003c/h2\u003e\n\u003cp\u003eæˆ‘è®¤ä¸ºéœ€è¦çš„å‰ç½®çŸ¥è¯†ä¸»è¦åŒ…æ‹¬\u003ca href=\"https://github.com/cmu-db/15445-bootcamp\"\u003e\u003cstrong\u003eC++11çš„æ–°ç‰¹æ€§\u003c/strong\u003e\u003c/a\u003e\nè¿™æ˜¯åœ¨2023fallè¯¾ç¨‹çš„ä¸€ä¸ªå¯èƒ½æ˜¯åŠ©æ•™å†™çš„ä¸€ä¸ªå°demoåŒ…å«äº†å‡ ä¸ªä¾‹å­èƒ½å¤Ÿå¸®åŠ©ä½ å¿«é€Ÿçš„ä¸Šæ‰‹c++11çš„æ–°ç‰¹æ€§ã€‚\u003c/p\u003e\n\u003cp\u003eç†Ÿæ‚‰\u003cstrong\u003eå­—å…¸æ ‘\u003c/strong\u003eèƒ½å¤Ÿç†è§£å­—å…¸æ ‘åŸç†èƒ½å¤Ÿå®Œæˆä¸€ä¸ªå­—å…¸æ ‘çš„å°demo\u003ca href=\"https://leetcode.cn/problems/implement-trie-prefix-tree/description/\"\u003eLeetCode.208å®ç°å‰ç¼€å­—å…¸æ ‘\u003c/a\u003e å¯ä»¥å…ˆæŠŠè¿™ä¸ªåšäº†ï¼Œäº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯å­—å…¸æ ‘ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231129144859.png\"\u003e\u003c/p\u003e\n\u003cp\u003eä¸Šå›¾å°±æ˜¯ä¸€ä¸ªå­—å…¸æ ‘çš„ç®€å•ç¤ºæ„å›¾\u003c/p\u003e\n\u003ch2 id=\"æ–‡ä»¶ç»“æ„\"\u003eæ–‡ä»¶ç»“æ„\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"image.png|264\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231129162120.png\"\u003e\u003c/p\u003e\n\u003cp\u003eåœ¨æ–‡ä»¶ä¸­ä½œä¸ºå­—å…¸æ ‘çš„æ¶å­æ–‡ä»¶ä¸­åŒ…å«äº†ä¸‰ä¸ªç±»ã€‚\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTrieNode\u003c/li\u003e\n\u003cli\u003eTrieNodeWithValue\u003c/li\u003e\n\u003cli\u003eTrie\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"task1-å­—å…¸æ ‘\"\u003eTask#1 å­—å…¸æ ‘\u003c/h2\u003e\n\u003cp\u003eå…ˆå®Œæˆä¸€ä¸ªå•çº¿ç¨‹ç‰ˆæœ¬çš„å­—å…¸æ ‘ï¼ŒåæœŸå†è€ƒè™‘å¹¶å‘ã€‚\u003c/p\u003e\n\u003ch3 id=\"trienode\"\u003eTrieNode\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003eTrieNode\u003c/code\u003eå®šä¹‰äº†ä¸€ä¸ªTrieæ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231129160311.png\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä¸€ä¸ªåŒ…å«å…³é”®å­—çš„charç±»å‹`key_char_ã€‚\u003c/li\u003e\n\u003cli\u003eä¸€ä¸ªboolç±»å‹\u003ccode\u003eis_node\u003c/code\u003eçš„æ ‡å¿—æ¥æ ‡è®°è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯\u003cstrong\u003eå€¼èŠ‚ç‚¹\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eåŒ…å«ä¸€ä¸ªå­˜å‚¨ç±»å‹ä¸ºÂ \u003ccode\u003echar\u003c/code\u003eÂ toÂ \u003ccode\u003eunique_ptr\u0026lt;TrieNode\u0026gt;\u003c/code\u003eæ˜ å°„çš„å“ˆå¸Œè¡¨\n\u003cstrong\u003eéœ€è¦æ³¨æ„çš„ç‚¹ï¼š\u003c/strong\u003e\nC++ä¸­æ™ºèƒ½æŒ‡é’ˆ\u003ca href=\"https://www.learncpp.com/cpp-tutorial/stdunique_ptr/\"\u003estd::unique_ptrçš„ç‰¹æ€§\u003c/a\u003eæ‰€å¸¦æ¥çš„ï¼š\nTheÂ \u003ccode\u003eInsertChildNode\u003c/code\u003eÂ andÂ \u003ccode\u003eGetChildNode\u003c/code\u003eÂ both return a pointer toÂ \u003ccode\u003eunique_ptr\u003c/code\u003e\nè¿™ä¸ªç‹¬äº«ç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆä¹Ÿä¸æ”¯æŒè¢«å¤åˆ¶ï¼Œæ‰€ä»¥è¦ä¹ˆä½¿ç”¨\u003ccode\u003estd::move()\u003c/code\u003eæŠŠæ‰€æœ‰æƒäº¤å‡ºå»ï¼Œè¦ä¹ˆå°±ç”¨\u003ccode\u003eget()\u003c/code\u003eå‡½æ•°æŠŠè£¸æŒ‡é’ˆäº¤å‡ºå»ã€‚\nthe move constructorÂ \u003ccode\u003eTrieNode(TrieNode \u0026amp;\u0026amp;other_trie_node)\u003c/code\u003eÂ is used to transfer old TrieNode\u0026rsquo;s unique pointers to a new TrieNodeã€‚å› ä¸ºæ˜¯unique_ptræ‰€ä»¥åœ¨ä¼ é€’çš„æ—¶å€™ä¸èƒ½å¯¹æŒ‡é’ˆè¿›è¡Œå¤åˆ¶ã€‚ï¼ˆè§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨move()å‡½æ•°ï¼‰ã€‚\n\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231129173037.png\"\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg alt=\"image.png\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/20231129173224.png\"\u003e\u003c/p\u003e","title":"CMU15-445- Project #0 - C++ Primer"},{"content":"","permalink":"https://jialog.top/essay/321/","summary":"","title":""},{"content":"éº»é›€è™½å°äº”è„ä¿±å…¨çš„ä¸€ä¸ªå°è€Œå…¨çš„ç±»unixæ•™å­¦ç”¨æ“ä½œç³»ç»Ÿï¼Œç”±MITå¼€å‘\nå¤šæ ¸çš„æ“ä½œç³»ç»Ÿï¼Œå¤§çº¦6000è¡Œè¿˜æœ‰å¤§çº¦300è¡Œçš„æ±‡ç¼–ï¼Œä»£ç ç®€æ´æ˜“æ‡‚ï¼Œæœ‰å¾ˆå¤šè®¾è®¡éƒ½å€¼å¾—å€Ÿé‰´ã€‚\nä¸€äº›ç‰¹æ€§ æœ‰è¿›ç¨‹ç®¡ç†åŠŸèƒ½ æœ‰è™šæ‹Ÿåœ°å€å’Œç©ºé—´ï¼Œpagetable æ–‡ä»¶ç³»ç»Ÿ æ—¶é—´ç‰‡ 21ä¸ªsyscall ç”¨æˆ·ç¨‹åº sh cat echo grep kill èƒ½å¤Ÿè¢«è§†ä¸ºä¸€ä¸ªçœŸæ­£çš„æ“ä½œç³»ç»Ÿ\nç¼ºå¤±çš„åŠŸèƒ½ ç”¨æˆ·ID ç™»å½•åŠŸèƒ½ æ–‡ä»¶ä¿æŠ¤ è™šæ‹Ÿå†…å­˜ æ— æ³•è”ç½‘ åªæœ‰ä¸¤ä¸ªè®¾å¤‡é©±åŠ¨ xv6ç‰¹æ€§ SMP å¤šçº¿ç¨‹å…±äº«å†…å­˜ è®¾å¤‡ UART å‘é€å­—èŠ‚æµï¼Œä»ä¸€ç«¯åˆ°å¦ä¸€ç«¯ disk ç£ç›˜é©±åŠ¨å™¨ å®šæ—¶å™¨ PLIC å¹³å°çº§ä¸­æ–­æ§åˆ¶å™¨ï¼Œå“ªä¸ªæ ¸å¿ƒåº”è¯¥è¢«å‘Šè¯‰ä¸­æ–­ CLINT æœ¬åœ°ä¸­æ–­æ§åˆ¶å™¨ å†…å­˜ç®¡ç† pagesize 4096B ä¸€ä¸ªfreelist æ²¡æœ‰å¯å˜çš„å†…å­˜åˆ†é… æ²¡æœ‰â€œmallocâ€ ä¸‰çº§é¡µè¡¨ sv39ï¼Œåœ¨pgtbl å·¨é¡µä¸­æœ‰ç”¨åˆ° è°ƒåº¦å™¨ åŸºæœ¬çš„å¾ªç¯è°ƒåº¦ æ—¶é—´ç‰‡çš„å¤§å°æ˜¯å›ºå®šçš„ æ‰€æœ‰çš„æ ¸å¿ƒå…±äº«ä¸€ä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œå¾ªç¯çš„å¯»æ‰¾å¯ä»¥æ‰§è¡Œçš„è¿›ç¨‹ ä¸æ˜¯å®Œå…¨çš„å¾ªç¯ï¼Œå¦‚æœåœ¨æ—¶é—´ç‰‡å†…ç»“æŸï¼Œä¼šæŠŠè¿™ä¸ªè¿›ç¨‹æ”¾è¿›é˜Ÿåˆ—ç„¶åæ¢ä¸€ä¸ªæ¥\nå¯åŠ¨é¡ºåº åŠ è½½æ ¸å¿ƒä»£ç åˆ°å›ºå®šçš„åœ°å€0x8000_0000,æ²¡æœ‰biosï¼Œbootloader bootblock\né” è‡ªæ—‹é”ï¼Œsleepï¼ˆï¼‰ï¼Œwakeupï¼ˆï¼‰ param.h ç”¨æˆ·åœ°å€ç©ºé—´ å‡½æ•°çš„å‚æ•°å°†ä¼šè¢«æ”¾åœ¨æ ˆä¸­ã€‚\nxv6çš„è™šæ‹Ÿåœ°å€ sv39ï¼Œä¸‰çº§é¡µè¡¨ä¹‹åœ° å®é™…ä¸Šxv6åªä½¿ç”¨äº†38ä½æ‰€ä»¥æœ€å¤§çš„æ˜¯256GB\nxv6å¯åŠ¨è¿‡ç¨‹å’Œç»„ç»‡ æ§åˆ¶æƒé€æ­¥çš„è½¬ç§»\næ•°æ®çš„ç±»å‹ è‡ªæ—‹é” å¾ªç¯ä¸æ–­çš„æ£€æŸ¥ï¼Œç›´åˆ°èƒ½å¤Ÿè·å–é”ä¸ºæ­¢ test and setï¼ŒåŸå­çš„æ“ä½œã€‚ é‡Šæ”¾çš„æ—¶å€™ç›´æ¥ä¿®æ”¹å€¼å°±è¡Œï¼Œå¯èƒ½çœ‹èµ·æ¥ä¸æ˜¯å¾ˆåŸå­ï¼Œä½†æ˜¯åœ¨å†…å­˜é‡Œè¿™è¢«è§†ä¸ºä¸€ä¸ªå•ç‹¬çš„æ“ä½œã€‚\nä¸åº”è¯¥é•¿æ—¶é—´è¢«æŒæœ‰ï¼Œè·å–é”ä¹‹ååº”è¯¥å°½å¿«é‡Šæ”¾ã€‚å¯ä»¥ä½¿ç”¨sleepå’Œwakeupè¿›è¡Œé•¿æ—¶é—´çš„è·å–é”ã€‚\nä¸€ä¸ªä½¿ç”¨è‡ªæ—‹é”çš„ä¾‹å­ buffer pushoff popoff å†…å­˜ç®¡ç† kalloc and kfree å°†åœ¨åˆå§‹åŒ–çš„æ—¶å€™ç¬¬ä¸€ä¸ªä½¿ç”¨\nç³»ç»Ÿè°ƒç”¨ åœ¨ç”¨æˆ·æ¨¡å¼ä¸‹ ==killï¼ˆï¼‰== risc-væ¶æ„ å¯„å­˜å™¨ ä¸€å…±32ä¸ªå¯„å­˜å™¨ a0ç”¨äºå­˜æ”¾è¿”å›å‡½æ•°è¿”å›å€¼\nä¸‰ç§æ¨¡å¼ æœºå™¨æ¨¡å¼ï¼ˆmachine modeï¼‰ï¼Œæ˜¯æœ€é«˜æƒé™çš„æ¨¡å¼ï¼Œä½†æ˜¯ç”¨çš„å¹¶ä¸å¤šï¼ŒåŸºæœ¬æ˜¯ä¸¤ç§æƒ…å†µï¼Œä¸€ä¸ªæ˜¯å¯åŠ¨å’Œåˆå§‹åŒ–ï¼Œå¦ä¸€ä¸ªæ˜¯å®šæ—¶å™¨ä¸­æ–­ï¼Œç¨‹åºä¼šå¾ˆå¿«çš„è½¬å˜ä¸ºå¯¹supervisor modeçš„ä¸­æ–­ã€‚ supervisor modeï¼Œæ‰€æœ‰çš„å†…æ ¸æ€ä»£ç å’Œä¸€äº›ç‰¹æƒæŒ‡ä»¤ï¼ˆåªèƒ½åœ¨S å’ŒMæ¨¡å¼ä¸‹æ‰§è¡Œçš„ï¼‰ã€‚ ç”¨æˆ·æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥è¯´åœ¨supervisor æ¨¡å¼ä¸‹è¿è¡Œçš„ä»£ç éƒ½æ˜¯æ ¸å¿ƒä»£ç ï¼Œåä¹‹äº¦ç„¶ 19ä¸ªå¯„å­˜å™¨ é¡µè¡¨ç»“æ„ æ›´æ”¹satpçš„æ—¶å€™éœ€è¦æ›´æ–°flash\nåªç”¨äº†38ä½\nåœ¨user modeä¸‹ åœ¨æœºå™¨æ¨¡å¼ä¸‹ ä¸Šä¸‹æ–‡åˆ‡æ¢ trapfram å’Œtrampoline è°ƒåº¦å‡½æ•° switch.s UART.C 16550aèŠ¯ç‰‡ä¸å¤–éƒ¨è®¾å¤‡è¿›è¡Œäº¤äº’\nè™šæ‹Ÿå†…å­˜çš„æ“ä½œå‡½æ•° é¡µè¡¨ç»“æ„ ä¸€ä¸ªé¡µè¡¨æ ‘ æ ‡å¿—ä½åªåœ¨æœ€åä¸€çº§é¡µè¡¨æ˜¯æœ€é‡è¦çš„ï¼Œå‰ä¸¤çº§éƒ½åªæœ‰æœ‰æ•ˆä½æ˜¯æœ‰ç”¨çš„ï¼Œå…¶ä»–éƒ½ä¸º0.\nä¸€äº›å‡½æ•° ==walkï¼ˆï¼‰==\nè¿”å›é¡µè¡¨é¡¹çš„åœ°å€ã€‚\n==mappagesï¼ˆï¼‰==\n==walkaddrï¼ˆï¼‰== æŠŠè™šæ‹Ÿåœ°å€è½¬æ¢æˆç‰©ç†åœ°å€ã€‚ å¿…é¡»æ˜¯å¯ç”¨çš„è€Œä¸”æ˜¯ ç”¨æˆ·é¡µ ","permalink":"https://jialog.top/posts/os/xv6%E7%AE%80%E4%BB%8B/","summary":"\u003cp\u003eéº»é›€è™½å°äº”è„ä¿±å…¨çš„ä¸€ä¸ªå°è€Œå…¨çš„ç±»unixæ•™å­¦ç”¨æ“ä½œç³»ç»Ÿï¼Œç”±MITå¼€å‘\u003c/p\u003e\n\u003cp\u003eå¤šæ ¸çš„æ“ä½œç³»ç»Ÿï¼Œå¤§çº¦6000è¡Œè¿˜æœ‰å¤§çº¦300è¡Œçš„æ±‡ç¼–ï¼Œä»£ç ç®€æ´æ˜“æ‡‚ï¼Œæœ‰å¾ˆå¤šè®¾è®¡éƒ½å€¼å¾—å€Ÿé‰´ã€‚\u003c/p\u003e\n\u003ch2 id=\"ä¸€äº›ç‰¹æ€§\"\u003eä¸€äº›ç‰¹æ€§\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eæœ‰è¿›ç¨‹ç®¡ç†åŠŸèƒ½\u003c/li\u003e\n\u003cli\u003eæœ‰è™šæ‹Ÿåœ°å€å’Œç©ºé—´ï¼Œpagetable\u003c/li\u003e\n\u003cli\u003eæ–‡ä»¶ç³»ç»Ÿ\u003c/li\u003e\n\u003cli\u003eæ—¶é—´ç‰‡\u003c/li\u003e\n\u003cli\u003e21ä¸ªsyscall\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"ç”¨æˆ·ç¨‹åº\"\u003eç”¨æˆ·ç¨‹åº\u003c/h3\u003e\n\u003cp\u003esh cat echo grep kill\nèƒ½å¤Ÿè¢«è§†ä¸ºä¸€ä¸ªçœŸæ­£çš„æ“ä½œç³»ç»Ÿ\u003c/p\u003e\n\u003ch3 id=\"ç¼ºå¤±çš„åŠŸèƒ½\"\u003eç¼ºå¤±çš„åŠŸèƒ½\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eç”¨æˆ·ID\u003c/li\u003e\n\u003cli\u003eç™»å½•åŠŸèƒ½\u003c/li\u003e\n\u003cli\u003eæ–‡ä»¶ä¿æŠ¤\u003c/li\u003e\n\u003cli\u003eè™šæ‹Ÿå†…å­˜\u003c/li\u003e\n\u003cli\u003eæ— æ³•è”ç½‘\u003c/li\u003e\n\u003cli\u003eåªæœ‰ä¸¤ä¸ªè®¾å¤‡é©±åŠ¨\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"xv6ç‰¹æ€§\"\u003exv6ç‰¹æ€§\u003c/h2\u003e\n\u003ch3 id=\"smp-å¤šçº¿ç¨‹å…±äº«å†…å­˜\"\u003eSMP å¤šçº¿ç¨‹å…±äº«å†…å­˜\u003c/h3\u003e\n\u003ch3 id=\"è®¾å¤‡\"\u003eè®¾å¤‡\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eUART å‘é€å­—èŠ‚æµï¼Œä»ä¸€ç«¯åˆ°å¦ä¸€ç«¯\u003c/li\u003e\n\u003cli\u003edisk ç£ç›˜é©±åŠ¨å™¨\u003c/li\u003e\n\u003cli\u003eå®šæ—¶å™¨\u003c/li\u003e\n\u003cli\u003ePLIC å¹³å°çº§ä¸­æ–­æ§åˆ¶å™¨ï¼Œå“ªä¸ªæ ¸å¿ƒåº”è¯¥è¢«å‘Šè¯‰ä¸­æ–­\u003c/li\u003e\n\u003cli\u003eCLINT æœ¬åœ°ä¸­æ–­æ§åˆ¶å™¨\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"å†…å­˜ç®¡ç†\"\u003eå†…å­˜ç®¡ç†\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003epagesize 4096B\u003c/li\u003e\n\u003cli\u003eä¸€ä¸ªfreelist\u003c/li\u003e\n\u003cli\u003eæ²¡æœ‰å¯å˜çš„å†…å­˜åˆ†é…\u003c/li\u003e\n\u003cli\u003eæ²¡æœ‰â€œmallocâ€\u003c/li\u003e\n\u003cli\u003eä¸‰çº§é¡µè¡¨ sv39ï¼Œåœ¨pgtbl å·¨é¡µä¸­æœ‰ç”¨åˆ°\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"è°ƒåº¦å™¨\"\u003eè°ƒåº¦å™¨\u003c/h3\u003e\n\u003cp\u003eåŸºæœ¬çš„å¾ªç¯è°ƒåº¦\næ—¶é—´ç‰‡çš„å¤§å°æ˜¯å›ºå®šçš„\næ‰€æœ‰çš„æ ¸å¿ƒå…±äº«ä¸€ä¸ªå°±ç»ªé˜Ÿåˆ—ï¼Œå¾ªç¯çš„å¯»æ‰¾å¯ä»¥æ‰§è¡Œçš„è¿›ç¨‹\nä¸æ˜¯å®Œå…¨çš„å¾ªç¯ï¼Œå¦‚æœåœ¨æ—¶é—´ç‰‡å†…ç»“æŸï¼Œä¼šæŠŠè¿™ä¸ªè¿›ç¨‹æ”¾è¿›é˜Ÿåˆ—ç„¶åæ¢ä¸€ä¸ªæ¥\u003c/p\u003e\n\u003ch3 id=\"å¯åŠ¨é¡ºåº\"\u003eå¯åŠ¨é¡ºåº\u003c/h3\u003e\n\u003cp\u003eåŠ è½½æ ¸å¿ƒä»£ç åˆ°å›ºå®šçš„åœ°å€0x8000_0000,æ²¡æœ‰biosï¼Œbootloader bootblock\u003c/p\u003e\n\u003ch3 id=\"é”\"\u003eé”\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003eè‡ªæ—‹é”ï¼Œsleepï¼ˆï¼‰ï¼Œwakeupï¼ˆï¼‰\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"paramh\"\u003eparam.h\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-03-21_15-04-00.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-21_15-04-00.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"ç”¨æˆ·åœ°å€ç©ºé—´\"\u003eç”¨æˆ·åœ°å€ç©ºé—´\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-03-21_14-48-26.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-21_14-48-26.png\"\u003e\u003c/p\u003e\n\u003cp\u003eå‡½æ•°çš„å‚æ•°å°†ä¼šè¢«æ”¾åœ¨æ ˆä¸­ã€‚\u003c/p\u003e\n\u003ch3 id=\"xv6çš„è™šæ‹Ÿåœ°å€\"\u003exv6çš„è™šæ‹Ÿåœ°å€\u003c/h3\u003e\n\u003cp\u003esv39ï¼Œä¸‰çº§é¡µè¡¨ä¹‹åœ°\n\u003cimg alt=\"PixPin_2025-03-21_14-54-26.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-21_14-54-26.png\"\u003e\n\u003cimg alt=\"PixPin_2025-03-21_14-55-13.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-21_14-55-13.png\"\u003e\nå®é™…ä¸Šxv6åªä½¿ç”¨äº†38ä½æ‰€ä»¥æœ€å¤§çš„æ˜¯256GB\u003c/p\u003e\n\u003ch2 id=\"xv6å¯åŠ¨è¿‡ç¨‹å’Œç»„ç»‡\"\u003exv6å¯åŠ¨è¿‡ç¨‹å’Œç»„ç»‡\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-03-21_14-56-23.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-21_14-56-23.png\"\u003e\n\u003cimg alt=\"PixPin_2025-03-21_14-57-53.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-21_14-57-53.png\"\u003e\næ§åˆ¶æƒé€æ­¥çš„è½¬ç§»\u003c/p\u003e\n\u003ch3 id=\"æ•°æ®çš„ç±»å‹\"\u003eæ•°æ®çš„ç±»å‹\u003c/h3\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-03-21_15-03-25.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-21_15-03-25.png\"\u003e\u003c/p\u003e\n\u003ch2 id=\"è‡ªæ—‹é”\"\u003eè‡ªæ—‹é”\u003c/h2\u003e\n\u003cp\u003e\u003cimg alt=\"PixPin_2025-03-21_15-05-59.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-21_15-05-59.png\"\u003e\nå¾ªç¯ä¸æ–­çš„æ£€æŸ¥ï¼Œç›´åˆ°èƒ½å¤Ÿè·å–é”ä¸ºæ­¢\n\u003cimg alt=\"PixPin_2025-03-21_15-08-52.png|550\" loading=\"lazy\" src=\"https://weijiale.oss-cn-shanghai.aliyuncs.com/picgo/PixPin_2025-03-21_15-08-52.png\"\u003e\ntest and setï¼ŒåŸå­çš„æ“ä½œã€‚\né‡Šæ”¾çš„æ—¶å€™ç›´æ¥ä¿®æ”¹å€¼å°±è¡Œï¼Œå¯èƒ½çœ‹èµ·æ¥ä¸æ˜¯å¾ˆåŸå­ï¼Œä½†æ˜¯åœ¨å†…å­˜é‡Œè¿™è¢«è§†ä¸ºä¸€ä¸ªå•ç‹¬çš„æ“ä½œã€‚\u003c/p\u003e","title":""}]